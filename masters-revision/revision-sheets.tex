\documentclass[10pt]{article}

\usepackage[top=1in, left=1.5in, right=1.5in, footskip=.5in, bottom=1in]{geometry}

\usepackage[utf8]{inputenc}
\usepackage{charter}
\usepackage{pifont}
\usepackage{amsmath,amssymb,amsthm}
\usepackage{booktabs}
\usepackage{enumerate}
\usepackage{url}
\usepackage{indentfirst}
\usepackage{tikz-cd}
\usepackage[inline]{enumitem}
\usepackage[capitalize]{cleveref}
\usepackage{multirow}
\usepackage{qcircuit}
\usepackage{tikz}
\usepackage{bbm}

\usepackage{embedfile}

\usepackage{tocloft}
\renewcommand{\cftdot}{\ensuremath{\cdot}}
\renewcommand{\cftdotsep}{5}
\renewcommand{\cftsecnumwidth}{1.5em}
\renewcommand{\cftsubsecnumwidth}{3em}
\renewcommand{\cftsubsubsecnumwidth}{3.5em}

\usepackage{marginnote}
\reversemarginpar

\usepackage{mathtools}
\DeclarePairedDelimiter\bra{\langle}{\rvert}
\DeclarePairedDelimiter\ket{\lvert}{\rangle}
\DeclarePairedDelimiterX\braket[2]{\langle}{\rangle}{#1 \delimsize\vert #2}
\DeclarePairedDelimiterX\ketbra[2]{\vert}{\vert}{#1 \delimsize\rangle\delimsize\langle #2}
\DeclarePairedDelimiterX\bramidket[3]{\langle}{\rangle}{#1 \delimsize\vert #2 \delimsize\vert #3}




\newcommand{\Set}{\mathsf{Set}}
\newcommand{\Grp}{\mathsf{Grp}}
\newcommand{\Rmod}{R\hbox{-}\mathsf{mod}}
\newcommand{\Ab}{\mathsf{Ab}}
\newcommand{\kxmod}{k[x]\hbox{-}\mathsf{mod}}
\newcommand{\rr}{\mathbb{R}}
\newcommand{\zz}{\mathbb{Z}}
\newcommand{\qq}{\mathbb{Q}}
\newcommand{\nn}{\mathbb{N}}
\newcommand{\cc}{\mathbb{C}}
\newcommand{\im}{\mathrm{im}\,}
\newcommand{\id}{\mathrm{id}}
\newcommand{\Ext}{\mathrm{Ext}}
\newcommand{\Tor}{\mathrm{Tor}}
\newcommand{\vbar}{\,|\,}
\newcommand{\ccat}{\mathcal{C}}
\newcommand{\dcat}{\mathcal{D}}
\newcommand{\ecat}{\mathcal{E}}
\newcommand{\Coker}{\mathrm{Coker}\,}
\newcommand{\Coim}{\mathrm{Coim}\,}
\renewcommand{\Im}{\mathrm{Im}\,}
\newcommand{\Ker}{\mathrm{Ker}\,}
\newcommand{\coker}{\mathrm{coker}\,}
\newcommand{\coim}{\mathrm{coim}\,}
\newcommand{\mono}{\rightarrowtail}
\newcommand{\epi}{\twoheadrightarrow}
\newcommand{\lmono}{\leftarrowtail}
\newcommand{\lepi}{\twoheadleftarrow}
\newcommand{\nt}{\Rightarrow}
\newcommand{\Fun}{\mathrm{Fun}}
\newcommand{\blank}{\hbox{--}}
\newcommand{\eq}{\mathrm{eq}}
\newcommand{\coeq}{\mathrm{coeq}}
\newcommand{\PShv}{\mathrm{PShv}}
\newcommand{\van}{\mathbb{V}}
\newcommand{\ide}{\mathbb{I}}
\newcommand{\aff}{\mathbb{A}}
\newcommand{\kon}{{k[x_1,\ldots,x_n]}}
\newcommand{\kom}{{k[x_1,\ldots,x_m]}}
\newcommand{\kzn}{{k[x_0,\ldots,x_n]}}
\newcommand{\kzm}{{k[x_0,\ldots,x_m]}}
\newcommand{\pee}{\mathbb{P}}
\newcommand{\prid}{\mathfrak{p}}
\newcommand{\maid}{\mathfrak{m}}
\newcommand{\Alg}{\mathsf{Alg}}
\newcommand{\Coalg}{\mathsf{Coalg}}
\newcommand{\Sp}{\mathsf{Sp}}
\newcommand{\Aff}{\mathsf{Aff}}
\newcommand{\CRing}{\mathsf{CRing}}
\newcommand{\hilb}{\mathcal{H}}
\newcommand{\idm}{\mathbbm{1}}


\newcommand*{\DashedArrow}[1][]{\mathbin{\tikz [baseline=-0.25ex,-latex, densely dashed,#1] \draw [#1] (0pt,0.5ex) -- (1.3em,0.5ex);}}
\newcommand{\ratmap}{{\,\DashedArrow[->]\,}}
\newcommand\mapsfrom{\mathrel{\reflectbox{\ensuremath{\mapsto}}}}


\newcommand{\remove}[1]{\widehat{#1}}
\newcommand{\interior}[1]{\mathring{#1}}
\newcommand{\reduced}[1]{\widetilde{#1}}
\newcommand{\closure}[1]{\overline{#1}}
\newcommand{\op}[1]{{#1}^\text{op}}

\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator*{\colim}{colim}
\DeclareMathOperator{\codim}{codim}
\DeclareMathOperator{\height}{ht}
\DeclareMathOperator{\spec}{Spec}
\DeclareMathOperator{\tr}{tr}

\def\labelitemi{\boldmath$\cdot$}

\newcommand{\cmark}{\ding{51}}
\newcommand{\xmark}{\ding{55}}

\newcommand{\CT}{\textcolor{orange}{CT}}
\newcommand{\HA}{\textcolor{cyan}{HA}}
\newcommand{\AT}{\textcolor{violet}{AT}}
\newcommand{\AG}{\textcolor{green}{AG}}
\newcommand{\QI}{\textcolor{pink}{QI}}



\begin{document}

    \embedfile{\jobname.tex}

    \author{Timothy Hosgood}
    \title{\vspace{-4em}Revision sheets -- Part C 2016}
    \maketitle
    
    \abstract{These are the revision notes that I made for my final exams in my masters course. They have never been updated since, so there are probably plenty of mistakes. They find themselves uploaded in the hope that some other poor student one day finds them even remotely useful.}

    \tableofcontents
    \clearpage


    \section{\protect\marginnote{\CT~\HA}[0pt]Fundamentals of category theory}

        We often abuse notation and write $x\in\ccat$ to mean $x\in\mathrm{ob}\ccat$.

        \subsection{Functors}

            When we say `functor' we mean a \emph{covariant} functor; we write a contravariant functor $F'\colon\ccat\to\dcat$ as the covariant functor $F\colon\op{\ccat}\to\dcat$.

            \subsubsection{Types of functors}

            Let $F\colon\ccat\to\dcat$ be a functor.

            \begin{itemize}
                \item By definition, $F$ induces a map $\Hom_\ccat(x,y)\to\Hom_\dcat(F(x),F(y))$.
                    We say that $F$ is
                    \begin{itemize}
                        \item \textbf{faithful} if this map is injective;
                        \item \textbf{full} if this map is surjective.
                    \end{itemize}
                \item The set $\{F(c)\mid c\in\ccat\}$ is called the \textbf{image} of $F$, and its closure under isomorphism $\{d\in\dcat\mid d\cong F(c)\text{ for some }c\in\ccat\}$ is called the \textbf{essential image} of $F$.
                \item We say that $F$ is \textbf{essentially surjective} (or \textbf{dense}) if, for all $d\in\dcat$, there exists some $c\in\ccat$ such that $F(c)\cong d$, i.e. if the essential image of $F$ is all of $\dcat$.
                \item Let $F\colon\op{\ccat}\to\Set$.
                    We say that $F$ is \textbf{representable} if it is in the essential image of the \textbf{Yoneda functor} $Y_{(\blank)}\colon\ccat\to\Fun(\op{\ccat},\Set)$ given by $Y_x=\Hom_\ccat(\blank,x)$.
                \item Let $F\colon\ccat\to\Set$.
                    We say that $F$ is \textbf{corepresentable} if it is in the essential image of the \textbf{co-Yoneda functor} $Y^{(\blank)}\colon\op{\ccat}\to\Fun(\ccat,\Set)$ given by $Y^x=\Hom_\ccat(x,\blank)$.
            \end{itemize}

            \subsubsection{Equivalence of categories}

                \begin{itemize}
                    \item Let $F\colon\ccat\to\dcat$ and $G\colon\dcat\to\ccat$ be functors.
                        We say that $F$ and $G$ form an \textbf{equivalence of categories} if there exists natural \emph{isomorphisms} $e\colon\id_\ccat\nt GF$ and $\epsilon\colon FG\nt\id_\dcat$.
                    \item \emph{A functor $F\colon\ccat\to\dcat$ is part of an equivalence of categories iff it is fully faithful and essentially surjective}
                \end{itemize}

        \subsection{Natural transformations}

            \begin{itemize}
                \item A \textbf{natural isomorphism} is a natural transformation whose constituent morphisms are all isomorphisms.
                \item We can compose natural transformations in three ways:
                    \begin{itemize}
                        \item \textbf{Vertical composition:}
                            \begin{equation*}
                                \begin{tikzcd}
                                    \ccat
                                        \ar[bend left=60]{rr}[description, name=U]{F}
                                        \ar{rr}[swap, name=Md]{}
                                        \ar{rr}[description, name=Mu]{G}
                                        \ar[bend right=60]{rr}[description, name=D]{H}
                                        \ar[Rightarrow,to path=(U) -- (Mu)\tikztonodes]{r}{\eta}
                                        \ar[Rightarrow,to path=(Md) -- (D)\tikztonodes]{r}{\epsilon}
                                    &
                                    & \dcat
                                \end{tikzcd}
                            \end{equation*}
                            $$F\nt H$$
                            $$F(x)\xrightarrow{\eta_x}G(x)\xrightarrow{\epsilon_x}H(x)$$
                        \item \textbf{Horizontal composition:}
                            \begin{equation*}
                                \begin{tikzcd}[column sep=large]
                                    \ccat
                                        \rar[bend left=50][description, name=U]{F_1}
                                        \rar[bend right=50][description, name=D]{G_1}
                                        \ar[Rightarrow, to path=(U) -- (D)\tikztonodes]{r}{\eta}
                                    &\dcat
                                        \rar[bend left=50][description, name=U]{F_2}
                                        \rar[bend right=50][description, name=D]{G_2}
                                        \ar[Rightarrow, to path=(U) -- (D)\tikztonodes]{r}{\epsilon}
                                    &\ecat
                                \end{tikzcd}
                            \end{equation*}
                            $$F_2F_1\nt G_2G_1$$
                            $$F_2F_1(x)\xrightarrow{F_2(\eta_x)}F_2G_1(x)\xrightarrow{\epsilon_{G_1(x)}}G_2G_1(x)$$
                        \item \textbf{Whiskering:} (really just horizontal composition with $G_2=F_2$ and $\epsilon=\id_{G_2}$)
                            \begin{equation*}
                                \begin{tikzcd}[column sep=large]
                                    \ccat
                                        \rar[bend left=50][description, name=U]{F_1}
                                        \rar[bend right=50][description, name=D]{G_1}
                                        \ar[Rightarrow, to path=(U) -- (D)\tikztonodes]{r}{\eta}
                                    &\dcat
                                        \rar{F_2}
                                    &\ecat
                                \end{tikzcd}
                            \end{equation*}
                        $$F_2F_1\nt F_2G_1$$
                        $$F_2F_1(x)\xrightarrow{F_2(\eta_x)}F_2G_1(x)$$
                    \end{itemize}
            \end{itemize}

        \subsection{Adjunctions}

            \subsubsection{Equivalent definitions}

                Let $F\colon\ccat\to\dcat$ and $G\colon\dcat\to\ccat$ be functors.
                We say that $F$ and $G$ are \textbf{adjoint}, with $F$ \textbf{left-adjoint} and $G$ \textbf{right-adjoint}, and write $F\dashv G$, if any of the following conditions hold:
                \begin{itemize}
                    \item \textbf{Units:} there exist natural transformations $e\colon\id_\ccat\nt GF$, the \textbf{unit}, and $\epsilon\colon FG\nt\id_\dcat$, the \textbf{counit}, such that the following two composites are both the identity natural transformation:
                        \begin{enumerate}
                            \item $F\overset{\id_F\circ e}{\nt}FGF\overset{\epsilon\circ\id_F}{\nt}F$;
                            \item $G\overset{e\circ\id_G}{\nt}GFG\overset{\id_G\circ\epsilon}{\nt}G$.
                        \end{enumerate}
                    \item \textbf{Natural isomorphisms:} there is an isomorphism $\Hom_\dcat(F(x),y)\cong\Hom_\ccat(x,G(y))$that is natural in both $x$ and $y$.
                    \item \textbf{Initial objects:} there exists a natural transformation $e\colon\id_\ccat\nt GF$ such that $(F(x),e_x)$ is initial in $(x\nt G)$ for all $x\in\ccat$.
                    \item \textbf{Representable functors:} the formal right-adjoint functor $G^\text{formal}$ defined by
                        \begin{align*}
                            G^\text{formal}\colon\dcat&\to\Fun(\op{\ccat},\Set)\\
                            y&\mapsto\Hom_\ccat(F(-),y)
                        \end{align*}
                        is representable for all $y\in\dcat$.
                \end{itemize}

                \fbox{\emph{Work through all of these definitions and show that they're equivalent.}}

            \subsubsection{Properties}

                \begin{itemize}
                    \item \emph{A functor $F\colon\ccat\to\dcat$ has a \emph{left adjoint} iff $(y\nt F)$ has an initial object for every $y\in\dcat$; it has a \emph{right adjoint} iff $(F\nt y)$ has a final object for every $y\in\dcat$.}
                    \item The \textbf{solution set condition} on a locally small category $\ccat$ with small colimits is the following: there exists a small set $I$ and a family of objects $\{c_i\}_{i\in I}$ of $\ccat$ such that, for every $x\in\ccat$, there exists $i\in I$ with $\Hom_\ccat(x,c_i)$ is non-empty.
                    \item \textbf{Adjoint functor theorem:} \emph{Let $F\colon\ccat\to\dcat$ be a functor between locally small categories, where $\ccat$ has small colimits.}
                        \emph{Then $F$ has a \emph{right adjoint} iff $(F\nt y)$ satisfies the solution set condition for all $y\in\dcat$ and $F$ preserves colimits.}
                \end{itemize}

        \subsection{Monomorphisms and epimorphisms}

            Let $f\colon x\to y$ be some morphism in $\ccat$, and $z\in\ccat$ some object.
            Then $f$ is
            \begin{itemize}
                \item a \textbf{monomorphism} if for all $g_1,g_2\colon z\to x$ such that $f\circ g_1=f\circ g_2$ we have that $g_1=g_2$
                    \begin{equation*}
                        \begin{tikzcd}
                            z \ar[bend left=30]{r}{g_1} \ar[bend right=30]{r}[swap]{g_2}
                            & x \rar{f}
                            & y
                        \end{tikzcd}
                    \end{equation*}
                \item an \textbf{epimorphism} if for all $h_1,h_2\colon y\to z$ such that $h_1\circ f=h_2\circ f$ we have that $h_1=h_2$
                    \begin{equation*}
                        \begin{tikzcd}
                            x \rar{f}
                            & y \ar[bend left=30]{r}{h_1} \ar[bend right=30]{r}[swap]{h_2}
                            & z
                        \end{tikzcd}
                    \end{equation*}
                \item a \textbf{regular monomorphism} if $f=\eq(y\rightrightarrows y')$ for some $y'\in\ccat$
                    \begin{equation*}
                        x\xrightarrow{f}y\rightrightarrows y'
                    \end{equation*}
                \item a \textbf{regular epimorphism} if $f=\coeq(x'\rightrightarrows x)$ for some $x'\in\ccat$
                    \begin{equation*}
                        x'\rightrightarrows x\xrightarrow{f}y
                    \end{equation*}
            \end{itemize}

            \emph{If $f$ is a regular monomorphism (epimorphism) then it is a monomorphism (epimorphism).}

        \subsection{(Co)Limits}

            \subsubsection{Definitions using diagrams}

                Let $F\colon I\to\ccat$ be a functor.

                \begin{itemize}
                    \item We call $F\colon I\to\ccat$ a \textbf{diagram of shape $I$}.
                    \item A \textbf{cone of $F$} is an object $c\in\ccat$ together with morphisms $f_i\colon c\to F(i)$ for all $i\in I$ such that, if $\lambda\colon i\to j$ then $F(\lambda)\circ f_i=f_j$.
                        \begin{equation*}
                            \begin{tikzcd}
                                c \ar{dr}[swap, near start]{f_i} \ar[bend left=10]{drr}[near start]{f_j}
                                &
                                &
                                &\\
                                \ldots \rar
                                & F(i) \rar[swap]{F(\lambda)}
                                & F(j) \rar
                                & \ldots
                            \end{tikzcd}
                        \end{equation*}
                    \item A \textbf{cocone of $F$} is an object $c_c\in\ccat$ together with morphisms $g_i\colon F(i)\to c_c$ for all $i\in I$ such that, if $\lambda\colon i\to j$ then $g_j\circ F(\lambda)=g_i$.
                        \begin{equation*}
                            \begin{tikzcd}
                                \ldots \rar
                                & F(i) \rar{F(\lambda)} \ar[bend right=10]{drr}[swap, near end]{g_i}
                                & F(j) \rar \ar{dr}{g_j}
                                & \ldots\\
                                &
                                &
                                &
                                c_c
                            \end{tikzcd}
                        \end{equation*}
                    \item A \textbf{limit} of $F$ is a final object in the category of cones of $F$.
                        That is, it is a cone $\lim_I F\in\ccat$ of $F$, and it is universal with respect to this property: if $L\in\ccat$ is another cone of $F$ then there exists a unique morphism $L\to\lim_I F$.
                        \begin{equation*}
                            \begin{tikzcd}
                                L \ar[dashed]{d}[swap]{\exists!} \ar[dotted, bend left=5]{ddr} \ar[dotted, bend left=15]{ddrr}
                                &
                                &
                                &\\
                                \lim_I F \ar{dr} \ar[bend left=10]{drr}
                                &
                                &
                                &\\
                                \ldots \rar
                                & F(i) \rar[swap]{F(\lambda)}
                                & F(j) \rar
                                & \ldots
                            \end{tikzcd}
                        \end{equation*}
                    \item A \textbf{colimit} of $F$ is an initial object in the category of cocones of $F$.
                        That is, it is a cocone $\colim_I F\in\ccat$ of $F$, and it is universal with respect to this property: if $L_c\in\ccat$ is another cocone of $F$ then there exists a unique morphism $\colim_I F\to L_c$.
                        \begin{equation*}
                            \begin{tikzcd}
                                \ldots \rar
                                & F(i) \rar{F(\lambda)} \ar[bend right=10]{drr} \ar[dotted, bend right=15]{ddrr}
                                & F(j) \rar \ar{dr} \ar[dotted, bend right=5]{ddr}
                                & \ldots\\
                                &
                                &
                                &
                                \colim_I F \ar[dashed]{d}{\exists!}\\
                                &
                                &
                                &
                                L_c
                            \end{tikzcd}
                        \end{equation*}
                    \item \emph{We have the relation $\colim_I F=\lim_{\op{I}}\op{F}$, where $\op{F}\colon\op{I}\to\op{\ccat}$.}
                \end{itemize}

            \subsubsection{Definitions using the diagonal functor}

                Let $F\colon I\to\ccat$ be a functor.

                \begin{itemize}
                    \item The \textbf{diagonal functor} is $\Delta_{(\blank)}\colon\ccat\to\Fun(I,\ccat)$, where $\Delta_x\colon i\mapsto x$ is the constant functor and $\Delta_f\colon\Delta_x\nt\Delta_y$ for $f\colon x\to y$ is given by $(\Delta_f)_c=f$ for all $c\in\ccat$.
                    \item \emph{A cone $C$ on $F$ is equivalent to a natural transformation $\Delta_C\nt F$.}

                        This follows from simply unpacking all the definitions.

                    \item \emph{If $\ccat$ has all limits of shape $I$ then $\lim_I\colon\Fun(I,\ccat)\to\ccat$ is \emph{right adjoint} to the diagonal functor $\Delta\colon\ccat\to\Fun(I,\ccat)$.}

                        Since any cone $C$ on $F$ is equivalent to a natural transformation $\Delta_C\nt F$, and any cone $C$ on $F$ also has a unique morphism $C\to\lim_I F$, we have a \emph{natural} isomorphism $\Hom_{\Fun(I,\ccat)}(\Delta_C,F)\cong\Hom_\ccat(C,\lim_I F)$.
                    \item Dually, \emph{if $\ccat$ has all colimits of shape $I$ then $\colim_I\colon\Fun(I,\ccat)\to\ccat$ is \emph{left adjoint} to the diagonal functor $\Delta\colon\ccat\to\Fun(I,\ccat)$.}
                \end{itemize}
                \begin{equation*}
                    \colim\nolimits_I \dashv \Delta \dashv \lim\nolimits_I
                \end{equation*}

            \subsubsection{Existence}

                \begin{itemize}
                    \item A category $\ccat$ \textbf{has all limits of shape $I$} if $\lim_I F$ exists for all functors $F\colon I\to\ccat$.
                    \item A category $\ccat$ \textbf{has limits} (or \textbf{is complete}) if it has limits of shape $I$ for all \emph{small} categories $I$.
                    \item A category $\ccat$ \textbf{has finite limits} if it has limits of shape $I$ for all finite categories $I$.
                \end{itemize}

                \begin{enumerate}
                    \item \emph{If $\ccat$ has all limits of shape $I$ and $J$ then it has all limits of shape $I\times J$, and the following `Fubini formula' holds:}
                        \begin{equation*}
                            \lim\nolimits_{I\times J}F\cong\lim\nolimits_I\lim\nolimits_J F\cong\lim\nolimits_J\lim\nolimits_I F.
                        \end{equation*}

                        Let $F\colon I\times J\to\ccat$ be a diagram, which we can think of as a functor $F\colon J\to \Fun(I,\ccat)$.
                        We have diagonal functors
                        \begin{align*}
                            &\Delta^I_{(\blank)}\colon\ccat\to\Fun(I,\ccat)\\
                            &\Delta^J_{(\blank)}\colon\Fun(I,\ccat)\to\Fun(J,\Fun(I,\ccat))\\
                            &\Delta^{I\times J}_{(\blank)}\colon\ccat\to\Fun(I\times J,\ccat).
                        \end{align*}
                        Consider the following chain of natural isomorphisms (and similarly for $\lim_J\lim_I F$):
                        \begin{align*}
                            \Hom_\ccat(x,\lim_I\lim_J F) &\cong \Hom_{\Fun(I,\ccat)}(\Delta^I_x,\lim_J F)\\
                            &\cong \Hom_{\Fun(J,\Fun(I,\ccat))}(\Delta^J_{\Delta^I_x},F)\\
                            &\cong \Hom_{\Fun(I\times J,\ccat)}(\Delta^{I\times J}_x,F)\\
                            &\cong \Hom_\ccat(x,\lim_{I\times J}F).
                        \end{align*}
                    \item \emph{The `Fubini formula' also holds for colimits.}
                    \item \emph{A category $\ccat$ has (co)limits iff}
                        \begin{enumerate}
                            \item \emph{it has (co)products and (co)equalizers;}
                            \item \emph{it has cofiltered (filtered) limits and finite (co)limits.}
                        \end{enumerate}

                        \begin{enumerate}
                            \item Say that $\ccat$ has products and equalizers, and let $F\colon I\to\ccat$.
                                For every $f\colon i\to j$ in $I$ we define two morphisms $\left(\prod_{k\in I}F(k)\right)\to F(j)$.
                                The first is simply the projection map from $k=j$; the second is the composition of the project map from $k=i$ followed by $F(f)$.
                                Then both of these maps factor uniquely through $\prod_{(m\to n)\in\Fun([1],I)}F(n)$, where $\Fun([1],I)$ is the category of arrows in $I$, i.e.  $m,n\in I$ together with some morphism $m\to n$.
                                Then (checking universal properties) $\lim_I F=\eq\left(\prod_{k\in I}F(k)\rightrightarrows\prod_{(m\to n)\in\Fun([1],I)}F(n)\right)$.
                            \item Say that $\ccat$ has cofiltered and finite limits.
                                By the previous statement and the next statement, it is enough to show that $\ccat$ has products, since we get equalizers from finite limits.
                                Let $F\colon I\to\ccat$ with $I$ small.
                                Define $I^+$ to be finite subsets of $I$, with morphisms given by inclusion.
                                Then $\op{(I^+)}$ is cofiltered.
                                Define $F^+\colon\op{(I^+)}\to\ccat$ by $J\mapsto\lim_J F_J$.
                                Then (checking universal properties) $\lim_{\op{(I^+)}}F^+=\prod_I F$.
                        \end{enumerate}

                    \item \emph{$\ccat$ has finite (co)limits iff it has binary (co)products, (co)equalizers, and a final (initial) object.}
                \end{enumerate}

                Let $\ccat,\dcat$ be categories.
                Recall that the \textbf{presheaf category} $\PShv(\ccat)$ is defined to be $\Fun(\op{\ccat},\Set)$, and that the Yoneda embedding $\ccat\hookrightarrow\PShv(\ccat)$ given by $x\mapsto\Hom_\ccat(\blank,x)$ is fully faithful.

                \begin{enumerate}
                    \item \emph{If $\dcat$ has limits of shape $I$ then the composite}
                        \begin{equation*}
                            \Fun(I,\Fun(\ccat,\dcat)) \cong \Fun(\ccat,\Fun(I,\dcat))\to\Fun(\ccat,\dcat).
                        \end{equation*}
                        \emph{is the limit functor, i.e. limits in $\Fun(\ccat,\dcat)$ are computed pointwise, and dually for colimits.}

                            We claim that the adjunction $(\Delta\dashv\lim_I)$ between categories $\dcat\rightleftarrows\Fun(I,\dcat)$ induces an adjunction
                            \begin{equation*}
                                \Fun(\ccat,\dcat)\rightleftarrows\Fun(\ccat,\Fun(I,\dcat)).
                            \end{equation*}
                            Then we claim that the composition
                            \begin{equation*}
                                \Fun(\ccat,\dcat)\to\Fun(\ccat,\Fun(I,\dcat)\cong\Fun(I,\Fun(\ccat,\dcat))
                            \end{equation*}
                            coincides with the constant functor
                            \begin{equation*}
                                \Fun(\ccat,\dcat)\to\Fun(I,\Fun(\ccat,\dcat)),
                            \end{equation*}
                            where the first functor comes from the constant functor $\Delta\colon\dcat\to\Fun(I,\dcat)$.

                    \item \emph{Every presheaf is a colimit of representable presheaves.}
                        \emph{In particular, for a presheaf $F$ we have an isomorphism $F\cong\colim_{\op{(*\nt F)}}P$, where $P(x,y)=Y_x$.}

                            We have $P\colon\op{(*\nt F)}$ defined by $P(x,y)=Y_x$ and the constant functor $\Delta\colon\PShv(\ccat)\to\Fun(\op{(*\nt F)},\PShv(\ccat))$.
                            If $\ccat$ is small then so too is $\op{(*\nt F)}$.
                            We claim that
                            \begin{equation*}
                                \Hom_{\PShv(\ccat)}(F,G) \cong \Hom_{\Fun(\op{(*\nt F)},\PShv(\ccat))}(P,\Delta_G).
                            \end{equation*}
                            Then the result follows from the fact that colimits are left adjoint to the constant functor.

                    \item \emph{Let $\ccat$ be small and $\dcat$ have small colimits.}
                        \emph{Then there is an equivalence of categories}
                        \begin{equation*}
                            \Fun^\text{colim}(\PShv(\ccat),\dcat)\cong\Fun(\ccat,\dcat).
                        \end{equation*}

                        \fbox{\emph{Work through the proof of this (p. 34 of lecture notes).}}
                \end{enumerate}

            \subsubsection{Inverse and direct limits}

                \begin{itemize}
                    \item A \textbf{poset} $P$ is a set with a \textbf{partial order}, i.e. for all $a,b,c\in P$ the following hold:
                        \begin{enumerate}
                            \item $a\leqslant a$
                            \item $a\leqslant b\leqslant c\implies a\leqslant c$
                            \item $a\leqslant b\leqslant a\implies a=b$
                        \end{enumerate}
                    \item A \textbf{directed poset} is a poset $D$ such that every pair of elements has an upper bound, i.e. for all $x,y\in D$ there exists $u\in D$ such that $x\leqslant d$ and $y\leqslant d$.
                \end{itemize}

                Let $D$ be a directed poset (usually $\nn$).

                \begin{itemize}
                    \item An \textbf{inverse} (or \textbf{projective}) \textbf{limit} is a limit of shape $\op{D}$, written as $\varprojlim_D$.
                    \item A \textbf{direct} (or \textbf{inductive}) \textbf{limit} is a colimit of shape $D$, written as $\varinjlim_D$.
                \end{itemize}

                When $\ccat=\Ab$ (or, more generally, $\Rmod$) and $D$ is a directed poset, we have the following descriptions of projective and inductive limits:
                \begin{align*}
                    \varprojlim_D F &= \left\{ (x_\alpha)\in\prod_{\alpha\in D}F(\alpha) \,\,\bigg|\,\, F(\alpha\leqslant\beta)(x_\beta)=x_\alpha\text{ for all }\alpha\leqslant\beta \right\}\\
                    \varinjlim_D F &= \left(\coprod_{\alpha\in D}F(\alpha)\right) \bigg/ \bigg\{ x_\alpha\sim F(\alpha\leqslant\beta)(x_\alpha) \text{ for }x_\alpha\in F(\alpha) \bigg\}
                \end{align*}

            \subsubsection{Examples}\label{sssec:examples-of-co-limits}

                \begin{table}[!ht]
                    \centering
                    \begin{tabular}{lll}
                        $I$ & $\lim_I F$ & $\colim_I F$\\
                        \toprule
                        empty category & final object in $\ccat$ & initial object in $\ccat$\\
                        discrete category & product indexed by $I$ & coproduct indexed by $I$\\
                        $*$ & $F(*)$ & $F(*)$\\
                        $*\rightrightarrows*$ & equaliser & coequaliser\\[1em]
                        $*\rightarrow*\leftarrow*$ & pullback & --\\
                        $*\leftarrow*\rightarrow*$ & -- & pushout
                    \end{tabular}
                    \caption{(Co)Limits of shape $I$ for various categories $I$, where $*$ is an arbitrary single object.}\label{tb:limits-for-various-I}
                \end{table}

                \begin{enumerate}
                    \item See \cref{tb:limits-for-various-I} for some general examples of limits of shape $I$ for various categories $I$.
                    \item A pullback can be written as an equaliser and a product: $X\times_Z Y\cong\eq(X\times Y\rightrightarrows Z)$
                    \item When $\ccat=\Rmod$ and $I$ is a directed poset (usually taken to be $\nn$), we have the following identities:
                        \begin{itemize}
                            \item $\lim(A\lepi A^2\lepi A^3\lepi\ldots)=\prod_{n=1}^\infty A$
                            \item $\colim(A\mono A^2\mono A^3\mono\ldots)=\coprod_{n=1}^\infty A$
                            \item $\lim(\zz/p\zz\lepi\zz/p^2\zz\lepi\zz/p^3\zz\lepi\ldots)=\zz_p$ (the \textbf{$p$-adic integers})
                            \item $\colim(\zz/p\zz\mono\zz/p^2\zz\mono\zz/p^3\zz\mono\ldots)=\zz[\frac{1}{p}]/\zz$
                            \item $\lim(\zz/1!\zz\lepi\zz/2!\zz\lepi\zz/3!\zz\lepi\ldots)=\widehat{\zz}$ (the \textbf{profinite completion of $\zz$})
                            \item $\colim(\zz/1!\zz\mono\zz/2!\zz\mono\zz/3!\zz\mono\ldots)=\qq/\zz$
                        \end{itemize}
                        We also have the following isomorphisms:
                        \begin{itemize}
                            \item $\qq/\zz\cong\coprod_{p\text{ prime}}\zz[\frac{1}{p}]/\zz$
                            \item $\widehat{\zz}\cong\prod_{p\text{ prime}}\zz_p$
                            \item $\Hom(\zz[\frac{1}{p}]/\zz,\zz[\frac{1}{p}]/\zz)\cong\zz_p$
                            \item $\Hom(\qq/\zz,\qq/\zz)\cong\widehat{\zz}$
                        \end{itemize}
                \end{enumerate}

    \section{\protect\marginnote{\CT}[0pt]Categorical constructions}

        \begin{itemize}
            \item A \textbf{discrete category} is a set $\mathrm{ob}\,\ccat=X$ with $\Hom_\ccat(x,y)=\varnothing$ for $x\neq y$ and $\Hom_\ccat(x,x)=\{\id_x\}$.
            \item A \textbf{groupoid} is a category $\ccat$ such that every morphism in $\ccat$ is an isomorphism.
            \item A \textbf{connected groupoid} is a groupoid where any two objects are isomorphic.
            \item Let $F\colon\ccat\to\dcat$ be a functor, and $y\in\dcat$.
                We define the category $(y\nt F)$ whose objects are pairs $(x,f)$, where $x\in\ccat$ and $f\colon y\to F(x)$, and whose morphisms $(x_1,f_1)\to (x_2,f_2)$ are given by morphisms $x_1\to x_2$ in $\ccat$ making the obvious diagram commute.
            \item If $\dcat$ is a concrete category (i.e. its objects have sub-objects) we define $(*\nt F)$ to be the category who objects are pairs $(x,y)$, with $x\in\ccat$ and $y\in F(x)$.
            \item Given a category $\ccat$ we define the \textbf{presheaf category} $\PShv(\ccat)$ as $\Fun(\op{\ccat},\Set)$.
        \end{itemize}

    \section{\protect\marginnote{\CT}[0pt]Types of categories}

        A category $\ccat$ is \ldots
        \begin{itemize}
            \item \textbf{small} if both $\mathrm{ob}\,\ccat$ and $\Hom_\ccat(x,y)$ are proper sets (for all $x,y\in\ccat$).
            \item \textbf{locally small} if $\Hom_\ccat(x,y)$ is a proper set for all $x,y\in\ccat$.
            \item \textbf{essentially small} if it equivalent to a small category.
            \item \textbf{locally presentable} if there exists an essentially small subcategory $\ccat^c\hookrightarrow\ccat$ of so-called \textbf{compact objects} such that the functor $\ccat\to\Fun_\text{lex}(\op{(\ccat^c),\Set}$ is an equivalence -- or equivalently if $\ccat$ has  a fully faithful embedding $i\colon\ccat\hookrightarrow\mathrm{PShv}(\dcat)$ to some essentially small category $\dcat$ such that $i$ commutes with filtered colimits and has a left adjoint.
            \item \textbf{total} if the Yoneda embedding $\ccat\to\mathsf{PShv}(\ccat)$ has a left adjoint.
            \item \textbf{cofiltered} if it has cones for every finite diagram or equivalently if satisfies the following three properties:
                \begin{enumerate}
                    \item it is non-empty;
                    \item for every $i,j\in \ccat$ there exists $k\in \ccat$ with $k\to i$ and $k\to j$;
                    \item for every $i,j\in \ccat$ and $f,g\colon i\to j$ there exists $k\in \ccat$ with $k\to i$ such that $k\to i\rightrightarrows j$ commutes.
                \end{enumerate}
            \item \textbf{filtered} if $\op{\ccat}$ is cofiltered.
            \item \emph{Let $\ccat$ be a locally small category with small colimits.}
                \emph{Then $\ccat$ has a final object iff the \textbf{solution set condition} is satisfied: there exists a proper set $I$ and a family $\{c_i\}_{i\in I}$ of objects of $\ccat$ such that for every $x\in\ccat$ there exists an $i\in I$ such that $\Hom_\ccat(x,c_i)$ is non-empty.}

                If $\ccat$ has a final object then take $c$ to be the final object (and $I=\{*\}$).
                If $\ccat$ satisfies the solution set condition then let $w=\coprod_{i\in I}c_i$.
                We claim that the coequaliser $c$ of \emph{all endomorphisms} of $w$ is final, i.e. that $\Hom(x,c)$ has a single element (up to isomorphism).
                Note that $c\mono w$ is a regular monomorphism.
        \end{itemize}

    \section{\protect\marginnote{\CT~\HA}[0pt]Interaction between functors and limits}

        \subsection{(Left/Right-)Exact functors}

            \subsubsection{Definitions}

                \begin{itemize}
                    \item A functor $F\colon\ccat\to\dcat$ is \textbf{left exact} if it preserves \emph{finite limits}; it is \textbf{right exact} if it preserves \emph{finite colimits}.
                    \item If $F\colon\ccat\to\dcat$ is an \emph{additive} functor between \emph{abelian} categories and $0\to A\to B\to C\to 0$ is a \emph{short exact sequence} in $\ccat$ then we have the following equivalent definition: $F$ is \textbf{left exact} if $0\to F(A)\to F(B)\to F(C)$ is exact; it is \textbf{right exact} if $F(A)\to F(B)\to F(C)\to 0$ is exact.
                    \item A functor $F\colon\ccat\to\dcat$ is \textbf{exact} if it is left exact and right exact.
                \end{itemize}

            \subsubsection{Properties}

                \emph{Let $F\colon\ccat\to\dcat$ be an exact functor. Then $F$ preserves long exact sequences.}

                \fbox{\emph{Prove this.}}

        \subsection{Interaction}

            Let $F\colon\ccat\to\dcat$ be a functor.
            It is simple to show that $F$ sends cones on $M\colon I\to\ccat$ to cones on $F\circ M$, but it might not preserve \textbf{universal cones}, i.e. limits.

            \begin{itemize}
                \item We say that $F$ \textbf{preserves limits} if for any diagram $M\colon I\to\ccat$ the functor $F$ sends a universal cone to a universal cone, or equivalently if the canonical morphism $F(\lim_I M)\to\lim_I(F\circ J)$ is an isomorphism.
                \item We say that $F$ \textbf{reflects limits} if for any diagram $M\colon I\to\ccat$, any cone which is sent to a universal cone is itself universal.
                \item We say that $F$ \textbf{creates limits} if for any diagram $M\colon I\to\ccat$, the preimage of any universal cone on $F\circ M$ is non-empty and consists of universal cones.
                \item \emph{If limits of shape $I$ exist in $\dcat$ and $F$ creates limits of shape $I$ then limits of shape $I$ exist in $\ccat$ and $F$ preserves and reflects them.}
            \end{itemize}

            \begin{enumerate}
                \item \emph{Let $\ccat$ be a locally small category.}
                    \emph{Then $\Hom_\ccat(x,\blank)\colon\ccat\to\Set$ preserves limits for all $x\in\ccat$, and dually for $\Hom_\ccat(\blank,x)$, i.e.}
                    \begin{align*}
                        \Hom_\ccat(x,\lim\nolimits_I M)\cong\lim\nolimits_I\Hom(x,M)\\
                        \Hom_\ccat(\colim\nolimits_I M,x)\cong\lim\nolimits_I\Hom(M,x)
                    \end{align*}

                        We have the following chain of natural (in $x$) isomorphisms:
                        \begin{align*}
                            \Hom_\Set(\{*\},\Hom_\ccat(x,\lim\nolimits_I M)) &\cong \Hom_\ccat(x,\lim\nolimits_I M)\\
                            &\cong \Hom_{\Fun(I,\ccat)}(\Delta_x,M)\\
                            &\cong \Hom_{\Fun(I,\Set)}(\Delta_{\{*\}},\Hom_\ccat(x,M))\\
                            &\cong \Hom_\Set(\{*\},\lim\nolimits_I\Hom_\ccat(x,M)).
                        \end{align*}
                \item \emph{Let $F\colon\ccat\rightleftarrows\dcat\colon G$ be an adjunction $(F\dashv G)$.}
                    \emph{Then $G$ preserves \emph{limits} and $F$ preserves \emph{colimits}.}

                    This follows from the $\Hom$ definition of adjunctions and the previous statement about $\Hom$ preserving limits.
                \item \emph{If $(F\dashv G)$ then in particular $F$ is right-exact and $G$ is left-exact.}
                \item \emph{Let $\ccat$ be locally presentable and $\dcat$ locally small.}
                    \emph{Then $F\colon\ccat\to\dcat$ has a right adjoint iff it preserves small colimits.}

                    \fbox{\emph{Work through the proof of this (p. 37 of lecture notes).}}
                \item \emph{Let $\ccat$ be locally presentable and total and $\dcat$ locally presentable.}
                    \emph{Then $F\colon\ccat\to\dcat$ has a right adjoint iff it preserves colimits.}

                    \fbox{\emph{Work through the proof of this (p. 36 of lecture notes).}}
            \end{enumerate}

    \section{\protect\marginnote{\CT}[0pt]Monads}

        \subsection{(Co)Monads}

            Let $\ccat$ be a category.

            \begin{itemize}
                \item A \textbf{monad $T$ acting on $\ccat$} is an endofunctor $T\colon\ccat\to\ccat$ together with two natural transformations: \textbf{multiplication} $\mu\colon T\circ T\nt T$ and \textbf{unit} $\eta\colon\id_\ccat\nt T$ such that the following diagrams commute:
                    \begin{equation*}
                        \begin{tikzcd}
                            T\circ T\circ T \ar[Rightarrow]{r}{\id\circ\mu} \ar[Rightarrow]{d}[swap]{\mu\circ\id}
                            & T\circ T \ar[Rightarrow]{d}{\mu}\\
                            T\circ T \ar[Rightarrow]{r}{\mu}
                            & T
                        \end{tikzcd}
                    \end{equation*}
                    \begin{equation*}
                        \begin{tikzcd}
                            T\circ T \ar[Rightarrow]{dr}[swap]{\mu}
                            & T\circ\id \ar[Rightarrow]{r}{\id\circ\eta} \ar[equal]{d} \ar[Rightarrow]{l}[swap]{\eta\circ\id}
                            & T\circ T \ar[Rightarrow]{dl}{\mu}\\
                            & T &
                        \end{tikzcd}
                    \end{equation*}
                    \item A \textbf{comonad $T$ acting on $\ccat$} is a monad acting on $\op{\ccat}$, and we call the natural transformations \textbf{comultiplication} $\Delta\colon T\nt T\circ T$ and \textbf{counit} $\epsilon\colon T\nt\id_\ccat$.
                    \item \emph{Let $F\colon\ccat\leftrightarrows\dcat\colon G$ be an adjunction $F\dashv G$.}
                        \emph{Then $GF$ has the structure of a monad on $\ccat$ and $FG$ has the structure of a comonad on $\dcat$.}

                        This is a diagram check. 
                        For $T=GF$ the unit of $T$ is the unit of the adjunction $e\colon\id_\ccat\nt GF$ and the multiplication of $T$ is induced by the counit $\epsilon\colon FG\nt\id_\dcat$, i.e. $\mu\colon GFGF\nt GF$ is given by $\mu=\id_G\circ\epsilon\circ\id_F$.
            \end{itemize}

        \subsection{Algebras}

            Let $T\colon\ccat\to\ccat$ be a monad on $\ccat$.

            \begin{itemize}
                \item An \textbf{algebra over $T$} is an object $x\in\ccat$ together with a morphism $a\colon Tx\to x$ such that
                \begin{enumerate}
                     \item the composite $x\xrightarrow{\eta_x}Tx\xrightarrow{a}x$ is the identity;
                     \item the following diagram commutes:
                        \begin{equation*}
                            \begin{tikzcd}
                                T^2x \ar{r}{T(a)} \ar{d}{\mu_x}
                                & Tx \ar{d}{a}\\
                                Tx \ar{r}{a}
                                & x
                            \end{tikzcd}
                        \end{equation*}
                \end{enumerate}
                and we define \textbf{coalgebras} dually.
                \item We write $\Alg_T(\ccat)$ to denote the \textbf{category of $T$-algebras in $\ccat$}, whose objects are $T$-algebras $(x,a)$ and whose morphisms are induced by morphisms $f\colon x\to y$ making the obvious diagram commute.
            \end{itemize}

        \subsection{(Co)Monadic functors}

            \begin{itemize}
                \item \emph{Let $T$ be a monad on $\ccat$.}
                    \emph{Then the forgetful functor $R\colon\Alg_T(\ccat)\to\ccat$ has a \emph{left} adjoint, and the associated monad on $\ccat$ is naturally isomorphic to $T$.}
                    \emph{Dually, the forgetful functor of $S$-coalgebras has a \emph{right} adjoint whose associated comonad is isomorphic to $S$.}

                    Given a monad $T$ on $\ccat$ we define $L\colon\ccat\to\Alg_T(\ccat)$ by $x\mapsto Tx$, where the $T$-algebra structure on $Tx$ is given by $T^2x\xrightarrow{\mu_x}Tx$.
                    Now let $(A,a_A)$ be a $T$-algebra and $x\in\ccat$.
                    Then a morphism of $T$-algebras $Tx\to A$ is a morphism $f\colon Tx\to A$ in $\ccat$ such that the square in the following diagram commutes:
                    \begin{equation*}
                        \begin{tikzcd}
                            Tx \ar{d}[swap]{T(\eta_x)} \ar[equal]{dr}
                            &\\
                            T^2x \ar{r}[swap]{\mu_x} \ar{d}[swap]{T(f)}
                            & Tx \ar{d}{f}\\
                            TA \ar{r}{a_A}
                            & A
                        \end{tikzcd}
                    \end{equation*}
                    noting that the triangle commutes by the unit axiom of the monad $T$.
                    But then $f$ is uniquely determined by the composite $a_A\otimes T(f)\otimes T(\eta_x)$, i.e. by $f\circ\eta_x$.
                    Thus $\Hom_{\Alg_T(\ccat)}(Lx,A)\cong\Hom_\ccat(x,RA)$.
                \item A functor $G\colon\dcat\to\ccat$ is \textbf{monadic} if it has a \emph{left} adjoint, and for the corresponding monad $T$ the functor $\dcat\to\Alg_T(\ccat)$ is an equivalence.
                \item A functor $F\colon\ccat\to\dcat$ is \textbf{comonadic} if it has a \emph{right} adjoint, and for the corresponding comonad $S$ the functor $\ccat\to\Coalg_S(\ccat)$ is an equivalence.
                \item \emph{Let $T$ be a monad on $\ccat$.}
                    \emph{Then the forgetful functor $R\colon\Alg_T(\ccat)\to\ccat$ creates \emph{limits}.}
                    \emph{Further, if $T$ preserves \emph{colimits} of shape $I$ then the forgetful functor reflects those colimits.}

                    Let $J\colon I\to\Alg_T(\ccat)$ be a diagram.
                    We need to show that $\lim_I FJ$ has a unique $T$-algebra structure compatible with the forgetful maps, i.e. we need to construct and show uniqueness of a map $T(\lim_I FJ)\to\lim_I FJ$ that makes the following diagram commute for all $i\in I$:
                    \begin{equation*}
                        \begin{tikzcd}
                            T(\lim_I FJ) \rar \dar
                            & \lim_I FJ \dar\\
                            TFJ(i) \rar
                            & FJ(i)
                        \end{tikzcd}
                    \end{equation*}
                    where the bottom morphism comes from the $T$-algebra maps on the $J(i)$.
                    By a universal property, every such map uniquely factors through $\lim_I TFJ$ and is thus uniquely determined.

                    Now suppose that $T$ preserves colimits of shape $I$ and let $J\colon I\to\Alg_T(\ccat)$ be a diagram.
                    We endow $\colim_I FJ$ with a $T$-algebra structure by defining the action $T(\colim_I FJ)\cong\colim_I TFJ\to\colim_I FJ$.
                    The universal property of this $T$-algebra follows from the universal property of the colimit.
            \end{itemize}

        \subsection{Barr-Beck}

            \subsubsection{Conservative functors and split pairs}

                \begin{itemize}
                    \item A functor $F\colon\ccat\to\dcat$ is \textbf{conservative} if it reflects isomorphisms, i.e. if $f$ is a morphism in $\ccat$ such that $F(f)$ is an isomorphism in $\dcat$ then $f$ is an isomorphism.
                    \item \emph{Let $F\colon\ccat\to\dcat$ be a conservative functor which admits a fully faithful adjoint (either left or right).}
                        \emph{Then $F$ is an equivalence.}

                        Assume that $F$ admits a fully faithful left adjoint $F^L$.
                        Full faithfulness implies that the unit $\eta\colon\id_\dcat\nt FF^L$ is a natural isomorphism; we need to show that the counit $\epsilon\colon F^LF\nt\id_\ccat$ is also an isomorphism.
                        One of the adjunction axioms tells us that the composite $F(\epsilon_x)\circ\eta_{F(x)}$ is $\id_{F(x)}$ for all $x\in\ccat$.
                        Since $\eta_{F(x)}$ is an isomorphism, $F(\epsilon_x)$ must also be an isomorphism.
                        But $F$ is conservative, and so $\epsilon_x$ is an isomorphism for all $x\in\ccat$.
                    \item If we have a pair of morphisms $f,g\colon x\to y$ then a \textbf{fork} is a cocone
                        \begin{equation*}
                            x\underset{g}{\overset{f}{\rightrightarrows}} y\xrightarrow{e}z.
                        \end{equation*}
                    \item A fork is \textbf{split} if there exists morphisms $z\xrightarrow{s}y\xrightarrow{t}x$ such that
                        \begin{enumerate}
                            \item $es=\id_z$
                            \item $ft=\id_y$
                            \item $gt=se$.
                        \end{enumerate}
                    \item \emph{Every split fork is a coequaliser.}

                        Say we have some split fork
                        \begin{equation*}
                            x\underset{g}{\overset{f}{\rightrightarrows}} y\xrightarrow{e}z.
                        \end{equation*}
                        Let $w\in\ccat$ come with a morphism $e'\colon y\to w$ such that $e'f=e'g$.
                        Define $h=e's\colon z\to w$, so that $he=e'se=e'gt=e'ft=e'$.
                        Further, $h$ is uniquely defined since $h=hes=e's$.
                    \item A pair of morphisms $f,g\colon x\to y$ is called a \textbf{split pair} if their coequaliser exists and is split.
                    \item A pair of morphisms $f,g\colon x\to y$ is called an \textbf{$F$-split pair} for a functor $F\colon\ccat\to\dcat$ if $F(f),F(g)$ is a split pair.
                \end{itemize}

            \subsubsection{Important examples}

                \begin{enumerate}
                    \item \emph{Let $T$ be a monad on $\ccat$ with multiplication $\mu$ and let $x\in\ccat$ be a $T$-algebra with action $a$.}
                        \emph{Then we have the split pair}
                        \begin{equation*}
                            T^2x \underset{T(a)}{\overset{\mu_x}{\rightrightarrows}} Tx.
                        \end{equation*}

                        The splitting is given by $s=\eta_x\colon x\to Tx$ and $t=\eta_{Tx}\colon Tx\to T^2x$.
                    \item \emph{Let $F\dashv G$ be an adjunction.}
                        \emph{Then we have the $G$-split fork}
                        \begin{equation*}
                            FGFG(y) \underset{FG(\epsilon_y)}{\overset{\epsilon_{FG(y)}}{\rightrightarrows}} FG(y) \xrightarrow{\epsilon_y} y.
                        \end{equation*}

                        Applying $G$ we get a fork which is a split fork for the $GF$-algebra $G(y)$ by the previous example.
                \end{enumerate}

            \subsubsection{Barr-Beck theorem}

                \begin{itemize}
                    \item \textbf{The monadic Barr-Beck theorem:}
                        \emph{A functor $G\colon\dcat\to\ccat$ is monadic iff the following conditions hold:}
                        \begin{enumerate}
                            \item \emph{$G$ admits a left adjoint;}
                            \item \emph{$G$ is conservative;}
                            \item \emph{every $G$-split pair of morphisms admits a coequaliser in $\dcat$ and it is preserved by $G$.}
                        \end{enumerate}

                        \fbox{\emph{Work through a \emph{sketch} proof of this (p. 46 of lecture notes).}}
                    \item \textbf{The comonadic Barr-Beck theorem:}
                        \emph{A functor $F\colon\ccat\to\dcat$ is comonadic iff the following conditions hold:}
                        \begin{enumerate}
                            \item \emph{$F$ admits a right adjoint;}
                            \item \emph{$F$ is conservative;}
                            \item \emph{every $F$-cosplit pair of morphisms admits an equaliser in $\ccat$ and it is preserved by $F$.}
                        \end{enumerate}
                \end{itemize}

        \subsection{Descent}

            \fbox{\emph{Work through this section in the lecture notes.}}
    
    \section{\protect\marginnote{\CT}[0pt]Categorical algebraic geometry}

        Let $k$ be an (algebraically closed) field (of characteristic zero).

        \subsection{Affine schemes}

            \begin{itemize}
                \item We write $\Alg_k$ to mean the \textbf{category of $k$-algebras}.
                \item A \textbf{space} is a functor $\Alg_k\to\Set$.
                    We write $\Sp=\Fun(\Alg_k,\Set)$ to mean the \textbf{category of spaces}.
                \item The value of a space on a ring $R$ is called the \textbf{set of $R$-points of the space}.
                \item The \textbf{spectrum functor $\spec$} is the Yoneda functor $\op{\Alg}_k\hookrightarrow\Sp$.
                \item The \textbf{category of affine schemes $\Aff$} is defined to be the essential image of the spectrum functor $\op{\Alg}_k\hookrightarrow\Sp$.
                \item \emph{By definition then, we have the isomorphism of categories $\Aff\cong\op{\Alg}_k$.}
                    \emph{This lets us rewrite \textbf{spaces} as presheaves on affine schemes, i.e. $\Sp\cong\PShv(\Aff)$.}
                \item The \textbf{ring of functions} $\mathcal{O}\colon\Sp\to\op{\CRing}$ is the functor given by $\mathcal{O}(X)=\lim_{\spec R\to X}R$.
                \item \emph{The functor $\mathcal{O}$ sends colimits in $\Sp$ to limits in $\CRing$.}
                    \emph{Thus}
                    \begin{equation*}
                        \spec R_1\times_{\spec S}\spec R_2 \cong \spec(R_1\otimes_S R_2).
                    \end{equation*}
                \item Two very important examples of affine schemes are
                    \begin{enumerate}
                        \item $\aff^n\cong\spec\kon$;
                        \item $\mathbb{G}_m\cong\spec k[x,x^{-1}]$, where $\mathbb{G}_m(R)=R^\times$.
                    \end{enumerate}
            \end{itemize}

        \subsection{Non-affine schemes}

            \begin{itemize}
                \item A module $M$ over a commutative ring $R$ is \textbf{invertible} if there exists an $R$-module $N$ such that $M\otimes_R N\cong R$.
                \item Define \textbf{projective $n$-space} $\pee^n$ to be the functor which maps $R$ to the set of invertible $R$-submodules of $R^{\oplus(n+1)}$.
                    If $R$ is a field then all invertible modules are isomorphic to $R$, and $\pee^n(R)$ is the set of lines (one-dimensional subspaces) in $R^{n+1}$, which agrees with the classical notion of a projective space.
                \item \emph{$\pee^n$ is not an affine scheme.}
                    \emph{In particular, $\mathcal{O}(\pee^n)\cong k$.}
            \end{itemize}

        \subsection{Tangent spaces}

            Let $X\in\Sp$ be a space and $p\in X(k)$ be a $k$-point.

            \begin{itemize}
                \item Write $\pi\colon k[\varepsilon]/\varepsilon^2\to k$ \textbf{to mean} the natural projection.
                \item The \textbf{tangent space $T_pX$ of $X$ at $p$} is the fibre of $X(\pi)$ at $p\in X(k)$.
            \end{itemize}

        \subsection{Quasi-coherent sheaves}

            Let $X\in\Sp$ be a space.

            \begin{itemize}
                \item A \textbf{quasi-coherent sheaf $\mathcal{F}$ on $X$} is the following collection of data:
                    \begin{enumerate}
                        \item an $R$-module $f^*\mathcal{F}$ for every ring $R$ and morphism $f\colon\spec R\to X$;
                        \item an isomorphism $f^*\mathcal{F}\otimes_{R_2}R_1\cong(f\circ g)^*\mathcal{F}$ for every morphism $g\colon\spec R_1\to\spec R_2$ of affine schemes and $f\colon\spec R_2\to X$,
                    \end{enumerate}
                    where the isomorphisms satisfy the \textbf{cocycle condition}: for any pair of morphisms $g_1\colon\spec R_1\to\spec R_2$ and $g_2\colon\spec R_2\to\spec R_3$ and morphism $f\colon\spec R_3\to X$ we have equality between the two following isomorphisms:
                        \begin{itemize}
                            \item $(f\circ g_2\circ g_1)^*\mathcal{F} \cong f^*\mathcal{F}\otimes_{R_3}R_1$
                            \item $(f\circ g_2\circ g_1)^*\mathcal{F} \cong (f\circ g_2)^*\mathcal{F}\otimes_{R_2}R_1 \cong f^*\mathcal{F}\otimes_{R_3}R_2\otimes_{R_2}R_1 \cong f^*\mathcal{F}\otimes_{R_3}R_1$
                        \end{itemize}
            \end{itemize}


    \addtocontents{toc}{\protect\addvspace{20pt}\hrule\protect\addvspace{10pt}}


    \section{\protect\marginnote{\CT~\HA~\AT}[0pt]Tensor product}

        \subsection{Definition}

            \subsubsection{Modules over a ring}

                The tensor product $A\otimes_R B$ of two modules $A$ and $B$ over a \emph{commutative} ring $R$ \mbox{is defined as}
                \begin{equation*}
                    A\otimes_R B \cong  F(A\times B)/G
                \end{equation*}
                where $F(A\times B)$ is the free $R$-module generated by the cartesian product, and $G$ is the $R$-module generated by the relations
                \begin{enumerate}
                    \item $(a,b)+(a',b)\sim(a+a',b)$;
                    \item $(a,b)+(a,b')\sim(a,b+b')$;
                    \item $r(a,b)\sim (ar,b)\sim (a,rb)$.
                \end{enumerate}


            \subsubsection{Categorical}

                The bilinear map $\vartheta\colon A\times B\to A\otimes_R B$ given by $\vartheta\colon(a,b)\mapsto a\otimes_R b$ is such that any other \emph{bilinear} map $A\times B\to W$ for any $W$ uniquely factors through $\vartheta$.

        \subsection{Properties}

            We write $\otimes$ to mean $\otimes_R$, and we write $\coprod$ instead of the more common $\oplus$ to avoid notational similarities.
            We write $M,N,P$ to mean arbitrary $R$-modules, and $I,J$ to mean ideals of $R$.

            \begin{itemize}
                \item $R\otimes M\cong M$
                \item $M\otimes (N\otimes P) \cong  (M\otimes N)\otimes P$
                \item $M\otimes N \cong  N\otimes M$
                \bigskip
                \item $M\otimes\prod_{i\cong 1}^n N_i \cong  \prod_{i\cong 1}^n M\otimes N_i$
                \item (so in particular $M\otimes R^n \cong  M^n$)
                \bigskip
                \item $(-\otimes M)\dashv\Hom(M,-)$
                \item (so tensoring is \emph{right exact} and thus \emph{commutes with colimits})
                \item (so in particular $\left(\coprod_{i\in I} N_i\right)\otimes M \cong  \coprod_{i\in I} (N_i\otimes M)$)
                \bigskip
                \item $R/I\otimes M \cong  M/IM$
                \item if $M$ is flat then $I\otimes M\cong IM$
                \item $(M/IM)\otimes_{R/I}(N/IN) \cong  M\otimes N\otimes R/I$
                \item $R/I\otimes R/J \cong  R/(I+J)$
            \end{itemize}


        \subsection{Abelian groups ($R=\mathbb{Z}$)}

            We write $A$ to mean an arbitrary abelian group.

            \begin{enumerate}
                \item $A\otimes\mathbb{Z}/n\mathbb{Z}\cong A/mA$
                \item $\mathbb{Z}/m\mathbb{Z}\otimes\mathbb{Z}/n\mathbb{Z}\cong\mathbb{Z}/\mathrm{gcd}(m,n)\mathbb{Z}$
                \item $\mathbb{Q}\otimes B\cong\mathbb{Q}\otimes(B/\mathrm{tors}(B))$
            \end{enumerate}
        
    \section{\protect\marginnote{\HA}[0pt]Projectives, injectives, flats, and frees}


        \subsection{Definitions}

            \begin{itemize}
                \item An object $P\in\Rmod$ is \textbf{projective} if $\Hom(P,\blank)$ is exact, or equivalently if for every morphism $P\to C$ and epimorphism $B\epi C$ there exists $P\to B$ such that the following diagram commutes:
                    \begin{equation*}
                        \begin{tikzcd}
                            P \ar[dotted]{d}[swap]{\exists} \ar{dr} & \\
                            B \ar[two heads]{r} & C
                        \end{tikzcd}
                    \end{equation*}
                    \emph{Note that we don't require uniqueness!}
                \item An object $I\in\Rmod$ is \textbf{injective} if $\Hom(\blank,I)$ is exact, or equivalently if for every morphism $A\to I$ and monomorphism $A\mono B$ there exists $B\to I$ such that the following diagram commutes:
                    \begin{equation*}
                        \begin{tikzcd}
                            A \ar[tail]{r} \ar{dr} & B \ar[dotted]{d}{\exists}\\
                            & I
                        \end{tikzcd}
                    \end{equation*}
                \item We say that $\Rmod$ \textbf{has enough projectives} if for every object $A\in\Rmod$ there exists a projective $P\in\Rmod$ with an epimorphism $P\epi A$.
                \item We say that $\Rmod$ \textbf{has enough injectives} if for every object $A\in\Rmod$ there exists an injective $I\in\Rmod$ with a monomorphism $A\mono I$.
                \item An object $F\in\Rmod$ is \textbf{flat} if $\blank\otimes_R F$ is exact, or equivalently if for every $A\mono B$ the corresponding map $A\otimes_R F\to B\otimes_R F$ is a monomorphism.
            \end{itemize}

        \subsection{Properties and equivalent definitions}

            \begin{enumerate}
                \item \emph{An $R$-module projective iff it's the direct summand of a free module.}
                \item \emph{Any free module is projective.}
                \item \emph{In $\Ab$ we have the following classifications:}
                    \begin{itemize}
                        \item \emph{projective modules are exactly the free modules;}
                        \item \emph{injective modules are exactly the divisible groups;}
                        \item \emph{flat modules are exactly the torsion-free groups.}
                    \end{itemize}
            \end{enumerate}

    \section{\protect\marginnote{\HA}[0pt]Resolutions}

        Let $M\in\Rmod$.

        \begin{itemize}
            \item A \textbf{projective} (respectively, \textbf{free}) \textbf{resolution of $M$} is a \emph{chain} complex $(P_\bullet,d_\bullet)$ such that
                \begin{itemize}
                    \item each $P_n$ is projective (respectively, free);
                    \item $P_n=0$ for $n\leqslant-1$;
                    \item $H_n(P_\bullet)=\delta_{n0}M$.
                \end{itemize}
            \item If we have enough projectives then we can construct the canonical free resolution as follows:
                \begin{equation*}
                    \begin{tikzcd}
                        & \ker \ar[tail]{d}  & \ker \ar[tail]{d} & \ker \ar[tail]{d} &\\
                        \ldots \ar[two heads]{ur} & F_2 \ar[two heads]{ur} & F_1 \ar[two heads]{ur} & F_0 \ar[two heads]{r} & M
                    \end{tikzcd}
                \end{equation*}
            \item An \textbf{injective resolution of $M$} is a \emph{cochain} complex $(I^\bullet,d^\bullet)$ such that
                \begin{itemize}
                    \item each $I_n$ is projective;
                    \item $I_n=0$ for $n\leqslant-1$;
                    \item $H^n(I^\bullet)=\delta_{n0}M$.
                \end{itemize}
            \item If we have enough injectives then we can construct the canonical injective resolution as follows:
                \begin{equation*}
                    \begin{tikzcd}
                        & \coker \ar[tail]{dr} & \coker \ar[tail]{dr} & \coker \ar[tail]{dr}\\
                        M \ar[tail]{r} & I_0 \ar[two heads]{u} & I_1 \ar[two heads]{u} & I_2 \ar[two heads]{u} & \ldots
                    \end{tikzcd}
                \end{equation*}
            \item Another way of thinking of a resolution is as a \textbf{quasi-isomorphism} i.e. a chain map that induces an isomorphism in homology.
                Then a \textbf{projective} (respectively, \textbf{flat}) \textbf{resolution} is a quasi-isomorphism $P_\bullet\to M[0]$ (respectively, $F_\bullet\to M[0]$), where $M[0]$ is the chain complex concentrated as $M$ in degree $0$.
                An \textbf{injective resolution} is a quasi-isomorphism $M[0]\to I^\bullet$.
                Diagrammatically, e.g. a projective resolution is an \emph{exact} sequence
                \begin{equation*}
                    \begin{tikzcd}
                        \ldots \rar & P_2 \rar & P_1 \rar & P_0 \ar[two heads]{d} &\\
                        & & & M \rar & 0
                    \end{tikzcd}
                \end{equation*}
        \end{itemize}

    \section{\protect\marginnote{\HA~\AT}[0pt]Computing $\mathrm{Tor}$ and $\mathrm{Ext}$}

        \subsection{Definitions}

            \emph{We assume that $R$ is a commutative ring (with unity).}

            Let $M,N\in R\hbox{-}\mathsf{mod}$ with projective resolutions
            $P_\bullet\twoheadrightarrow M$ and $Q_\bullet\twoheadrightarrow N$,
            and injective resolution $N\hookrightarrow J^\bullet$. We make the
            following definitions.

            \begin{align*}
                \mathrm{Tor}_n^R(M,N)&=
                \begin{cases}
                    H_n(P_\bullet\otimes N)\\
                    H_n(M\otimes Q_\bullet)
                \end{cases}\qquad\qquad
                \mathrm{Tor}_\bullet^R(M,N)=\bigoplus_{n\geqslant0}\mathrm{Tor}_n^R(M,N)\\[2em]
                \mathrm{Ext}_R^n(M,N)&=
                \begin{cases}
                    H^n(\mathrm{Hom}(P_\bullet,N))\\
                    H^n(\mathrm{Hom}(M,J^\bullet))
                \end{cases}\qquad
                \mathrm{Ext}_R^\bullet(M,N)=\bigoplus_{n\geqslant0}\mathrm{Ext}_R^n(M,N)
            \end{align*}

            \textbf{Don't get confused by degrees:} We follow the convention of
            writing \emph{chain} complexes (the differential \emph{decreases}
            degree) as $\ldots\to\ldots$ and \emph{cochain} (the differential
            \emph{increases} degree) as $\ldots\leftarrow\ldots$, so that the
            degrees line up if we write one below the other. Remember that
            $\mathrm{Hom}(-,B)$ is \emph{contravariant} and $\mathrm{Hom}(A,-)$
            is \emph{covariant}, and so both $\mathrm{Hom}(C_\bullet, B)$ and
            $\mathrm{Hom}(A,D^\bullet)$ will be \emph{cochain} complexes:

            \begin{equation*}
                \begin{array}{ccccccccc}
                    \ldots & \to & C_2 & \to & C_1 & \to & C_0 & \to & 0\\
                    \ldots & \leftarrow & \mathrm{Hom}(C_2,B) & \leftarrow & \mathrm{Hom}(C_1,B) & \leftarrow & \mathrm{Hom}(C_0,B) & \leftarrow & 0\\[1em]
                    \ldots & \leftarrow & D_2 & \leftarrow & D_1 & \leftarrow & D_0 & \leftarrow & 0\\
                    \ldots & \leftarrow & \mathrm{Hom}(A,D_2) & \leftarrow & \mathrm{Hom}(A,D_1) & \leftarrow & \mathrm{Hom}(A,D_0) & \leftarrow & 0\\
                \end{array}
            \end{equation*}

        \subsection{Useful facts}

            \emph{Note that $\mathrm{Tor}_0(M,N)\cong M\otimes N$ and
            $\mathrm{Ext}^0(M,N)\cong\mathrm{Hom}(M,N)$, so we are usually only
            interested in $\mathrm{Tor}_n$ and $\mathrm{Ext}^n$ for
            $n\geqslant1$.}

            \begin{itemize}
            \item
              $M$ is projective $\implies$ $\mathrm{Ext}^n(M,-)=0$ for
              $n\geqslant1$
            \item
              $M$ is projective $\iff$ $\mathrm{Ext}^1(M,-)=0$\bigskip
            \item
              $N$ is injective $\implies$ $\mathrm{Ext}^n(-,N)=0$ for
              $n\geqslant1$
            \item
              $N$ is injective $\iff$ $\mathrm{Ext}^1(-,N)=0$\bigskip
            \item
              $M$ is flat $\implies$ $\mathrm{Tor_\bullet(M,N)}=0$
            \item
              $M$ is flat $\iff$ $\mathrm{Tor}_1(M,-)=0$\bigskip
            \item
              $\mathrm{Tor}_n(\mathrm{colim}_\alpha M_\alpha,N)\cong\mathrm{colim}_\alpha\mathrm{Tor}_n(M_\alpha,N)$
            \item
              $\mathrm{Tor}_n(M,N)\cong\mathrm{Tor}_n(N,M)$
            \item
              $\mathrm{Ext}^n(\mathrm{colim}_\alpha M_\alpha, N)\cong\lim_\alpha\mathrm{Ext}^n(M_\alpha,N)$
            \item
              $\mathrm{Ext}^n(M,\lim_\beta N_\beta)\cong\lim_\beta\mathrm{Ext}(M,N_\beta)$
            \end{itemize}

        \subsection{Dimension shifting}

            \subsubsection{Tor}

                Let $X,Y\in\Rmod$.
                Suppose that
                \begin{equation*}
                    0\to Y\to P_k\to P_{k-1}\to\ldots\to P_0\to X\to0
                \end{equation*}
                is an \emph{exact sequence} in $\Rmod$, with each $P_i$ \emph{projective}.
                \emph{Then for any $N\in\Rmod$ there is a canonical isomorphism}
                \begin{equation*}
                    \Tor_n^R(X,N)\cong\Tor_{n-k-1}^R(Y,N).
                \end{equation*}

            \subsubsection{Ext}

                Let $X,Y\in\Rmod$.
                \begin{enumerate}
                    \item Suppose that
                        \begin{equation*}
                            0\leftarrow Y\leftarrow I^k\leftarrow I^{k-1}\leftarrow\ldots\leftarrow I^0\leftarrow X\leftarrow0
                        \end{equation*}
                        is an \emph{exact} sequence in $\Rmod$, with each $I^i$ \emph{injective}.
                        \emph{Then for any $M\in\Rmod$ there is a canonical isomorphism}
                        \begin{equation*}
                            \Ext_R^n(M,X)\cong\Ext_R^{n+k+1}(M,Y).
                        \end{equation*}
                    \item Suppose that
                        \begin{equation*}
                            0\to Y\to P_k\to P_{k-1}\to\ldots\to P_0\to X\to0
                        \end{equation*}
                        is an \emph{exact sequence} in $\Rmod$, with each $P_i$ \emph{projective}.
                        \emph{Then for any $N\in\Rmod$ there is a canonical isomorphism}
                        \begin{equation*}
                            \Ext_R^n(X,N)\cong\Ext_R^{n+k+1}(Y,N).
                        \end{equation*}
                \end{enumerate}

                \fbox{\emph{Check the above statements.}}

        \subsection{Long exact sequences}

            Let $0\to A\to B\to C\to0$ be a short exact sequence in $\Rmod$, and $N$ some arbitrary object in $\Rmod$.
            Then $\Tor$ and $\Ext$ give rise to the following long exact sequences:
            \begin{enumerate}
                \item \textbf{Tor(--, N):} \emph{Recall that $\Tor_0^R(M,N)\cong M\otimes_R N$.}
                    \begin{equation*}
                        \begin{tikzcd}[%
                            ,row sep = 1.5em
                            ,/tikz/column 1/.append style={anchor=base west}
                            ,/tikz/column 2/.append style={anchor=base}
                            ,/tikz/column 3/.append style={anchor=base east}
                            ]
                            & \ar[draw=none]{d}[name=W, anchor=center]{} & \cdots \ar[rounded corners,
                                    to path={ -- ([xshift=2ex]\tikztostart.east)
                                              |- (W.center) \tikztonodes
                                              -| ([xshift=-2ex]\tikztotarget.west)
                                              -- (\tikztotarget)}]{dll}\\
                            \Tor_n^R(A,N) \rar
                            & \Tor_n^R(B,N) \rar \ar[draw=none]{d}[name=X, anchor=center]{}
                            & \Tor_n^R(C,N) \ar[rounded corners,
                                    to path={ -- ([xshift=2ex]\tikztostart.east)
                                              |- (X.center) \tikztonodes
                                              -| ([xshift=-2ex]\tikztotarget.west)
                                              -- (\tikztotarget)}]{dll}\\
                            \Tor_{n-1}^R(A,N) \rar
                            & \Tor_{n-1}^R(B,N) \rar
                            & \Tor_{n-1}^R(C,N) \ar[rounded corners,
                                    to path={ -- ([xshift=2ex]\tikztostart.east)
                                              |- ([xshift=2ex]\tikztotarget.east)
                                              -- (\tikztotarget)}]{d}\\
                            \cdots \ar[rounded corners,
                                    to path={ -- ([xshift=-2ex]\tikztostart.west)
                                              |- ([xshift=-2ex]\tikztotarget.west)
                                              -- (\tikztotarget)}]{d}
                            & \cdots
                            & \cdots\\
                            A\otimes_R N \rar
                            & B\otimes_R N \rar
                            & C \otimes_R N
                        \end{tikzcd}
                        \raisebox{-2.3cm}{\hspace{-.4cm}$\xrightarrow{\makebox[1cm]{}}0$}
                    \end{equation*}
                \item \textbf{Ext(--, N):} \emph{Recall that $\Ext_R^0(M,N)\cong\Hom_{\Rmod}(M,N)$.}
                    \begin{equation*}
                        \begin{tikzcd}[%
                            ,row sep = 1.5em
                            ,/tikz/column 1/.append style={anchor=base west}
                            ,/tikz/column 2/.append style={anchor=base}
                            ,/tikz/column 3/.append style={anchor=base east}
                            ]
                            & \ar[draw=none]{d}[name=W, anchor=center]{} & \cdots\\
                            \Ext_R^{n+1}(A,N) \ar[rounded corners,
                                    to path={ -- ([xshift=-2ex]\tikztostart.west)
                                              |- (W.center) \tikztonodes
                                              -| ([xshift=2ex]\tikztotarget.east)
                                              -- (\tikztotarget)}]{urr}
                            & \Ext_R^{n+1}(B,N) \lar \ar[draw=none]{d}[name=X, anchor=center]{}
                            & \Ext_R^{n+1}(C,N) \lar\\
                            \Ext_R^n(A,N) \ar[rounded corners,
                                    to path={ -- ([xshift=-2ex]\tikztostart.west)
                                              |- (X.center) \tikztonodes
                                              -| ([xshift=2ex]\tikztotarget.east)
                                              -- (\tikztotarget)}]{urr}
                            & \Ext_R^n(B,N) \lar \ar[draw=none]{d}[name=Y, anchor=center]{}
                            & \Ext_R^n(C,N) \lar\\
                            \cdots
                            & \cdots
                            & \cdots \ar[rounded corners,
                                    to path={ -- ([xshift=2ex]\tikztostart.east)
                                              -| ([xshift=2ex]\tikztotarget.east)
                                              -- (\tikztotarget)}]{u}\\
                            \Hom(A,N) \ar[rounded corners,
                                    to path={ -- ([xshift=-2ex]\tikztostart.west)
                                              -| ([xshift=-2ex]\tikztotarget.west)
                                              -- (\tikztotarget)}]{u}
                            & \Hom(B,N) \lar
                            & \Hom(C,N) \lar
                        \end{tikzcd}
                        \raisebox{-2.25cm}{\hspace{-.4cm}$\xleftarrow{\makebox[1cm]{}}0$}
                    \end{equation*}
                    \item \emph{The same sequence for} \textbf{Ext(M, --)} \emph{also holds.}
            \end{enumerate}
            
        \subsection{Abelian groups ($R=\mathbb{Z}$)}

            \emph{Recall that, when $R=\mathbb{Z}$, projective = free, injective =
            divisible, and flat = torsion-free.} \emph{We write $\mathrm{tors}(A)$
            to mean the torsion subgroup of $A$.}

            \bigskip

            \textbf{Claim:} \emph{$\mathbb{Z}$ and $\mathbb{Q}$ are flat
            $\mathbb{Z}$-modules.}

            \textbf{Proof:} They are both torsion-free.

            \subsubsection{Examples of
                $\mathrm{Tor}_n^\mathbb{Z}(A,B)$}\label{sssec:examples-of-tor-ab}

                \textbf{Claim:} \emph{$\mathrm{Tor}_n^\mathbb{Z}(A,B)=0$ for any
                abelian groups $A,B$ when $n\geqslant2$.}

                \textbf{Proof:} Take the generators of $A$ and consider the free
                abelian group $F$ that they generate. Then we have the epimorphism
                $F\twoheadrightarrow A$ with kernel $K\subset F$. Since any subgroup
                of a free abelian group is free ($\mathbb{Z}$ is a PID) we have the
                short exact sequence \[0\to K\hookrightarrow F\twoheadrightarrow A\to0\]
                with $K,F$ both free, and thus projective, and so this is a projective
                resolution of $A$ that is zero in degree $n$ for $n\geqslant2$.
                This means that it will also have zero homology in degree $n$ for
                $n\geqslant2$.

                Let $A$ be an arbitrary abelian group.

                \begin{enumerate}
                \def\labelenumi{\arabic{enumi}.}
                \item
                  $\mathrm{Tor}_1^\mathbb{Z}(A,\mathbb{Z})=0$

                  \emph{Use that $\mathbb{Z}$ is flat.}
                \item
                  $\mathrm{Tor}_1^\mathbb{Z}(A,\mathbb{Q})=0$

                  \emph{Use that $\mathbb{Q}$ is flat.}
                \item
                  $\mathrm{Tor}_1^\mathbb{Z}(A,\mathbb{Z}/m\mathbb{Z})\cong\{a\in A\mid ma=0\}$

                  \emph{Use the projective resolution
                  $(0\to\mathbb{Z}\xrightarrow{\cdot m}\mathbb{Z})$ for
                  $\mathbb{Z}/m\mathbb{Z}$.} \emph{Since
                  $(-\otimes\mathbb{Z})\cong\mathrm{id}$ we obtain the sequence
                  $(0\to A\xrightarrow{\cdot m}A\to0)$, which has homology}
                  \[\ker(A\xrightarrow{\cdot m}A)=\{a\in A\mid ma=0\}\] \emph{in degree
                  $1$, as claimed.}
                \item
                  $\mathrm{Tor}_1^\mathbb{Z}(A,\mathbb{Q}/\mathbb{Z})\cong\mathrm{tors}(A)$

                  \emph{Use the projective resolution
                  $(0\to\mathbb{Z}\xrightarrow{\iota}\mathbb{Q})$ for
                  $\mathbb{Q}/\mathbb{Z}$.} \emph{Then applying $(A\otimes-)$ gives}
                  \[0\to A\xrightarrow{\iota}A\otimes\mathbb{Q}\to0.\] \emph{If $A$ is
                  torsion then $A\otimes\mathbb{Q}=0$, and so the homology in degree
                  $1$ is $A=\mathrm{tors}(A)$.} \emph{If $A$ is torsion-free then
                  $A\hookrightarrow A\otimes\mathbb{Q}$, and so the homology in degree
                  $1$ is $0=\mathrm{tors}(A)$.} \emph{Generally, we see that
                  $\ker(A\xrightarrow{\iota}A\otimes\mathbb{Q})\cong\mathrm{tors}(A)$.}
                \end{enumerate}

                \fbox{\emph{Compute some examples using $\mathbb{Z}[p^{-1}]$, $\mathbb{Z}/p^\infty$, and $\hat{\mathbb{Z}}$.}}


            \subsubsection{Examples of $\mathrm{Ext}_\mathbb{Z}^n(A,B)$}

                \textbf{Claim:} \emph{$\mathrm{Ext}_\mathbb{Z}^n(A,B)=0$ for any
                abelian groups $A,B$ when $n\geqslant2$.}

                \textbf{Proof:} Similar to the equivalent statement for
                $\mathrm{Tor}$, noting that the quotient of a divisible group is
                divisible.

                Let $A,B$ be arbitrary abelian groups.

                \begin{enumerate}
                \def\labelenumi{\arabic{enumi}.}
                \item
                  $\mathrm{Ext}_\mathbb{Z}^1(\mathbb{Z},B)=0$

                  \emph{Use the fact that $\mathbb{Z}$ is projective.}
                \item
                  $\mathrm{Ext}_\mathbb{Z}^1(A,\mathbb{Q})=0$

                  \emph{Use the fact that $\mathbb{Q}$ is injective.}
                \item
                  $\mathrm{Ext}_\mathbb{Z}^1(\mathbb{Z}/m\mathbb{Z},B)\cong B/mB$

                  \emph{Use the standard projective resolution
                  $(0\to\mathbb{Z}\xrightarrow{\cdot m}\mathbb{Z})$ of
                  $\mathbb{Z}/m\mathbb{Z}$.} \emph{Then, applying
                  $\mathrm{Hom}(-,B)$ (which is }contravariant\emph{) we obtain the
                  cochain complex}
                  \[0\leftarrow\mathrm{Hom}(\mathbb{Z},B)\xleftarrow{-\circ(\cdot m)}\mathrm{Hom}(\mathbb{Z},B)\leftarrow0.\]
                  \emph{But $\mathrm{Hom}(\mathbb{Z},B)\cong B$ for any abelian group
                  $B$, and the induced map $\xleftarrow{\cdot m}$ is still
                  multiplication by $m$.} \emph{Thus the homology in degree $1$ is}
                  \[\frac{\ker(0\leftarrow B)}{\mathrm{im}(B\xleftarrow{\cdot m}B)} \cong \frac{B}{mB}\]
                  \emph{as claimed.}
                \end{enumerate}

                \fbox{\emph{Can you compute $\mathrm{Ext}_\mathbb{Z}^1(A,\mathbb{Z}/m\mathbb{Z})$?}}

                \fbox{\emph{Show that $\mathrm{Ext}_\mathbb{Z}^1(\mathbb{Q},\mathbb{Z})\cong(\hat{\mathbb{Z}}\otimes_\mathbb{Z}\mathbb{Q})/\mathbb{Q}$. See \cref{sssec:examples-of-co-limits}.}}

        \subsection{Modules over polynomial rings in one variable
            ($R=k[x]$)}

            \emph{Recall that, in any $R\hbox{-}\mathsf{mod}$, projective = direct
            summand of free, and that $R$ is always a flat $R$-module.}

            \medskip
            
            \fbox{\emph{Prove that $k[x,x^{-1}]$ is a flat $k[x]$-module by constructing it as a colimit.}}

            \subsubsection{Examples of
                $\mathrm{Tor}_n^{k[x]}(M,N)$}

                These examples mirror those of abelian groups in \cref{sssec:examples-of-tor-ab}.

                Let $M$ be an arbitrary $k[x]$-module.

                \begin{enumerate}
                \def\labelenumi{\arabic{enumi}.}
                \item
                  $\mathrm{Tor}_n^{k[x]}(M,k[x])=0$

                  \emph{Use that $k[x]$ is flat.}
                \item
                  $\mathrm{Tor}_n^{k[x]}(M,k[x,x^{-1}])=0$

                  \emph{Use that $k[x,x^{-1}]$ is flat.}
                \end{enumerate}

                \fbox{%
                    \parbox{\textwidth}{%
                        \emph{Calculate the following modules:}
                        \begin{enumerate}
                            \item
                              $\mathrm{Tor}_n^{k[x]}\left(\frac{k[x]}{(x^m)},\frac{k[x]}{(x^n)}\right)$
                            \item
                              $\mathrm{Tor}_n^{k[x]}\left(\frac{k[x,x^{-1}]}{k[x]},\frac{k[x,x^{-1}]}{k[x]}\right)$
                            \item
                              $\mathrm{Tor}_n^{k[x]}\left(\frac{k[x]}{(x^m)},\frac{k[x,x^{-1}]}{k[x]}\right)$
                            \item $\mathrm{Tor}_n^{k[x]}(k,k)$
                        \end{enumerate}
                    }
                }

            \subsubsection{Examples of
                $\mathrm{Ext}_{k[x]}^n(M,N)$}

                \fbox{Compute some examples.}

        \subsection{Modules over $R=k[x]/(x^n)$ and
            $R=k[x,y]$}

            \fbox{%
                \parbox{\textwidth}{%
                    \emph{Calculate the following modules:}
                    \begin{enumerate}
                        \item $\mathrm{Tor}_n^{k[x]}(k,k)$
                        \item $\mathrm{Tor}_n^{k[x]/(x^2)}(k,k)$
                        \item $\mathrm{Tor}_n^{k[x]/(x^3)}(k,k)$
                        \item $\mathrm{Tor}_n^{k[x]/(x^n)}(k,k)$
                        \item $\mathrm{Tor}_n^{k[x,y]}(k,k)$
                        \item $\mathrm{Tor}_n^{k[x,y]}(k[x,y]/(x,y),k[x,y]/(x-a,y-b))$
                    \end{enumerate}
                }
            }

        \subsection{Other examples}

            \fbox{\parbox{\textwidth}{\emph{Let $p$ be a prime and $G=\langle\omega\mid\omega^p=1\rangle$ the cyclic group of order $p$. Define the $k[G]$-module $S=k[\langle 1+\mu+\ldots+\mu^{p-1}\rangle]$. Find $\mathrm{Ext}^n_{k[G]}(S,S)$.}}}

    \section{\protect\marginnote{\HA~\AT}[0pt]Working in abelian categories}

        \subsection{Kernels and cokernels}

            See \cref{tb:kernels-and-cokernels-in-abelian-category}.

            \begin{table}[!ht]
                \centering
                \begin{tabular}{rll}
                    & Statement & Motto\\[.2em]
                    \toprule
                    \multirow{2}{*}{1.}&$\ker\Coker(A\mono B)\cong A\mono B$ & monos are their own image\\
                    &$\coker\Ker(A\epi B)\cong A\epi B$ & epis are their own coimage\\[.4em]
                    \multirow{2}{*}{2.}&$\Ker(A\to B)\mono A$ & kernels are mono\\
                    &$B\epi\Coker(A\to B)$ & cokers are epi\\[.4em]
                    \multirow{2}{*}{3.}&$\Im(A\to B)\mono B$ & images are mono into target\\
                    &$A\epi\Coim(A\to B)$ & sources are epi onto coimages\\[.4em]
                    \multirow{2}{*}{4.}&$\Im(A\to B)\cong B\iff\Coker(A\to B)=0$ & target is image iff trivial cokernel\\
                    &$\Coim(A\to B)\cong A\iff\Ker(A\to B)=0$ & source is coimage iff trivial kernel\\[.4em]
                    \multirow{2}{*}{5.}&$A\epi B\iff \Im(A\to B)\cong B$ & epi iff target is image\\
                    &$A\mono B\iff \Ker(A\to B)=0$ & mono iff kernel is trivial\\[1em]
                    \multirow{3}{*}{6.}&$A\epi(\Im A\to B)$ & \multirow{3}{*}{$A\xrightarrow{f}B$ factors uniquely as $A\epi\Im f\mono B$}\\
                    &$\Coim(A\to B)\mono B$ & \\[.4em]
                    &$\Im(A\to B)\cong\Coim(A\to B)$ &
                \end{tabular}
                \caption{Let $\ccat$ be an abelian category, $A,B\in\ccat$ arbitrary objects, and $f\colon A\to B$ an arbitrary morphism.}\label{tb:kernels-and-cokernels-in-abelian-category}
            \end{table}

        \subsection{Homology}

            Let $\ccat$ be an arbitrary category, and $A\xrightarrow{f}B\xrightarrow{g}C$ in $\ccat$ such that $g\circ f=0$.
            Then there exist $i,p$ such that the following diagram commutes:
            \begin{equation*}
                \begin{tikzcd}
                    & \Im f \dar[tail,swap]{i} \ar[bend left=30]{dr}{h=g\circ i} &\\
                    A \rar{f} & B \rar{g} \dar[two heads,swap]{p} & C\\
                    & \Coker f \ar[bend right=30]{ur} &
                \end{tikzcd}
            \end{equation*}

            Commutativity implies that $p\circ i=0$, thus $h=0$.
            So there exists a unique \mbox{$\varphi\colon\Im f\to\Ker g$.}

            \medskip
            
            Define the \textbf{homology at $B$} as $\Coker\varphi$.

        \subsection{Zig-zag lemma}

            Let $\ccat$ be an abelian category and $(0\to A_\bullet\to B_\bullet\to C_\bullet\to0)$ a chain complex of short exact sequences.
            That is, the following diagram \emph{commutes}, has \emph{exact rows}, and the \emph{columns are chain complexes}:
            \begin{equation*}
                \begin{tikzcd}
                    & \vdots \dar & \vdots \dar & \vdots \dar &\\
                    0 \rar & A_{n} \rar[tail]{f_{n}} \dar{\alpha_{n}} & B_{n} \rar[two heads]{g_{n}} \dar{\beta_{n}} & C_{n} \rar \dar{\gamma_{n}} & 0\\
                    0 \rar & A_{n-1} \rar[tail]{f_{n-1}} \dar & B_{n-1} \rar[two heads]{g_{n-1}} \dar & C_{n-1} \rar \dar & 0\\
                    & \vdots & \vdots & \vdots &
                \end{tikzcd}
            \end{equation*}
            \emph{Then for all $n$ there exists $d_n\colon H_n(C_\bullet)\to H_{n-1}(A_\bullet)$ such that the following \mbox{sequence is exact:}}
            \begin{equation*}
                \begin{tikzcd}
                    \ldots\to{H}_n(A_\bullet) \rar{f_*}
                    & {H}_n(B_\bullet) \rar{g_*} \ar[draw=none]{d}[name=X, anchor=center]{}
                    & {H}_n(C_\bullet) \ar[rounded corners,
                            to path={ -- ([xshift=2ex]\tikztostart.east)
                                      |- (X.center) \tikztonodes
                                      -| ([xshift=-2ex]\tikztotarget.west)
                                      -- (\tikztotarget)}]{dll}[description, at end]{d_n} \\
                    {H}_{n-1}(A_\bullet) \rar{f_*}
                    & {H}_{n-1}(B_\bullet) \rar{g_*}
                    & {H}_{n-1}(C_\bullet)\to\ldots
                \end{tikzcd}
            \end{equation*}

        \subsection{Five lemma}

            Let $\ccat$ be an abelian category.
            Assume that the following diagram \emph{commutes} and has \emph{exact rows}:
            \begin{equation*}
                \begin{tikzcd}
                    A \rar \dar[two heads]{\alpha} & B \rar \dar[two heads, tail]{\beta} & C \rar \dar{\gamma} & D \rar \dar[two heads, tail]{\delta} & E \dar[tail]{\varepsilon}\\
                    A' \rar & B' \rar & C' \rar & D' \rar & E'
                \end{tikzcd}
            \end{equation*}
            (i.e. $\beta$ and $\delta$ are isomorphisms, $\alpha$ is an epimorphism, and $\varepsilon$ is a monomorphism)

            \medskip

            \emph{Then $\gamma$ is an isomorphism.}

        \subsection{Snake lemma}

            Let $\ccat$ be an abelian category.
            Assume that the following diagram \emph{commutes} and has \emph{exact rows}:
            \begin{equation*}
                \begin{tikzcd}
                    & A \rar \dar{\alpha} & B \rar \dar{\beta} & C \rar \dar{\gamma} & 0\\
                    0 \rar & A' \rar & B' \rar & C' &
                \end{tikzcd}
            \end{equation*}

            \emph{Then there exists $d\colon\Ker\gamma\to\Coker\alpha$ such that the following sequence is exact:}
            \begin{equation*}
                \Ker\alpha\to\Ker\beta\to\Ker\gamma\xrightarrow{d}\Coker\alpha\to\Coker\beta\to\Coker\gamma.
            \end{equation*}


    \clearpage
    \addtocontents{toc}{\protect\addvspace{20pt}\hrule\protect\addvspace{10pt}}

    \section{\protect\marginnote{\AT}[0pt]Retracts}

        \textbf{Retraction:} A \emph{retraction of $X$ onto $A\subseteq X$} is a (continuous) map $r\colon X\to A$ such that $r|_A=\mathrm{id}_A$.

        \smallskip

        \textbf{Deformation retract:} A \emph{deformation retract of $X$ onto $A\subseteq X$} is a (continuous) family of maps $\left\{r_t\colon X\to X\mid t\in[0,1]\right\}$ such that $r_0=\mathrm{id}_X$, $r_1(X)=A$, and $r_t|_A=\mathrm{id}_A$ for all $t$.
        That is, it is a homotopy from the identity on $X$ to a retract of $X$ onto $A$.

        \smallskip

        For example, every space $X$ has a \emph{retract} onto any point $x\in X$, but there is a \emph{deformation retract} only if (not if and only if) $X$ is path-connected.

    \section{\protect\marginnote{\AT}[0pt]Homology}

        \subsection{Simplicial and singular}

            \subsubsection{Delta (and simplicial) complexes}

                \begin{itemize}
                    \item The \textbf{standard $n$-simplex} is $\Delta^n=\{(x_0,\ldots,x_n)\in\rr^{n+1} \mid x_i\geqslant0\text{ and }\sum_i x_i=1\}$.
                    \item A \textbf{face} of a simplex with vertices $[x_0,\ldots,x_n]$ is any $[x_0,\ldots,\remove{x_i},\ldots,x_n]$.
                \end{itemize}

                Note that the vertices of any subsimplex are ordered \emph{according to their order in the simplex that contains them}.

                \begin{itemize}
                    \item The \textbf{boundary $\partial\Delta^n$} of an $n$-simplex is the union of all of the faces of $\Delta^n$.
                    \item The \textbf{open simplex $\interior{\Delta}^n$} is the interior of $\Delta^n$, i.e. $\Delta^n\setminus\partial\Delta^n$.
                    \item A \textbf{delta-complex structure on a space $X$} is a collection of maps $\sigma_\alpha\colon\Delta^{n(\alpha)}\to X$ such that
                        \begin{enumerate}
                            \item $\sigma_\alpha|_{\interior{\Delta}^n}$ is injective;
                            \item each point $x\in X$ is in the image of exactly one $\sigma_\alpha|_{\interior{\Delta}^n}$;
                            \item for each face $f$ of $\Delta^n$, the restriction $\sigma_\alpha|_f$ is one of the maps $\sigma_\beta\colon\Delta^{n-1}\to X$,
                        \end{enumerate}
                        and we define a topology by saying that $A\subset X$ is open iff $\sigma_\alpha^{-1}(A)$ is open in $\Delta^n$ for all $\sigma_\alpha$.
                    \item A \textbf{simplicial complex} is a delta complex whose simplices are \emph{uniquely determined by their vertices}.
                \end{itemize}

            \subsubsection{Simplicial homology}

                Let $X$ be a $\Delta$-complex.

                \begin{itemize}
                    \item The \textbf{group of simplicial $n$-chains $\Delta_n(X)$} of $X$ is the free abelian group on the set of open $n$-simplices $e_\alpha^n$ of $X$.
                    \item The \textbf{characteristic map} of an open $n$-simplex $e_\alpha^n$ is the $\sigma_\alpha$ such that $\sigma_\alpha(\interior{\Delta}^n)=e_\alpha^n$.
                    \item We can write $n$-chains as either $\sum_\alpha n_\alpha e_\alpha^n$ or $\sum_\alpha n_\alpha \sigma_\alpha$ for $n_\alpha\in\nn$, where $\sigma_\alpha$ is the characteristic map of $e_\alpha^n$.
                    \item The \textbf{$n$th simplicial boundary map $\partial_n\colon\Delta_n(X)\to\Delta_{n-1}(X)$} is the homomorphism defined by $\partial_n(\sigma_\alpha)=\sum_i(-1)^i\sigma_\alpha|_{[x_0,\ldots,\remove{x_i},\ldots,x_n]}$.
                    \item The elements of $\ker\partial_n$ are called \textbf{$n$-cycles} and the elements of $\im\partial_{n+1}$ are called \textbf{$n$-boundaries}.
                    \item The \textbf{$n$th simplicial homology group $H_n^\Delta(X)$} of $X$ is the $n$th homology of the chain complex $(\partial_\bullet(X),\partial_\bullet)$, i.e. $H_n^\Delta(X)=\ker(\partial_n)/\im(\partial_{n+1})$.
                \end{itemize}

            \subsubsection{Singular homology}

                \begin{itemize}
                    \item A \textbf{singular $n$-simplex} in a space $X$ is any (continuous) map $\sigma\colon\Delta^n\to X$.
                    \item The \textbf{group of singular $n$-chains $C_n(X)$} of $X$ is the free abelian group on the set of singular $n$-simplices of $X$.
                    \item The \textbf{$n$th singular homology group $H_n(X)$} of $X$ is the $n$th homology of the chain complex $(C_\bullet(X),\partial_\bullet)$, where $\partial_n\colon H_n(X)\to H_{n-1}(X)$ is the same as in the simplicial case.
                \end{itemize}

            \subsubsection{Reduced homology}

                If $X$ is a \emph{non-empty} space then the \textbf{$n$th reduced homology group $\reduced{H}_n(X)$} is the $n$th homology group of the augmented chain complex $C_\bullet(X)\xrightarrow{\varepsilon}\zz\to0$, where $\zz=C_{-1}(X)$ is in degree $-1$ and $\varepsilon\left(\sum_i n_i\sigma_i\right)=\sigma_i n_i$.

                \begin{itemize}
                    \item $H_0(X)\cong\reduced{H}_0(X)\oplus\zz$.
                    \item $H_n(X)\cong\reduced{H}_n(X)$ for $n\geqslant1$.
                \end{itemize}

        \subsection{Cellular}

            \subsubsection{CW complexes}

                \begin{itemize}
                    \item The \textbf{standard $n$-cell} is $D^n=\{x\in\rr^n : \|x\|<1\}$.
                    \item A \textbf{CW complex} (or \textbf{cell complex}) is a space constructed by the following inductive method:
                        \begin{enumerate}
                            \item Let $\{e_\alpha^n\}$ be a \emph{non-empty} collection of $n$-cells for $n=0,1,2,\ldots,k$ (where $k$ might be in $\nn$ or might be $\infty$).
                            \item Define $X^0=\{e_\alpha^0\}$.
                            \item Define the \textbf{$n$-skeleton $X^n$} by \mbox{$X^n=\big(X^{n-1}\sqcup_\alpha \overline{D_\alpha^n}\big)/\{x\sim\varphi_\alpha^n(x)\}$}, i.e. by attaching each $e_\alpha^n$ to $X^{n-1}$ via a map $\varphi_\alpha^n\colon S^{n-1}\to X^{n-1}$, where the map tells us how the boundary of the closed $n$-disc gets mapped into $X^{n-1}$.
                            \item If $k\in\nn$ then set $X=X^k$; if $k=\infty$ then set $X=\bigcup_n X^n$ and endow $X$ with the \textbf{weak topology}: $U\subset X$ is open iff $U\cap X^n$ is open for all $n$.
                        \end{enumerate}
                \end{itemize}

            \subsubsection{Cellular homology}

                \begin{itemize}
                    \item The \textbf{group of cellular $n$-chains} $C_n^\text{CW}(X)$ of $X$ is defined by $C_n^\text{CW}(X)=H_n(X^n,X^{n-1})$ and can be thought of as the free abelian group on the set of $n$-cells of $X$.
                    \item The \textbf{cellular boundary map} $\partial_n^\text{CW}\colon C_n^\text{CW}(X)\to C_{n-1}^\text{CW}(X)$ is induced by the long exact sequences for $(X^k,X^{k-1})$.
                    \item The \textbf{$n$th cellular homology group} $H_n^\text{CW}(X)$ of $X$ is the $n$th homology of the complex $(C_\bullet^\text{CW},\partial_\bullet^\text{CW})$.
                \end{itemize}

                \emph{There is a formula for the cellular boundary maps, constructed as follows.}
                Let $X$ be a CW complex, $e_\alpha^n$ an $n$-cell, and $e_\beta^{n-1}$ an $n-1$-cell.
                Introduce the following maps:
                \begin{itemize}
                    \item the attaching map $\varphi_\alpha^n$;
                    \item the quotient map $q^{n-1}\colon X^{n-1}\to X^{n-1}/X^{n-2}$;
                    \item the quotient map $q_\beta^{n-1}\colon X^{n-1}/X^{n-2}\to S_\beta^{n-1}$ that collapses $X^{n-1}\setminus \{e_\beta^{n-1}\}$ to a point;
                    \item the \textbf{attach-and-collapse map} $\chi^n_{\alpha\beta}\colon S_\alpha^{n-1}\to S_\beta^{n-1}$ given by $\chi^n_{\alpha\beta}=q_\beta^{n-1} q^{n-1}\varphi_\alpha^n$.
                \end{itemize}
                \emph{Then}
                \begin{enumerate}
                    \item $\partial_1^\text{CW}(e_\alpha^1)=\partial_1(e_\alpha^1)$;
                    \item $\partial_n^\text{CW}(e^n_\alpha)=\sum_\beta \left(\deg\chi^n_{\alpha\beta}\right) e^{n-1}_\beta$ for $n\geqslant2$.
                \end{enumerate}

            \subsubsection{Examples}

                \fbox{\emph{Find a CW-structure and then compute its homology for some common spaces, e.g. $\rr\mathbb{P}^2$ and $K$.}}

            \subsubsection{Moore spaces}

                Let $G$ be a \emph{finitely-generated} abelian group and $n\geqslant1$ an integer.

                \begin{itemize}
                    \item We define $M(\zz/m\zz,n)$ to be the CW complex given by attaching an $(n+1)$-cell to $S^n$ by a map of degree $m$.
                    \item We define the \textbf{Moore space} $M(G,n)$ as the CW complex $\bigvee_i M(G_i,n)\vee\bigvee_j S^n$, where $G_i$ are the torsion summands of $G$ and $j=1,\ldots,z$, where $z$ is the number of infinite cyclic summands of $G$.
                \end{itemize}

                \begin{enumerate}
                    \item $M(G,n)$ \emph{is simply-connected for $n\geqslant2$.}
                    \item $H_n(M(G,n))\cong G$ \emph{and} $\reduced{H}_i(M(G,n))=0$ \emph{for $i\neq n$.}
                \end{enumerate}

        \subsection{Interaction between types of homology}

            \emph{If $X$ is a delta complex then $H_n^\Delta(X)\cong H_n(X)$.}

            \emph{If $X$ is a CW complex then $H_n^\Delta(X)\cong H_n(X)\cong H_n^\text{CW}(X)$.}

            (The equivalent statements for relative homology are also true)

        \subsection{Homology and homotopy}

            \begin{itemize}
                \item A map $f\colon X\to Y$ induces a chain map $f_\bullet\colon C_\bullet(X)\to C_\bullet(Y)$ defined by composition, i.e. $f_n(\sigma)=f\sigma\colon\Delta^n\to Y$.
                \item A chain map $f_\bullet\colon C_\bullet(X)\to C_\bullet(Y)$ induces a homomorphism $f_*\colon H_\bullet(X)\to H_\bullet(Y)$, i.e. homomorphisms $(f_*)_n\colon H_n(X)\to H_n(Y)$ for all $n$.
                    If $f_*$ is an \emph{isomorphism} then we say that $f$ is a \textbf{quasi-isomorphism}.
            \end{itemize}

            \begin{enumerate}
                \item $(fg)_*=f_*g_*$
                \item $\id_*=\id$
                \item \emph{If $f,g\colon X\to Y$ are homotopic then $f_*=g_*$}
                \item \emph{If $f\colon X\to Y$ is a homotopy equivalence then $f_*$ is an isomorphism.}
                \item \emph{If $f_\bullet,g_\bullet\colon C_\bullet(X)\to C_\bullet(Y)$ are chain homotopic then $f_*=g_*$}
            \end{enumerate}

        \subsection{Relative}

            \subsubsection{Relative homology}

                Let $X$ be a space and $A\subset X$ a subspace.

                \begin{itemize}
                    \item The \textbf{group of relative $n$-cycles $C_n(X,A)$} is the quotient group $C_n(X)/C_n(A)$.
                    \item The \textbf{relative boundary map $\hat{\delta}_n\colon C_n(X,A)\to C_{n-1}(X,A)$} is the map induced by $\partial_n\colon C_n(X)\to C_{n-1}(X)$ (which is well-defined, since $\partial_n\colon C_n(A)\to C_{n-1}(A)$).
                    \item The \textbf{$n$th relative homology group $H_n(X,A)$} is the $n$th homology of the chain complex $(C_\bullet(X,A),\hat{\delta}_\bullet)$.
                \end{itemize}

                \emph{If $f,g\colon(X,A)\to(Y,B)$ are homotopic through maps of pairs $(X,A)\to(Y,B)$ then \mbox{$f_*=g_*\colon H_\bullet(X,A)\to H_\bullet(Y,B)$}.}

                \medskip

                \emph{For \emph{any} pair $(X,A)$ with inclusion maps $\iota\colon A\hookrightarrow X$ and \mbox{$\iota'\colon(X,\varnothing)\hookrightarrow(X,A)$} there is a long exact sequence}
                \begin{equation*}
                    \begin{tikzcd}
                        \ldots\to{H}_n(A) \rar{\iota_*}
                        & {H}_n(X) \rar{\iota'_*} \ar[draw=none]{d}[name=X, anchor=center]{}
                        & {H}_n(X,A) \ar[rounded corners,
                                to path={ -- ([xshift=2ex]\tikztostart.east)
                                          |- (X.center) \tikztonodes
                                          -| ([xshift=-2ex]\tikztotarget.west)
                                          -- (\tikztotarget)}]{dll}[description, at end]{\partial_n} \\
                        {H}_{n-1}(A) \rar{\iota_*}
                        & {H}_{n-1}(X) \rar{\iota'_*}
                        & {H}_{n-1}(X,A)\to\ldots
                    \end{tikzcd}
                \end{equation*}

            \subsubsection{Excision}

                \textbf{Excision theorem:} (can be phrased in either of the two following equivalent ways)
                \begin{enumerate}
                    \item \emph{Let $Z\subset A\subset X$ be such that $\closure{Z}\subset\interior{A}$.}
                        \emph{Then the inclusion $\iota\colon(X\setminus Z,A\setminus Z)\hookrightarrow(X,A)$ induces an isomorphism $\iota_*$ on homology groups, i.e. $H_n(X\setminus Z,A\setminus Z)\cong H_n(X,A)$.}
                    \item \emph{Let $A,B\subset X$ be such that $X\subset\interior{A}\cup\interior{B}$.}
                        \emph{Then the inclusion $\iota\colon(B,A\cap B)\hookrightarrow(X,A)$ induces an isomorphism $\iota_*$ on homology groups, i.e. $H_n(B,A\cap B)\cong H_n(X,A)$.}
                \end{enumerate}

                The \textbf{local homology groups of a space $X$ at a point $x$} are the groups $H_n(X,X\setminus\{x\})$, which (assuming that points are closed in $X$) excision tells us are isomorphic to the groups $H_n(U,U\setminus\{x\})$ for any open set $U$ containing $x$.

            \subsubsection{Good pairs}

                \begin{itemize}
                    \item A pair of spaces $(X,A)$, where $A\subset X$, is called a \textbf{good pair} if
                        \begin{enumerate}
                            \item $A$ is closed;
                            \item $A$ is non-empty;
                            \item $A$ is a deformation retract of some neighbourhood in $A$.
                        \end{enumerate}
                    \item \emph{If $X$ is a CW complex and $A$ a non-empty subcomplex then $(X,A)$ is a good pair.}
                    \item \emph{If $(X,A)$ is a good pair with inclusion map $\iota\colon A\hookrightarrow X$ and quotient map $\pi\colon X\twoheadrightarrow X/A$ then}
                        \begin{enumerate}
                            \item \emph{the induced quotient map $\hat{\pi}\colon(X,A)\to(X/A,A/A)$ induces an isomorphism $\hat{\pi}_*$ on homology groups, i.e. $H_n(X,A)\cong H_n(X/A,A/A)$;}
                            \item $H_n(X/A,A/A)\cong\reduced{H}_n(X/A)$.
                        \end{enumerate}
                        \emph{Thus the long exact sequence becomes}
                        \begin{equation*}
                            \begin{tikzcd}
                                \ldots\to\reduced{H}_n(A) \rar{\iota_*}
                                & \reduced{H}_n(X) \rar{\pi_*} \ar[draw=none]{d}[name=X, anchor=center]{}
                                & \reduced{H}_n(X/A) \ar[rounded corners,
                                        to path={ -- ([xshift=2ex]\tikztostart.east)
                                                  |- (X.center) \tikztonodes
                                                  -| ([xshift=-2ex]\tikztotarget.west)
                                                  -- (\tikztotarget)}]{dll}[description, at end]{\partial_n} \\
                                \reduced{H}_{n-1}(A) \rar{\iota_*}
                                & \reduced{H}_{n-1}(X) \rar{\pi_*}
                                & \reduced{H}_{n-1}(X/A)\to\ldots
                            \end{tikzcd}
                        \end{equation*}
                \end{itemize}

            \subsubsection{Examples}

                \fbox{%
                    \parbox{\textwidth}{%
                        \begin{enumerate}
                            \item \emph{Calculate $H_n(D^n,\delta D^n)$}
                            \item \emph{Do Example 2.23}
                            \item \emph{Prove the Brouwer fixed point theorem}
                            \item \emph{Prove Theorem 2.26}
                        \end{enumerate}
                    }
                }

        \subsection{Degree}

            \subsubsection{Degree and local degree}

            Note that $H_n(S^n)\cong\zz$ for $n\geqslant1$.
            Thus any map $f\colon S^n\to S^n$ induces a map $f_*\colon\zz\to\zz$ of the form $f_*(n)=d\cdot n$ for some $d\in\zz$ that depends only on $f$.
            We call this $d$ the \mbox{\textbf{degree of $f$}}.

            \begin{enumerate}
                \item $\deg\id=1$.
                \item \emph{If $f$ is not surjective then $\deg f=0$.}

                    Pick $x\in S^n\setminus f(S^n)$ and factor $f$ as $S^n\to S^n\setminus\{x\}\to S^n$.
                    Since $S^n\setminus\{x\}$ is contractible it has zero $n$th homology for $n\geqslant1$.
                    So $f$ factors through zero.

                \item \emph{If $f\simeq g$ then $\deg f=\deg g$ (the converse happens to be true as well, though for much less trivial reasons).}
                \item $\deg fg=\deg f\deg g$.
                \item \emph{If $f$ is a reflection of $S^n$ (i.e. fixes points in a subsphere $S^{n-1}$ and interchanges the two complementary hemispheres) then $\deg f=-1$.}
                \item \emph{The antipodal map $-\id\colon x\mapsto -x$ has degree $(-1)^{n+1}$.}

                    This follows from the fact that it is a composition of $n+1$ reflections, each of which flips the sign.

                \item \emph{If $f$ has no fixed points then $\deg f=(-1)^{n+1}$.}

                    Pick $x$ such that $f(x)\neq x$.
                    Then the line segment $(1-t)f(x)-tx$ from $f(x)$ to $-x$ doesn't pass through the origin.
                    Thus $f_t(x)=\frac{(1-t)f(x)-tx}{\|(1-t)f(x)-tx\|}$ defines a homotopy from $f$ to $-\id$.
            \end{enumerate}

            If $f\colon S^n\to S^n$ has the property that \emph{some} point $y\in S^n$ has finitely many preimages $x_1,\ldots,x_m$ then $(f_*)_n\colon H_n(U_i,U_i\setminus\{x_i\})\to H_n(V,V\setminus\{y\})$ can be thought of as $f_*\colon\zz\to\zz$ (by using excision on a neighbourhood $U_i$ of $x_i$ with $f(U_i)\subseteq V$ for some neighbourhood $V$ of $y$, and the long exact sequence of pairs), and so we can define the \mbox{\textbf{local degree $\deg f|_{x_i}$ of $f$ at $x_i$}} in the same way as we defined the degree.

            \begin{enumerate}
                \item $\deg f=\sum_i\deg f|_{x_i}$
                \item \emph{if $f$ maps each $U_i$ homeomorphically to $V$ then $\deg f|_{x_i}=\pm1$ for all $i$}.
            \end{enumerate}

            \subsubsection{Example}

                example 2.31

        \subsection{Mayer-Vietoris}

            \subsubsection{The derivation}

                Let $A,B\subset X$ be such that $X=\interior{A}\cup\interior{B}$.
                Define $C_n(A+B)\leqslant C_n(X)$ to be the subgroup consisting of $n$-chains that are sums of $n$-chains in $A$ and $n$-chains in $B$.
                It can be shown that $C_n(A+B)\cong C_n(X)$, and so $(C_\bullet(A+B),\partial_\bullet)$ is a chain complex.
                We then apply the zig-zag lemma to the complex of short exact sequences coming from
                \begin{equation*}
                    \begin{array}{rcccl}
                        0\to C_n(A\cap B) & \xrightarrow{\varphi} & C_n(A)\oplus C_n(B) & \xrightarrow{\psi} & C_n(A+B)\to0\\[.5em]
                        x & \mapsto & (x,-x) & &\\[.2em]
                        & & (y,z) & \mapsto & y+z.
                    \end{array}
                \end{equation*}

            \subsubsection{The sequence}

                \emph{If $A,B\subset X$ are such that $X=\interior{A}\cup\interior{B}$ then we have the long exact sequence}
                \begin{equation*}
                    \begin{tikzcd}
                        \ldots\to{H}_n(A\cap B) \rar{\Phi}
                        & {H}_n(A)\oplus{H}_n(B) \rar{\Psi} \ar[draw=none]{d}[name=X, anchor=center]{}
                        & {H}_n(X) \ar[rounded corners,
                                to path={ -- ([xshift=2ex]\tikztostart.east)
                                          |- (X.center) \tikztonodes
                                          -| ([xshift=-2ex]\tikztotarget.west)
                                          -- (\tikztotarget)}]{dll}[description, at end]{\partial_n} \\
                        {H}_{n-1}(A\cap B) \rar{\Phi}
                        & {H}_{n-1}(A)\oplus{H}_{n-1}(B) \rar{\Psi}
                        & {H}_{n-1}(X)\to\ldots
                    \end{tikzcd}
                \end{equation*}

            \subsubsection{The relative sequence}

                \emph{Let $Y\subset X$.}
                \emph{If we have subspaces $C\subset A\subset X$ and $D\subset B\subset X$ such that}
                    \begin{enumerate}
                        \item $X=\interior{A}\cup\interior{B}$
                        \item $Y=\interior{C}\cup\interior{D}$
                    \end{enumerate}
                \emph{then we have the long exact sequence}
                \begin{equation*}
                    \begin{tikzcd}
                        \ldots\to{H}_n(A\cap B,C\cap D) \rar{\Phi}
                        & {H}_n(A,C)\oplus{H}_n(B,D) \rar{\Psi} \ar[draw=none]{d}[name=X, anchor=center]{}
                        & {H}_n(X,Y) \ar[rounded corners,
                                to path={ -- ([xshift=2ex]\tikztostart.east)
                                          |- (X.center) \tikztonodes
                                          -| ([xshift=-2ex]\tikztotarget.west)
                                          -- (\tikztotarget)}]{dll}[description, at end]{\partial_n} \\
                        {H}_{n-1}(A\cap B,C\cap D) \rar{\Phi}
                        & {H}_{n-1}(A,C)\oplus{H}_{n-1}(B,D) \rar{\Psi}
                        & {H}_{n-1}(X,Y)\to\ldots
                    \end{tikzcd}
                \end{equation*}

            \subsubsection{Examples}

                \fbox{\emph{Find and work through some examples.}}

        \subsection{Non-integer coefficients}

            Recall the following useful properties of $\Tor$:
            \begin{enumerate}
                \item $\Tor(A,B)\cong\Tor(B,A)$;
                \item $\Tor(\bigoplus_i A_i,B)\cong\bigoplus_i\Tor(A_i,B)$;
                \item $\Tor(F,B)=\Tor(T_F,B)=0$ for any free $F$ or torsion-free $T_F$;
                \item $\Tor(A,B)=\Tor(\mathrm{tors}(A),B)$.
            \end{enumerate}

            Let $X$ be a space, $A\subset X$ a subspace, and $G$ an arbitrary \emph{abelian} group.

            \begin{itemize}
                \item The \textbf{$n$-chain group in $X$ with coefficients in $G$} is $C_n(X;G)$, defined as the free abelian group consisting of finite formal sums $\sum_i g_i\sigma_i$, called \textbf{chains}, where $g_i\in G$.
                    Equivalently, $C_n(X;G)=\bigoplus_{\sigma\subset X}G$, where the sum is taken over all singular $n$-simplices in $X$.
                \item The \textbf{relative $n$-chain group} $C_n(X,A;G)$ is the quotient group $C_n(X;G)/C_n(A;G)$.
                    This is also a direct sum: $C_n(X,A;G)=\bigoplus_{\sigma\subset X,\sigma\not\subset A}G$, where the sum is taken over all singular $n$-simplices is $X$ but not in $A$.
            \end{itemize}

            \begin{enumerate}
                \item \emph{$C_n(X,A;G)\cong C_n(X,A)\otimes G$ naturally, via the map $\sum_i g_i\sigma_i\mapsto\sum_i(\sigma_i\otimes g_i)$.}
                \item \emph{Under the above isomorphism, the boundary map $\partial_n\colon C_n(X,A;G)\to C_{n-1}(X,A;G)$ becomes the map $\partial_n\otimes\id\colon C_n(X,A)\otimes G\to C_{n-1}(X,A)\otimes G$, where $\partial_n$ here is the usual boundary map for coefficients in $\zz$.}
                \item \textbf{Universal coefficient theorem for homology:} \emph{If $C_\bullet$ is a chain complex of free abelian groups and $G$ an arbitrary abelian group, then there are natural (in $C_\bullet$) short exact sequences}
                    \begin{equation*}
                        0\to H_n(C_\bullet)\otimes G\to H_n(C_\bullet;G)\to\Tor(H_{n-1}(C_\bullet),G)\to0
                    \end{equation*}
                    \emph{for all $n$.}
                    \emph{Further, these sequences split, though \emph{not} naturally.}
                \item \textbf{Universal coefficient theorem for homology of a space:} $$H_n(X;G)\cong (H_n(X)\otimes G)\oplus\Tor(H_{n-1}(X),G)$$
                \item \emph{If $f\colon S^n\to S^n$ has degree $d$ then $f_*\colon H_n(S^n;G)\to H_n(S^n;G)$ is multiplication by $d$.}
            \end{enumerate}

            \subsubsection{Examples}

                \fbox{\emph{Find and work through some examples.}}

        \subsection{Eilenberg and Steenrod axioms}

            \begin{itemize}
                \item $\mathsf{Comp_{CW}}$ is the category whose objects are CW complexes and who morphisms are maps of CW complexes.
                \item $\mathsf{Ab}_\nn$ is the category whose objects are sequences $(A_0,A_1,A_2,\ldots)$ of abelian groups and whose morphisms are sequences $(\varphi_0,\varphi_1,\varphi_2,\ldots)$ of homomorphisms.
            \end{itemize}

            A \textbf{reduced homology theory on} $\mathsf{Comp_{CW}}$ is a (covariant) functor $\reduced{h}\colon\mathsf{Comp_{CW}}\to\mathsf{Ab}_\nn$ \mbox{such that}
            \begin{enumerate}
                \item if $f\simeq g\colon X\to Y$ then $\reduced{h}(f)_n=\reduced{h}(g)_n\colon\reduced{h}(X)_n\to\reduced{h}(Y)_n$;
                \item for each CW pair $(X,A)$ there are \emph{natural} maps $\partial_n\colon\reduced{h}(X/A)_n\to\reduced{h}(A)_{n-1}$, called \textbf{boundary maps}, that give the long exact sequence
                    \begin{equation*}
                        \begin{tikzcd}
                            \ldots\to\reduced{h}(A)_n \rar{\iota_*}
                            & \reduced{h}(X)_n \rar{\pi_*} \ar[draw=none]{d}[name=X, anchor=center]{}
                            & \reduced{h}(X/A)_n \ar[rounded corners,
                                    to path={ -- ([xshift=2ex]\tikztostart.east)
                                              |- (X.center) \tikztonodes
                                              -| ([xshift=-2ex]\tikztotarget.west)
                                              -- (\tikztotarget)}]{dll}[description, at end]{\partial_n} \\
                            \reduced{h}(A)_{n-1} \rar{\iota_*}
                            & \reduced{h}(X)_{n-1} \rar{\pi_*}
                            & \reduced{h}(X/A)_{n-1}\to\ldots
                        \end{tikzcd}
                    \end{equation*}
                    where $\iota\colon A\hookrightarrow X$ is the inclusion map and $\pi\colon X\twoheadrightarrow X/A$ is the quotient map;
                \item the map $\bigoplus_\alpha\reduced{h}(\iota_\alpha)_n\colon\bigoplus_\alpha\reduced{h}(X_\alpha)_n\to\reduced{h}(X)_n$ is an isomorphism for each $n$, where $X=\bigvee_\alpha X_\alpha$ is the wedge sum and $\iota_\alpha\colon X_\alpha\hookrightarrow X$ are the inclusion maps.
            \end{enumerate}

        \subsection{Useful facts and methods of calculation}

            \begin{itemize}
                 \item $H_0(X)$ is a direct sum of $k$ copies of $\zz$, where $k$ is the number of path-connected components of $X$.
                 \item If $(X_\alpha,\{x_\alpha\})$ is a collection of good pairs then the inclusions $\iota_\alpha\colon X_\alpha\hookrightarrow\bigvee_\alpha X_\alpha$ (where the wedge sum is taken with basepoints being the $x_\alpha$) induce an isomorphism $\bigoplus_\alpha(\iota_\alpha)_*$ on \emph{reduced} homology groups, i.e. $\left(\bigoplus_\alpha\reduced{H}_n(X_\alpha)\right)\cong\reduced{H}_n(\bigvee_\alpha X_\alpha)$.
                 \item Use long exact sequences, e.g. Corollary 2.14.
                 \item Use the explicit delta/CW complex structure.
             \end{itemize}

             \fbox{\emph{Come up with some flowchart of ways to calculate homology.}}

        \subsection{Homology of common spaces}

            \fbox{\parbox{\textwidth}{\emph{Compute the homology of the genus-$n$ orientable surface, the genus-$n$ non-orientable surface, $\rr^n\setminus\{p_1,\ldots,p_k\}$, and any other common spaces.}}}

    \section{\protect\marginnote{\AT}[0pt]Cohomology}

        \subsection{General definition}

            Let $(C_\bullet,\partial_\bullet)$ be a chain complex of free abelian groups and $G$ an arbitrary \emph{abelian} group.

            \begin{itemize}
                \item The \textbf{cochain group $C_n^*$} is defined by $C_n^*=\Hom(C_n,G)$.
                \item The \textbf{coboundary map $\delta_n=\partial_{n+1}^*\colon C_n^*\to C_{n+1}^*$} is defined by precomposition by $\partial_{n+1}$.
                \item The \textbf{cohomology group $H^n(C_\bullet;G)$ of $C_\bullet$ with coefficients in $G$} is defined as the $n$th cohomology of the cochain complex $(C_\bullet^*,\delta_\bullet)$, i.e. $\ker\delta_n/\im\delta_{n-1}$.
            \end{itemize}

        \subsection{Universal coefficients}

            Recall the following useful properties of $\Ext$:
            \begin{enumerate}
                \item $\Ext(H\oplus H',G)\cong\Ext(H,G)\oplus\Ext(H',G)$;
                \item $\Ext(F,G)=0$ for any free abelian group $F$;
                \item $\Ext(\zz/m\zz,G)\cong G/nG$.
            \end{enumerate}

            \medskip

            \emph{Let $(C_\bullet,\partial_\bullet)$  and $(C'_\bullet,\partial'_\bullet)$ be chain complexes of \emph{free abelian} groups, and $G$ an arbitrary \emph{abelian} group.}
            \emph{Then the following facts hold:}
            \begin{enumerate}
                \item \textbf{Universal coefficient theorem for cohomology:}
                    \emph{The cohomology groups $H^n(C_\bullet;G)$ are determined by the \emph{split} exact sequence}
                    \begin{equation*}
                        0\to\Ext(H_{n-1}(C_\bullet),G)\to H^n(C_\bullet;G)\to \Hom(H_n(C_\bullet),G)\to0.
                    \end{equation*}
                    \emph{Further, this sequence is natural (and splits naturally) in $C_\bullet$.}
                \item \textbf{Universal coefficient theorem for cohomology of a space:} $$H^n(X;G)\cong\Ext(H_{n-1}(X),G)\oplus\Hom(H_n(X),G)$$
                \item \emph{If the homology groups $H_n(C_\bullet)$ and $H_{n-1}(C_\bullet)$ are finitely generated then}
                    \begin{equation*}
                        H^n(C_\bullet;\zz)\cong\frac{H_n(C_\bullet)}{\mathrm{tors}\big(H_n(C_\bullet)\big)}\oplus\mathrm{tors}\big(H_{n-1}(C_\bullet)\big)
                    \end{equation*}
                    \emph{where $\mathrm{tors}(A)$ is the torsion subgroup of an abelian group $A$.}
                \item \emph{If $f_\bullet\colon C_\bullet\to C'_\bullet$ is a quasi-isomorphism then it also induces an isomorphism on cohomology groups.}
            \end{enumerate}

        \subsection{Cohomology of a space}

            \subsubsection{Definitions}

                Let $X$ be some space and $G$ an arbitrary abelian group.

                \begin{itemize}
                    \item The \textbf{group of singular $n$-cochains $C^n(X;G)$ with coefficients in $G$} is the dual group $\Hom(C_n(X),G)$ to the singular $n$-chain group $C_n(X)$, and is thus equivalent to the group of functions from singular $n$-simplices to $G$.
                    \item The \textbf{coboundary map $\delta_n\colon C^n(X)\to C^{n+1}(X)$} is the dual $\partial_{n+1}^*$ defined by precomposition by the singular boundary map $\partial_{n+1}\colon C_{n+1}(X)\to C_n(X)$.
                    \item The elements of $\ker\delta_n$ are called \textbf{$n$-cocyles} and the elements of $\im\delta_{n-1}$ are called \textbf{$n$-coboundaries}.
                    \item The \textbf{$n$th singular cohomology group of $X$ with coefficients in $G$} is defined as the $n$th cohomology of the cochain complex $(C^\bullet,\delta_\bullet)$, i.e. $\ker\delta_n/\im\delta_{n-1}$.
                \end{itemize}

            \subsubsection{Reduced cohomology}

                The \textbf{reduced cohomology groups} $\reduced{H}^n(X;G)$ are defined by dualising the augmented chain complex $C_\bullet(X)\xrightarrow{\varepsilon}\zz\to0$ used to define reduced homology, where $\zz=C_{-1}(X)$ is in degree $1$ and $\varepsilon\left(\sum_i n_i\sigma_i\right)=\sum_i n_i$.

                \begin{itemize}
                    \item $H^0(X;G)$ is the group of functions $X\to G$ that are constant on path-components; $\reduced{H}^0(X;G)$ is the group of functions $X\to G$ that are constant on path components \emph{modulo the functions that are constant on all of $X$}.
                    \item $H^n(X;G)\cong\reduced{H}^n(X;G)$ for $n\geqslant1$.
                \end{itemize}

            \subsubsection{Relative cohomology and the long exact sequence of a pair}

                Let $A\subset X$ some subspace with inclusion map $\iota\colon A\hookrightarrow X$ and \mbox{quotient map $\pi\colon X\twoheadrightarrow X/A$}.

                \begin{itemize}
                    \item \emph{The dual}
                        \begin{equation*}
                            0\leftarrow C^n(A;G)\xleftarrow{\iota^*}C^n(X;G)\xleftarrow{\pi^*}C^n(X,A)\leftarrow0
                        \end{equation*}
                        \emph{of the short exact sequence} $0\to C_n(A)\xrightarrow{\iota}C_n(X)\xrightarrow{\pi}C_n(X,A)\to0$ \emph{is exact.}

                        We know that $Hom(-,G)$ is left-exact, but \emph{contravariant}, and so the right-hand side of the dual sequence is exact.
                        To see that $\iota^*$ is surjective note that it is simply the restriction of cochains on $X$ to cochains on $A$, but given some cochain on $A$ we can extend it to a cochain on $X$ by defining to to be zero on $X\setminus A$, and this will map back to the original cochain under $\iota^*$.
                        To see that $\ker\iota^*=\im\pi^*$ note that the kernel consists of $n$-cochains that are zero on singular $n$-simplices in $A$, which are exactly the homomorphisms $C_n(X,A)=C_n(X)/C_n(A)\to G$.
                        Thus $\ker\iota^*=\Hom(C_n(X,A),G)=C^n(X,A;G)$.

                    \item \emph{$C^n(X,A;G)$ is the group of functions from singular $n$-simplices in $X$ to $G$ that vanish on simplices in $A$.}

                        This is since $C_n(X)\cong C_n(A)\oplus C_n(X,A)$ where the two groups on the right are disjoint, and one consists of simplices with image in $A$ and the other consists of simplices with image \emph{not} in $A$.

                    \item The \textbf{relative coboundary map $\delta_n\colon C^n(X,A;G)\to C^{n+1}(X,A;G)$} is defined as the restriction of $\delta_n\colon C^n(X;G)\to C^{n+1}(X;G)$ using the above interpretation.
                    \item The \textbf{$n$th relative cohomology group $H^n(X,A;G)$} is defined as the $n$th cohomology of the cochain complex $(C^\bullet,\delta_\bullet)$, i.e. $\ker\delta_n/\im\delta_{n-1}$.
                    \item \emph{We have the long exact sequence}
                        \begin{equation*}
                            \begin{tikzcd}
                                \ldots\leftarrow{H}^{n+1}(A;G)
                                & {H}^{n+1}(X;G) \lar[swap]{\iota^*} \ar[draw=none]{d}[name=X, anchor=center]{}
                                & {H}^{n+1}(X,A;G) \lar[swap]{\pi^*}\\
                                {H}^n(A;G) \ar[rounded corners,
                                        to path={ -- ([xshift=-2ex]\tikztostart.west)
                                                  |- (X.center) \tikztonodes
                                                  -| ([xshift=2ex]\tikztotarget.east)
                                                  -- (\tikztotarget)}]{urr}[description, at end]{\delta_n}
                                & {H}^n(X;G) \lar[swap]{\iota^*}
                                & {H}^n(X,A;G) \lar[swap]{\pi^*} \leftarrow\ldots
                            \end{tikzcd}
                        \end{equation*}
                    \item \emph{The following diagram (with the connecting homomorphisms $\partial_n$ and $\delta_n$ from the long exact sequences of (co)homology) commutes:}
                        \begin{equation*}
                            \begin{tikzcd}
                                H^n(A;G) \rar{\delta_n} \dar{h}
                                & H^{n+1}(X,A;G) \dar{h}\\
                                \Hom(H_n(A),G) \rar{\partial_n^*}
                                & \Hom(H_{n+1}(X,A),G)
                            \end{tikzcd}
                        \end{equation*}
                        \emph{where $h$ is simply restriction to cycles in $C_n(A)$ or to relative cycles in $C_n(X,A)$.}
                \end{itemize}

                Note that the universal coefficient theorem for relative cohomology also holds.

            \subsubsection{Induced homomorphisms and homotopy invariance}

                Let $X$ and $Y$ be spaces

                \begin{itemize}
                    \item A map $f\colon X\to Y$ induces a chain map $f^\bullet\colon C^\bullet(Y)\to C^\bullet(X)$.
                    \item A chain map $f^\bullet\colon C^\bullet(Y)\to C^\bullet(X)$ induces a homomorphism $f^*\colon H^n(Y;G)\to H^n(X;G)$, i.e. homomorphisms $(f^*)^n\colon H^n(Y)\to H^n(X)$ for all $n$.
                \end{itemize}

                \begin{enumerate}
                    \item $(fg)^*=g^*f^*$
                    \item $\id^*=\id$
                    \item \emph{If $f,g\colon X\to Y$ are homotopic then $f^*=g^*$}
                    \item \emph{If $f\colon X\to Y$ is a homotopy equivalence then $f^*$ is an isomorphism.}
                    \item \emph{If $f^\bullet,g^\bullet\colon C^\bullet(Y)\to C^\bullet$ are chain homotopic then $f^*=g^*$}
                \end{enumerate}

                \emph{The equivalent statements for relative cohomology also hold.}

            \subsubsection{Excision}

                \textbf{Excision theorem:} (can be phrased in either of the two following equivalent ways)
                \begin{enumerate}
                    \item \emph{Let $Z\subset A\subset X$ be such that $\closure{Z}\subset\interior{A}$.}
                        \emph{Then the inclusion $\iota\colon(X\setminus Z,A\setminus Z)\hookrightarrow(X,A)$ induces an isomorphism $\iota^*$ on cohomology groups, i.e. $H^n(X,A)\cong H^n(X\setminus Z,A\setminus Z)$.}
                    \item \emph{Let $A,B\subset X$ be such that $X\subset\interior{A}\cup\interior{B}$.}
                        \emph{Then the inclusion $\iota\colon(B,A\cap B)\hookrightarrow(X,A)$ induces an isomorphism $\iota^*$ on homology groups, i.e. $H^n(X,A)\cong H^n(B,A\cap B)$.}
                \end{enumerate}

            \subsubsection{Mayer-Vietoris}

                \emph{If $A,B\subset X$ are such that $X=\interior{A}\cup\interior{B}$ then we have the long exact sequence}
                \begin{equation*}
                    \begin{tikzcd}
                        \ldots\leftarrow{H}^{n+1}(A\cap B;G)
                        & {H}^{n+1}(A;G)\oplus{H}^{n+1}(B;G) \lar[swap]{\Phi} \ar[draw=none]{d}[name=X, anchor=center]{}
                        & {H}^{n+1}(X;G) \lar[swap]{\Psi}\\
                        {H}^{n}(A\cap B;G) \ar[rounded corners,
                                to path={ -- ([xshift=-2ex]\tikztostart.west)
                                          |- (X.center) \tikztonodes
                                          -| ([xshift=2ex]\tikztotarget.east)
                                          -- (\tikztotarget)}]{urr}[description, at end]{\delta_n}
                        & {H}^{n}(A;G)\oplus{H}^n(B;G) \lar[swap]{\Phi}
                        & {H}^{n}(X;G) \lar[swap]{\Psi} \leftarrow\ldots
                    \end{tikzcd}
                \end{equation*}

            \subsubsection{Eilenberg and Steenrod axioms}

                These are exactly dual to the axioms for a reduced homology theory, but note that $\Hom\left(\bigoplus_\alpha A_\alpha,B\right)\cong\prod_\alpha\Hom(A_\alpha,B)$, and so the wedge axiom will require that $\prod_\alpha \reduced{h}(\iota_\alpha)^n$ be an isomorphism.

        \subsection{Cup product}

            \subsubsection{Definition}

                Given a space $X$, let $R$ be some ring (usually one of $\zz,\zz/m\zz,\qq$, though not necessarily commutative), and let $\varphi\in C^k(X;R),\psi\in C^\ell(X;R)$ be cochains.

                \begin{itemize}
                    \item The \textbf{cup product} $\varphi\smallsmile\psi\in C^{k+\ell}(X;R)$ is the cochain whose value on a singular simplex $\sigma\colon\Delta^{k+\ell}\to X$ is given by
                        \begin{equation*}
                            (\varphi\smallsmile\psi)(\sigma)=\varphi(\sigma|_{[x_0,\ldots,x_k]})\cdot\psi(\sigma|_{[x_k,\ldots,x_{k+\ell}]})
                        \end{equation*}
                        where the multiplication $\cdot$ on the right-hand side is in $R$.
                    \item \emph{The following relation, where $\delta$ is the coboundary map, holds:}
                        \begin{equation*}
                            \delta_{k+\ell}(\varphi\smallsmile\psi)=(\delta_k\varphi\smallsmile\psi)+(-1)^k(\varphi\smallsmile\delta_\ell\psi).
                        \end{equation*}
                    \item \emph{The cup product of two cocycles is again a cocycle; the cup product of a cocycle and a coboundary (in either order) is a coboundary.}
                    \item Using the previous property, there is an \textbf{induced cup product} on homology:
                        \begin{equation*}
                            H^k(X;R)\times H^\ell(X;R)\xrightarrow{\smallsmile}H^{k+\ell}(X;R).
                        \end{equation*}
                        This is associative and distributive (since it is both at the level of cochains).
                        Further, if $R$ has identity $1_R$ then the induced cup product has identity $(\sigma^0\mapsto 1_R)\in H^1(X;R)$.
                \end{itemize}

                \emph{Note that we can define the cup product for simplicial homology in the same way, so the canonical isomorphism between singular and simplicial homology respects the cup product.}

            \subsubsection{The relative case}

                \emph{Let $A,B\subset X$ be open subsets (or subcomplexes, if $X$ is a CW complex).}
                \emph{Using the same definition as in the absolute case, we have the \textbf{relative cup product} $\smallsmile$ which induces}
                \begin{equation*}
                    H^k(X,A;R)\times H^\ell(X,B;R)\xrightarrow{\smallsmile}H^{k+\ell}(X,A\cup B;R).
                \end{equation*}

                This follows from the fact that the absolute cup product restricts to a cup product $C^k(X,A;R)\times C^\ell(X,B;R)\to C^{k+\ell}(X,A+B;R)$, where $C^n(X,A+B;R)\leqslant C^n(X;R)$ is the subgroup consisting of cochains vanishing on sums of chains in $A$ and chains in $B$.
                If $A$ and $B$ are open (or subcomplexes, and $X$ is a CW complex) then the inclusions $C^n(X,A\cup B;R)\hookrightarrow C^n(X,A+B;R)$ induce isomorphisms on cohomology via the five lemma and excision.

            \subsubsection{Properties}

                \begin{itemize}
                    \item \emph{Let $f\colon X\to Y$ be a map of spaces.}
                        \emph{Then the induced maps $f^*\colon H^n(Y;R)\to H^n(X;R)$ satisfy} $f^*(\alpha\smallsmile\beta)=f^*(\alpha)\smallsmile f^*(\beta).$
                    \item \emph{If $R$ is commutative then $\alpha\smallsmile\beta=(-1)^{k\ell}\beta\smallsmile\alpha$ for all $\alpha\in H^k(X;R),\beta\in H^\ell(X;R)$.}
                \end{itemize}

                \emph{The equivalent statements for relative cohomology also hold.}

            \subsubsection{The cohomology ring}

                \begin{itemize}
                    \item The \textbf{cohomology ring} $H^*(X,A;R)$ is the \emph{graded} ring $\bigoplus_n H^n(X,A;R)$.
                        It can naturally be given an $R$-algebra structure.
                    \item The \textbf{dimension} $|\alpha|$ \textbf{of an element} $a\in H^*(X,A;R)$ is the integer $k\in\nn$ such that $a\in H^k(X,A;R)$.
                        This means that (when $R$ is commutative) we can write the \emph{graded-commutativity property} as $a\smallsmile b=(-1)^{|a||b|}b\smallsmile a$.
                \end{itemize}

            \subsubsection{Examples}

                \fbox{\emph{Work through Examples 3.7--3.10 and 3.12--3.14.}}

        \subsection{Knneth formula}

            \subsubsection{Cross product and a Knneth formula}

                Let $X,Y$ be spaces and $R$ a \emph{commutative} ring.
                Write $\pi_X\colon X\times Y\to X$ and $\pi_Y\colon X\times Y\to Y$ for the projection maps of the product of spaces.

                \begin{itemize}
                    \item The \textbf{cross product} (or \textbf{external cup product}) $\times$ is the $R$-module homomorphism
                        \begin{equation*}
                            H^*(X;R)\otimes_R H^*(Y;R)\xrightarrow{\times}H^*(X\times Y;R)
                        \end{equation*}
                        where we define $a\times b = \pi_X^*(a)\smallsmile\pi_Y^*(b)$.
                    \item If we define multiplication on the tensor product by $(a\otimes b)(c\otimes d)=(-1)^{|b||c|}ac\otimes bd$ then the cross product becomes a ring homomorphism.
                    \item \textbf{Knneth theorem:} \emph{The cross product is an isomorphism of rings if $X$ and $Y$ are CW complexes and $H^n(Y;R)$ is a free, finitely-generated $R$-module for all $n$.}
                    \item \textbf{Relative Knneth theorem:} \emph{The relative cross product}
                        \begin{equation*}
                            H^*(X,A;R)\otimes_R H^*(Y,B;R)\xrightarrow{\times}H^*(X\times Y, A\times Y\cup X\times B;R)
                        \end{equation*}
                        \emph{is an isomorphism of rings if $(X,A)$ and $(Y,B)$ are CW pairs and $H^n(Y,B;R)$ is a free, finitely-generated $R$-module for all $n$.}
                \end{itemize}

            \subsubsection{Examples}

                \fbox{\emph{Find and work through some simple examples.}}

                \fbox{\emph{Prove that $H^*(\rr p^n;\zz/2\zz)\cong\zz/2\zz[\alpha](\alpha^{n+1})$ where $|\alpha|=1$.}}

        \subsection{Useful facts and methods of calculation}

            \fbox{\emph{Come up with some flowchart of ways to calculate cohomology. Include using duality.}}

        \subsection{Cohomology of common spaces}

            \fbox{\parbox{\textwidth}{\emph{Compute the cohomology of the genus-$n$ orientable surface, the genus-$n$ non-orientable surface, $\rr^n\setminus\{p_1,\ldots,p_k\}$, and any other common spaces. Work with coefficients in $\zz$ and $\zz/p\zz$.}}}

    \section{\protect\marginnote{\AT}[0pt]Duality}

        \subsection{Manifolds}

            \begin{itemize}
                \item An \textbf{$n$-manifold} is a \emph{Hausdorff} space where every point has a neighbourhood homeomorphic to $\rr^n$.
                \item A manifold is called \textbf{closed} if it is a compact topological space.
                \item \emph{If $M$ is an $n$-manifold then the local homology group $H_k(M,M\setminus\{x\};\zz)=\delta_{kn}\zz$ for any $x\in M$, where $\delta_{ij}$ is the Kronecker delta.}
                    \begin{align*}
                        H_k(M,M\setminus\{x\})&\cong H_k(\rr^n,\rr^n\setminus\{0\})&&\text{by excision}\\
                        &\cong \reduced{H}_{k-1}(\rr^n\setminus\{0\})&&\text{since $\rr^n$ is contractible}\\
                        &\cong \reduced{H}_{k-1}(S^{n-1})&&\text{since $\rr^n\setminus\{0\}\simeq S^{n-1}$}
                    \end{align*}
            \end{itemize}

            \emph{Note:} for $A\subset M$ we write $H_n(M\vbar A)$ to mean $H_n(M,M\setminus A)$, and we abuse notation in writing $H_n(M\vbar x)$ to mean $H_n(M\vbar \{x\})$.

        \subsection{Orientability}

            Let $M$ be an $n$-manifold and $x\in M$ a point in $M$.

            \begin{itemize}
                \item A \textbf{local orientation of $M$ at $x$} is a choice of generator $\mu_x$ of the infinite cyclic group $H_n(M\vbar x;\zz)\cong\zz$.
                \item An \textbf{orientation of $M$} is an assignment $x\mapsto\mu_x$ of a local orientation to each point $x\in M$ \emph{such that} there exists some finite-radius open ball $B\subset M$ containing $x$, and some generator $\mu_B$ of $H_n(M\vbar B)\cong H_n(\rr^n\vbar B)$ with $\mu_B$ mapping to $\mu_y$ under the natural map $H_n(M\vbar B)\to H_n(M\vbar y)$ for all $y\in B$.
                \item If we can find an orientation on $M$ then we say that $M$ is \textbf{orientable}.
                \item A \textbf{generator of a commutative ring $R$ with identity} is $\mu\in R$ such that $R\mu=R$.
                \item We define \textbf{$R$-orientability} for any \emph{commutative ring $R$ with identity} similarly by assigning to each $x\in M$ a generator $\mu_x$ of $H_n(M\vbar x;R)\cong R$ and requiring that it satisfies the same condition as when $R=\zz$.
                \item A \textbf{fundamental class for $M$ with coefficients in $R$} is an element $[M]\in H_n(M;R)$ such that, for all $x\in M$, its image under $H_n(M;R)\to H_n(M\vbar x;R)$ is a generator.
                \item An equivalent definition of \textbf{$R$-orientability} follows from the fact that \emph{$M$ is closed and $R$-orientable iff a fundamental class exists.}
            \end{itemize}

            \begin{enumerate}
                \item \emph{If $M$ is a connected $n$-manifold then $H_i(M;R)=0$ for all $i\geqslant n+1$.}
                \item \emph{Let $M$ be a \emph{closed} connected $n$-manifold.}
                    \emph{Then}
                    \begin{enumerate}
                        \item \emph{for all $x\in M$, the map $H_n(M;R)\to H_n(M\vbar x;R)\cong R$ is}
                            \begin{enumerate}[label=(\roman*)]
                                \item \emph{an isomorphism if $M$ is $R$-orientable;}
                                \item \emph{injective, with image} $\{r\in R\mid 2r=0\}$ \emph{if $M$ is \emph{not} $R$-orientable.}
                            \end{enumerate}
                        \item \emph{the torsion subgroup $\mathrm{tors}(H_{n-1}(M;\zz))$ is}
                            \begin{enumerate}[label=(\roman*)]
                                \item \emph{trivial if $M$ is $\zz$-orientable;}
                                \item $\zz/2\zz$ \emph{if $M$ is \emph{not} $\zz$-orientable.}
                            \end{enumerate}
                        \item \emph{$M$ is $R$-orientable for}
                            \begin{enumerate}[label=(\roman*)]
                                \item \emph{all $R$ if $M$ is $\zz$-orientable;}
                                \item \emph{all $R$ containing a unit of order $2$ if $M$ is \emph{not} $\zz$-orientable.}
                            \end{enumerate}
                    \end{enumerate}
            \end{enumerate}

            \subsubsection{Examples}

                \fbox{\emph{Work through the paragraph about delta-complexes on p. 238 with an explicit example.}}

        \subsection{Poincar}

            \subsubsection{Cap product}

                Let $X$ be a space and $R$ a commutative ring with identity.

                \begin{itemize}
                    \item The \textbf{cap product} is the $R$-bilinear map
                        \begin{equation*}
                            C_k(X;R)\times C^\ell(X;R)\xrightarrow{\smallfrown}C_{k-\ell}(X;R)
                        \end{equation*}
                        for $k\geqslant\ell$, defined by $\sigma\smallfrown\varphi=\varphi(\sigma_{[x_0,\ldots,x_\ell]})\cdot\sigma|_{[x_\ell,\ldots, x_k]}$.
                    \item \emph{The cap product satisfies $\partial_{k-\ell}(\sigma\smallfrown\varphi)=(-1)^\ell(\partial_k\sigma\smallfrown\varphi-\sigma\smallfrown\delta_\ell\varphi)$.}
                    \item The previous claim implies that the cap product of a cycle and a cocycle is a cycle, and that the cap product of either a boundary and a cocycle, or a cycle and a coboundary, is a boundary.
                        This induces a \textbf{cap product on homology}:
                        \begin{equation*}
                            H_k(X;R)\times H^\ell(X;R)\xrightarrow{\smallfrown}H_{k-\ell}(X;R)
                        \end{equation*}
                        and a \textbf{cap product on relative homology}:
                        \begin{equation*}
                            H_k(X,A\cup B;R)\times H^\ell(X,A;R)\xrightarrow{\smallfrown}H_{k-\ell}(X,B;R)
                        \end{equation*}
                        when $A,B\subset X$ are open.
                \end{itemize}

            \subsubsection{Closed manifolds}

                \textbf{Poincar duality:}
                \emph{Let $M$ be a closed $R$-orientable $n$-manifold with fundamental class $[M]\in H_n(M;R)$.}
                \emph{Then the map}
                \begin{align*}
                    D:H^k(M;R)&\to H_{n-k}(M;R)\\
                    \alpha&\mapsto[M]\smallfrown\alpha
                \end{align*}
                \emph{is an isomorphism for all $k$.}

            \subsubsection{Non-compact manifolds}

                \begin{itemize}
                    \item A space $X$ is \textbf{locally compact} if each point has a compact neighbourhood.
                    \item For a locally-compact space $X$ we define \textbf{cohomology groups with compact support} $H_c^n(X;R)=H_n(C_c^\bullet(X);R)$, where
                        \begin{equation*}
                            C_c^i(X)=\{\varphi\in C^i(X;R)\mid \exists K\subset X\text{ s.t. }K\text{ is compact and }\varphi|_{X\setminus K}=0\}.
                        \end{equation*}
                        \textbf{Alternatively}, we can define $H_c^i(X;R)=\colim_{\text{compact }K\subset X}H^i(X,X\setminus K;R)$.
                    \item \emph{Let $M$ be an $R$-orientable $n$-manifold and $K\subset M$ a compact subspace.}
                        \emph{Then there exists a relative fundamental class $[K_M]\in H_n(M,M\setminus K)$.}
                    \item \textbf{Poincar duality (non-compact):}
                        \emph{Let $M$ be an $R$-orientable $n$-manifold.}
                        \emph{Then the map $D_M\colon H^k_c(M;R)\to H_{n-k}(M;R)$ is an isomorphism for all $k$, where the map $D_M$ is the colimit of the maps $H^i(M,M\setminus K;R)\to H_{n-k}(M;R)$ given by $\varphi\mapsto[K_M]\smallfrown\varphi$.}
                \end{itemize}

            \subsubsection{Cup and cap products}

                \begin{itemize}
                    \item \emph{The cup and cap products satisfy $\psi(\sigma\smallfrown\varphi)=(\varphi\smallsmile\psi)(\sigma)$, where $\sigma\in C_{k+\ell}(X;R)$, $\varphi\in C^k(X;R)$, and $\psi\in C^\ell(X;R)$.}
                    \item Let $A$ and $B$ be $R$-modules.
                        A \emph{bilinear} map $A\times B\to R$ is said to be \textbf{non-singular pairing} if the maps $A\to\Hom_{R-\mathsf{mod}}(B,R)$ and $B\to\Hom_{R-\mathsf{mod}}(A,R)$ are both isomorphisms, where the maps are induced by thinking of one of the variables as being fixed.
                    \item \emph{Let $M$ be a closed $R$-orientable $n$-manifold.}
                        \emph{The the cup product induces a non-singular pairing, given by}
                        \begin{align*}
                            H^k(M;R)\times H^{n-k}(M;R)&\to R\\
                            (\varphi,\psi)&\mapsto(\varphi\smallsmile\psi)[M].
                        \end{align*}

                        \emph{Proof:} This follows from the fact that $\psi(\sigma\smallfrown\varphi)=(\varphi\smallsmile\psi)(\sigma)$ and Poincar duality.

                    \item \emph{Let $M$ be a closed $\zz$-orientable $n$-manifold, and $\varphi\in H^k(M;\zz)$.}
                        \emph{Then $\varphi$ is a generator of an infinite cyclic summand of $H^k(M;\zz)$ iff there exists $\psi\in H^{n-k}(X;\zz)$ such that $\varphi\smallsmile\psi$ is a generator of $H^n(X;\zz)\cong\zz$.}

                        \emph{Proof:} $\varphi$ generates a $\zz$-summand iff there exists a homomorphism $\vartheta\colon H^k(M;\zz)\to\zz$ such that $\vartheta(\varphi)=\pm1$.
                            Since the cup product pairing is non-singular, we know that every homomorphism is of the form $\vartheta=(-\smallsmile\psi)[M]$ for some $\psi\in H^{n-k}(M;\zz)$.
                            So there exists $\vartheta$ satisfying $\vartheta(\varphi)=\pm1$ iff there exists $\psi$ such that $\varphi\smallsmile\psi$ generates $H^n(M;\zz)$.
                \end{itemize}

            \subsubsection{Examples}

                \fbox{\emph{Prove Corollary 3.37.}}
                \fbox{\emph{Work through the example in Evie's notes on p. 52.}}

        \subsection{Lefschetz}

            \subsubsection{Lefschetz duality}

            \begin{itemize}
                \item An \textbf{$n$-manifold with boundary} is a Hausdorff space in which each point has an open neighbourhood homeomorphic either to $\rr^n$ or to $\rr^n_+=\{(x_1,\ldots,x_n)\in\rr^n\mid x_i\geqslant0\}$.
                    The \textbf{boundary} $\partial M$ of such a manifold $M$ is the subspace of points whose open neighbourhoods are homeomorphic to $\rr^n_+$, or, equivalently, that satisfy \mbox{$H_n(M\vbar x;\zz)=0$}.
                \item An $n$-manifold $M$ with boundary $\partial M$ is \textbf{$R$-orientable} if $M\setminus\partial M$ is an $R$-orientable $n$-manifold.
                \item \emph{If $M$ is a closed $R$-oriented manifold with boundary then there exists a fundamental class $[M]\in H_n(M,\partial M)$.}
                \item \textbf{Lefschetz duality:} \emph{Let $M$ be a closed $R$-oriented manifold with boundary. Then}
                    \begin{enumerate}
                        \item $H^k(M,\partial M)\cong H_{n-k}(M)$;
                        \item $H^k(M)\cong H_{n-k}(M,\partial M)$.
                    \end{enumerate}

                    \emph{Proof:} First show that $H^k(M,\partial M;\zz)\cong H^k_c(M\setminus\partial M;\zz)$ by using Poincar duality for non-compact manifold.
                        Then use the long exact sequence of $(M,\partial M)$ in homology and cohomology, relate them by the cap product, and use the five lemma.
            \end{itemize}

            \subsubsection{Example}

                \fbox{\emph{Work through the example in Evie's notes on p. 54.}}

        \subsection{Alexander}

            \subsubsection{Alexander duality}

            \begin{itemize}
                \item A space $X$ is said to be \textbf{locally contractible} if it has a basis of \textbf{contractible} (i.e. homotopic to a point) open subsets.
                \item \textbf{Alexander duality:} \emph{Let $K\subset S^n$ be a compact and locally contractible subspace.}
                    \emph{Then $\reduced{H}_i(S^n\setminus K;\zz)\cong\reduced{H}^{n-i-1}(K)$.}

                    \emph{Proof:}
                        \begin{align*}
                            \reduced{H}_i(S^n\setminus K)&\cong \reduced{H}_C^{n-i}(S^n\setminus K) &&\text{Poincar duality}\\
                            &\cong\colim_{\text{open }U\supset K}\reduced{H}^{n-i}(S^n\setminus K,U\setminus K) &&\text{by definition}\\
                            &\cong\colim_{\text{open }U\supset K}\reduced{H}^{n-i}(S^n,U) &&\text{excision}\\
                            &\cong\colim_{\text{open }U\supset K}\reduced{H}^{n-i-1}(U) &&\text{long exact sequence}\\
                            &\cong\reduced{H}^{n-i-1}(K).
                        \end{align*}
            \end{itemize}

            \subsubsection{Example}

                \fbox{\emph{Work through the example in Evie's notes on p. 55.}}

    \section{\protect\marginnote{\AT}[0pt]The general Knneth formula}

        \textbf{General Knneth formula:} \emph{Let $X$ and $Y$ be CW complexes, and $R$ a \emph{PID}.}
        \emph{Then there are short exact sequences}
            \begin{equation*}
                0\to\bigoplus_i(H_i(X;R)\otimes_R H_{n-i}(Y;R))\to H_n(X\times Y;R)\to\bigoplus_i\Tor^R(H_i(X;R),H_{n-i-1}(Y;R))\to0
            \end{equation*}
        \emph{natural in $X\times Y$, and that split (though not naturally), for all $n$.}


    \clearpage
    \addtocontents{toc}{\protect\addvspace{20pt}\hrule\protect\addvspace{10pt}}

    \section{\protect\marginnote{\AG}[0pt]Affine varieties}

        \emph{Throughout, we assume that $k$ is an algebraically closed field.}

        \begin{itemize}
            \item A subset $X\subseteq k^n$ is an \textbf{affine variety} if it is of the form $\van(I)$ for some $I\triangleleft k[x_1,\ldots,x_n]$.
            \begin{itemize}
                \item $\van(f)\subseteq k^n$ for a polynomial $f$ is called a \textbf{hypersurface}.
                \item $\van(f)\subseteq k^n$ for $f=a_1x_1+\ldots+a_nx_n$ a linear form is called a \textbf{hyperplane}.
            \end{itemize}
            \item The \textbf{Zariski topology on $k^n$} is the topology whose \emph{closed} sets are the affine varieties, and we write $\aff_k^n$ to mean $k^n$ with the Zariski topology.
            \item The \textbf{Zariski topology on an affine variety} $X\subset k^n$ is given by the subspace topology: closed subsets of $X$ are those of the form $X\cap\van(I)$ for some $I\triangleleft\kon$.
            \item An affine variety $X\subset\aff_k^n$ is called \textbf{reducible} if it can be written as a non-trivial union of two non-trivial subvarieties: $X=X_1\cup X_2$ with $X_1\neq X_2$, and $X_1,X_2\neq\varnothing$.
            \item A \textbf{morphism of affine spaces} $F\colon\aff^m\to\aff^n$ is given by $n$ polynomial maps on $\aff^m$, i.e. $x=(x_1,\ldots,x_n)\mapsto(f_1(x),\ldots,f_n(x))$, where $f_i\in\kom$.
            \item An \textbf{isomorphism} is a morphism with an inverse morphism.
        \end{itemize}

    \section{\protect\marginnote{\AG}[0pt]Projective varieties}

        \begin{itemize}
            \item \emph{If $F\in\kzn$ is homogeneous of degree $d$ then $F(\lambda x_0,\ldots,\lambda x_n)=\lambda^d F(x_0,\ldots,x_n)$.}
            \item An ideal $I\triangleleft\kzn$ is said to be a \textbf{homogeneous ideal} if $I=(F_1,\ldots,F_r)$ with each $F_i$ homogeneous of degree $d_i$.
            \item A subset $X\subset\pee_k^n$ is a \textbf{projective variety} if it is of the form $\van(I)$ for some \emph{homogeneous} ideal $I\triangleleft\kzn$.
                \begin{itemize}
                    \item A \textbf{projective hypersurface} is $\van(F)$ for some \emph{homogeneous} polynomial $F$.
                    \item If $L=a_0x_0+\ldots+a_nx_n$ is a \emph{non-zero} linear form then $\van(L)$ is called a \textbf{projective hyperplane}.
                    \item The \textbf{$i$th coordinate hyperplane} $H_i$ is defined as $\van(x_i)$; its complement $U_i$ is called the \textbf{$i$th coordinate chart}.
                    \item \emph{If $X\subset\pee^n$ is a projective variety then $\bigcup_{i=0}^nX\cap U_i$ is an open cover of $X$.}
                \end{itemize}
            \item The \textbf{Zariski topology on} $\pee_k^n$ is the topology whose closed subsets are the projective varieties.
            \item The \textbf{Zariski topology on a projective variety} $X\subset \pee^n$ is given by the subspace topology: closed subsets of $X$ are those of the form $X\cap\van(I)$ for some homogeneous $I\triangleleft\kon$.
            \item The \textbf{affine cone} $\widehat{X}$ over a projective variety $X=\van(I)\subset\pee^n$ is the affine variety $\van(I)\subset\aff^{n+1}$.
            \item Let $X\subseteq\pee^m$ and $Y\subseteq\pee^n$ be projective varieties.
                A map $F\colon X\to Y$ is a \textbf{morphism of projective varieties} if for all $x\in X$ there exists an open neighbourhood $U\subseteq X$ of $p$ and homogeneous polynomials $f_0,\ldots,f_n\in\kzm$, \emph{all of the same degree}, such that $F|_U\colon U\to Y$ agrees with $[y]\mapsto[f_0(y):\ldots:f_n(y)]$.
            \item An \textbf{isomorphism} is a morphism with an inverse morphism.
            \item We say that two projective varieties $X,Y\subseteq\pee^n$ are \textbf{projectively equivalent} if they can be transformed into one another by a linear change of coordinates in $\pee^n$, i.e. there exists a linear transformation $A\in\mathrm{GL}(n+1,k)$ which induces an isomorphism $A\colon X\to Y$ given by $[x_0:\ldots:x_n]\mapsto[Ax_0:\ldots:Ax_n]$.
            \item \emph{Projective equivalence is a stronger relation that isomorphism.}
            \item We say that two projective varieties $X,Y\subseteq\pee^n$ are \textbf{linearly equivalent} if they are isomorphic and the isomorphism is induced by a linear isomorphism $\pee^n\cong\pee^n$.
        \end{itemize}

    \section{\protect\marginnote{\AG}[0pt]Classical maps and embeddings}

        \subsection{Veronese map}
        
            \begin{itemize}
                \item Let $V$ be a $k$-vector space.
                    The \textbf{$d$th symmetric product} $\mathrm{Sym}^d(V)$ of $V$ is the vector space given by the quotient of $V^{\otimes d}=\bigotimes_{i=1}^d V$ by the ideal of relations defined by the action of the symmetric group, i.e. identify tensors if they differ by transpositions: $v\otimes w\sim w\otimes v$.
                    If we have a basis $\{v_i\}$ for $V$ then the $d$th symmetric product is the vector space generated by the symbols $v_1^{\otimes i_1}\otimes\ldots\otimes v_n^{\otimes i_n}$ such that $\sum_j i_j=d$.
                \item \emph{There are $\binom{n+d}{d}$ monomials of degree $d$ in $n+1$ variables.}
                \item The \textbf{degree $d$ Veronese map} is the map
                    \begin{align*}
                        v_d\colon\pee^n&\to\pee^{\binom{n+d}{d}-1}\\
                        [x_0:\ldots:x_n]&\mapsto[\ldots:x^I:\ldots]
                    \end{align*}
                    where we run over all $I=(i_0,\ldots,i_n)\in\nn^{n+1}$ such that $\sum_j i_j=d$, and define $x^I=x_0^{i_0}\ldots x_n^{i_n}$.
                    \textbf{Equivalently} we can define it as
                    \begin{align*}
                        v_d\colon\pee(\aff^{n+1})&\to\pee(\mathrm{Sym}^d\aff^{n+1})\\
                        [x]&\mapsto[x^d].
                    \end{align*}
                \item The image of $v_d\colon\pee^1\hookrightarrow\pee^d$ is called the \textbf{rational normal curve of degree $d$}.
                \item \emph{There is an isomorphism}
                    \begin{equation*}
                        \pee^n\cong \Im(v_d)=\van\big(\{z_Iz_J-z_Kz_L\mid I+J=K+L\}\big)\subset\pee^{\binom{n+d}{d}-1}
                    \end{equation*}
                    \emph{where $I,J,K,L\in\nn^{n+1}$.}
                \item \emph{Let $X\subset\pee^n$ be a projective variety.}
                    \emph{Then $v_d(X)\subset v_d(\pee^n)\subset\pee^{\binom{n+d}{d}-1}$ is a projective subvariety, and $v_d(X)\cong X$}.

                    The main trick in this proof is to note that $\van(F)=\van(x_0F,x_1F,\ldots,x_nF)\subset\pee^n$, since not all $x_i$ can vanish simultaneously.
                    So $X=\van(F_1,\ldots,F_r)=\van(G_1,\ldots,G_s)$, where the $G_i$ are all homogeneous of the \emph{same} degree $c\cdot d$ for some $c$.
                    Thus $G_i=H_i\circ v_d$ for some $H_i$ homogeneous of degree $c$.
                    Then $v_d(X)=v_d(\pee^n)\cap\van(H_1,\ldots,H_s)$.
            \end{itemize}

        \subsection{Segre embedding}

            \begin{itemize}
                \item The \textbf{Segre embedding} is the map
                    \begin{align*}
                        \sigma_{m,n}\colon(\pee^m\times\pee^n)&\hookrightarrow\pee^{mn+m+n}\\
                        ([x_0:\ldots:x_m],[y_0:\ldots:y_n])&\mapsto[x_0y_0:x_1y_0:\ldots:x_my_0:x_0y_1:\ldots:x_my_1:\ldots:x_my_n].
                    \end{align*}
                    or, equivalently,
                    \begin{align*}
                        \sigma_{m,n}\colon\pee(k^{m+1})\times\pee(k^{n+1})&\hookrightarrow\pee(k^{m+1}\otimes k^{n+1})\\
                        ([x,y])&\mapsto [x\otimes y].
                    \end{align*}
                \item \emph{We can think of $k^{m+1}\otimes k^{n+1}$ as matrices, and then $\sigma_{m,n}([x],[y])$ is the matrix product of the column vector $x$ and the row vector $y$.}
                \item \emph{The inverse of $\sigma_{m,n}$ is $\pi_c\times\pi_r$, where $\pi_c$ (respectively $\pi_r$) is projection onto any non-zero column (respectively row).}
                \item The \textbf{Segre variety} is $\Sigma_{m,n}=\sigma_{m,n}(\pee^m\times\pee^n)\subset\pee^{mn+m+n}$.
                \item \emph{The Segre variety is given by}
                    \begin{equation*}
                        \Sigma_{m,n}=\van\big(\{z_{ij}z_{k\ell}-z_{kj}z_{i\ell}\mid 0\leqslant i<k<n, 0\leqslant j<\ell<m\}\big)
                    \end{equation*}
                    \emph{i.e. the vanishing of all $2\times2$ minors of $(z_{ij})\in\mathrm{Mat}_{(m+1)\times(n+1)}.$}
                \item The \textbf{Zariski topology on} $\pee^m\times\pee^n$ is the subspace topology on $\Sigma_{m,n}\subset\pee^{mn+m+n}$, i.e. we declare $\sigma_{m,n}$ and $\pi_r,\pi_c$ to be isomorphisms.
                \item \emph{The Veronese map is given by}
                    \begin{equation*}
                        \pee(k^{n+1}) \hookrightarrow \underbrace{\pee(k^{n+1})\times\ldots\pee(k^{n+1})}_{d\text{ times}} \to \pee((k^{n+1})^{\otimes d}) \to \pee(\mathrm{Sym}^d(k^{n+1}))
                    \end{equation*}
                    \emph{where the first map is the diagonal embedding $x\mapsto x\otimes\ldots\otimes x$; the second is given by repeatedly applying the Segre map; and the third is the quotient map.}
                \item \emph{Let $X\subset\pee^m$ and $Y\subset\pee^n$ be projective varieties.}
                    \emph{Then $\sigma_{m\times n}(X\times Y)\subset\pee^{mn+m+n}$ is a projective variety.}

                    This follows from the fact that, if $X=\van(F_1,\ldots,F_r)$ and $Y=\van(G_1,\ldots,G_s)$, then
                    \begin{equation*}
                        \sigma_{m,n}(X\times Y) = \Sigma_{m,n}\cap\van\big(\{F_k(z_{0j},\ldots,z_{mj}),G_\ell(z_{i0},\ldots,z_{in})\,\big|\,\text{all }i,j,k,\ell\}\big).
                    \end{equation*}
            \end{itemize}

        \subsection{Grassmannian, flags, and the Plcker embedding}

            \begin{itemize}
                \item The \textbf{Grassmannian of $d$-planes in $k^n$} $\mathrm{Gr}(d,n)$ is the set of all $d$-dimensional vector subspaces of $k^n$.
                \item $\pee^n=\mathrm{Gr}(1,n)$.
                \item \emph{We can identify $\mathrm{Gr}(d,n)$ with the set of all $(d\times n)$ rank-$d$ matrices modulo $\mathrm{GL}_k(d)$ by associating $V\in\mathrm{Gr}(d,n)$ with the matrix whose rows are any choice of basis for $V$.}
                \item The \textbf{Flag variety} $\mathrm{Flag}(d_1,\ldots,d_s,n)$ for $0\leqslant d_1<d_2<\ldots<d_s\leqslant n$ is the set of all $s$-tuples $(V_1,\ldots,V_s)$ where $V_i\subset k^n$ are such that $\dim V_i=d_i$ and $V_i\subset V_{i+1}$.
                    Such tuples are called \textbf{flags}.
                \item The \textbf{$d$th exterior product} $\Lambda^dV$ of a $k$-vector space $V$ is the vector space of dimension $\binom{\dim V}{d}$ generated by the symbols $v_{i_1}\wedge\ldots\wedge v_{i_d}$ where $i_1<\ldots<i_d$, and $\{v_{i_j}\}$ is a basis for $V$.
                    We extend the wedge symbol to all vectors by declaring it to be alternating ($v_i\wedge v_j=-v_j\wedge v_i$) and multilinear.
                \item The \textbf{Plcker map} is defined by
                    \begin{align*}
                        \mathrm{Gr}(d,n) &\hookrightarrow \pee(\Lambda^d k^n)\cong\pee^{\binom{n}{d}-1}\\
                        V &\mapsto k\cdot(v_1\wedge\ldots\wedge v_d)\qquad\text{where $\{v_i\}$ is a basis for $V$.}
                    \end{align*}
                    or equivalently, using the above identification as $(d\times n)$ rank-$d$ matrices modulo $\mathrm{GL}_k(d)$,
                    \begin{align*}
                        \mathrm{Gr}(d,n) &\hookrightarrow \pee^{\binom{n}{d}-1}\\
                        A&\mapsto[\text{all $d\times d$ minors of $A$}].
                    \end{align*}
            \end{itemize}

    \section{\protect\marginnote{\AG}[0pt]Coordinate rings and the Nullstellensatz}

        \subsection{Affine Nullstellensatz}

            \begin{itemize}
                \item The \textbf{radical} $\sqrt{I}$ of an ideal $I\triangleleft R$ is defined as $\{r\in R\mid r^k\in I\text{ for some }k\geqslant1\}$; an ideal $I$ is called \textbf{radical} if $\sqrt{I}=I$.
                \item \textbf{Affine Nullstellensatz:} \emph{Let $k$ be an algebraically closed field.}
                    \emph{Then}
                    \begin{enumerate}
                        \item \emph{maximal ideals of $\kon$ are of the form $(x_1-a_1,\ldots,x_n-a_n)=\ide(a)$, where $a=(a_1,\ldots,a_n)\in k^n$;}
                        \item \emph{if $J\subset\kon$ is a proper ideal then $\van(J)\neq\varnothing$;}
                        \item $\ide\van(I)=\sqrt{I}$.
                    \end{enumerate}
                \item \emph{Let $X$ be an affine variety.}
                    \emph{Then $\ide(X)$ is a prime ideal iff $X$ is irreducible.}
                \item \emph{$\van$ and $\ide$ form an inclusion reversing bijection}
                    \begin{align*}
                        \text{radical ideals in }\kon\quad&\leftrightarrows\quad\text{affine varieties in }\aff_k^n\\
                        \text{prime ideals} \quad&\leftrightarrows\quad \text{irreducible varieties}\\
                        \text{maximal ideals} \quad&\leftrightarrows\quad \text{points}
                    \end{align*}
                    \emph{where, by inclusion reversing, we mean that}
                    \begin{align*}
                        I\subseteq J&\implies\van(J)\subseteq\van(I)\\
                        X\subseteq Y&\implies\ide(Y)\subseteq\ide(X).
                    \end{align*}

                    \fbox{\emph{Work through the proof of this.}}
            \end{itemize}

        \subsection{Coordinate rings}

            \begin{itemize}
                \item \emph{Ideals $J\triangleleft R/I$ are in bijective correspondence with ideals $\tilde{I}\triangleleft R$ such that $J\subseteq\tilde{I}$.}
                \item The \textbf{coordinate ring} $A(X)$ of an affine variety $X\subseteq\aff^n$ is defined as
                \begin{equation*}
                    A(X)=\kon\Big|_X\cong\frac{\kon}{\ide(X)}.
                \end{equation*}
                \item Given a finitely-generated reduced $k$-algebra $R$ we define the \textbf{associated variety} $X_R$ as follows: let $a_1,\ldots,a_n$ generate $R$ and look at the surjective map $\varphi\colon\kon\epi R$ given by $x_i\mapsto a_i$.
                Then $\kon/\ker\varphi\cong R$, and $R$ is reduced, so $\ker\varphi$ must be radical, and we take $X_R=\van(\ker\varphi)\subseteq\aff^n$.
                \item A commutative ring with identity is said to be \textbf{reduced} if it has no \textbf{nilpotent elements}, i.e. elements $r\in R\setminus\{0\}$ such that $r^k=0$ for some $k\geqslant1$.
                \item \emph{$\kon/I$ is reduced iff $I$ is radical.}
                \item \emph{There is a contravariant equivalence of categories}
                    \begin{equation*}
                        \{\text{affine varieties and morphisms}\}\leftrightarrow\{\text{finitely-generated reduced $k$-algebras and homomorphisms}\}
                    \end{equation*}
                    \emph{In particular,}
                    \begin{enumerate}
                        \item \emph{$X\mapsto A(X)$ and $R\mapsto X_R$ are well defined and inverse to each other, i.e.}
                        \begin{itemize}
                            \item $X\cong Y\implies A(X)\cong A(Y)$\emph{;}
                            \item $R\cong S\implies X_R\cong X_S$\emph{;}
                            \item $X\cong X_{A(X)}$\emph{;}
                            \item $R\cong A(X_R)$\emph{;}
                        \end{itemize}
                        \item \emph{a morphism $F\colon X\to Y$ of affine varieties induces a $k$-algebra homomorphism $F^\#\colon A(Y)\to A(X)$, and $(F\circ G)^\#=G^\#\circ F^\#;$}
                        \item \emph{a $k$-algebra homomorphism $f\colon R\to S$ induces a morphism $f_\#\colon X_S\to X_R$ of affine varieties, and $(f\circ g)_\#=g_\#\circ f_\#$;}
                        \item $(\blank)_\#$ and $(\blank)^\#$ are inverses up to isomorphism, i.e. $(F^\#)_\#\cong F$ and $(f_\#)^\#\cong f$.
                    \end{enumerate}

                    The functors $(\blank)_\#$ and $(\blank)^\#$ act on morphisms as follows:
                    \begin{itemize}
                        \item Let $F\colon X\to Y$ and $g\in A(Y)$.
                            Define $F^\#g=g\circ F$, which is a polynomial since both $F$ and $g$ are.
                        \item Let $f\colon R\to S$ and choose representations
                            \begin{equation*}
                                R=\frac{k[x_1,\ldots,x_m]}{I}\quad\text{and}\quad S=\frac{k[y_1,\ldots,y_n]}{J}.
                            \end{equation*}
                            Let $F_i\in k[y_1,\ldots,y_n]$ be a polynomial representing $f(x_i)\in S$ and define $f_\#\colon\aff^n\to\aff^m$ by $a\mapsto(F_1(a),\ldots,F_m(a))$.
                            We claim that if $a\in\van(J)$ then $f_\#(a)\in\van(I)$, and that if $F_i$ and $F'_i$ are two representatives of $f(x_i)$ then $F_i(a)=F'_i(a)$.
                    \end{itemize}
                    From these definitions we see that, with $R,S$ as above, $a\in\aff^n$, and $g\in A(X_R)=R$,
                    \begin{align*}
                        (f_\#)^\#(g)(a) &= (g\circ f_\#)(a)\\
                        &= g\big(F_1(a),\ldots,F_m(a)\big)\\
                        &= f(g)(a)
                    \end{align*}
                    and similarly for $(F^\#)_\#$.
            \end{itemize}

        \subsection{Projective Nullstellensatz}

            \begin{itemize}
                \item A \textbf{graded ring} $R$ is a commutative ring of the form $R=\bigoplus_{d\geqslant0}R_d$, where each $R_d$ is a subgroup under addition, $R_d\cap R_e=\{0\}$ for $d\neq e$, and $R_dR_e\subseteq R_{d+e}$.
                \item An ideal $I\triangleleft R$ of a graded ring $R$ is \textbf{homogeneous} if any of the following equivalent conditions hold:
                \begin{itemize}
                    \item $I=\bigoplus_{d\geqslant0}(I\cap R_d)$;
                    \item $I$ can be generated by homogeneous elements.
                \end{itemize}
                \item \emph{A homogeneous ideal $I$ is prime iff for all \emph{homogeneous} $f,g\in I$, if $fg\in I$ then $f\in I$ or $g\in I$.}
                \item \emph{Sums, products, intersections, and radicals of homogeneous ideals are homogeneous.}
                \item \emph{If $R$ is graded and $I$ homogeneous then $R/I$ is graded.}
                \item \emph{If $X\subseteq\pee^n$ is a projective variety then}
                    \begin{equation*}
                        \ide(X)=\{F\in\kzn\mid F\text{ is homogeneous; }F(x)=0\text{ for all }x\in X\}
                    \end{equation*}
                    \emph{is a homogeneous ideal.}
                \item The \textbf{irrelevant ideal} is $(x_0,\ldots,x_n)\triangleleft\kzn$.
                \item \textbf{Projective Nullstellensatz:} \emph{Let $k$ be an algebraically closed field and $J\triangleleft\kzn$ a homogeneous ideal.}
                    \emph{Then}
                    \begin{enumerate}
                        \item \emph{$\van(J)=\varnothing$ iff $(x_0,\ldots,x_n)\subset\sqrt{J}$;}
                        \item \emph{if $\van(J)\neq\varnothing$ then $\ide\van(J)=\sqrt{J}$}
                    \end{enumerate}

                    This is a corollary of the affine Nullstellensatz, applied to the affine cone $\widehat{X}$.
                \item \emph{$\van$ and $\ide$ form an inclusion reversing bijection}
                    \begin{align*}
                        \text{proper homogeneous radical ideals in }\kon\quad&\leftrightarrows\quad\text{projective varieties in }\pee^n\\
                        \text{homogeneous prime ideals} \quad&\leftrightarrows\quad \text{irreducible varieties}\\
                        \text{irrelevant ideal }(x_0,\ldots,x_n) \quad&\leftrightarrows\quad \text{the empty set}
                    \end{align*}
                    \emph{where, by inclusion reversing, we mean that}
                    \begin{align*}
                        I\subseteq J&\implies\van(J)\subseteq\van(I)\\
                        X\subseteq Y&\implies\ide(Y)\subseteq\ide(X).
                    \end{align*}
                \item \emph{Let $X\subseteq\aff^n$ be an affine variety, and define $\tilde{I}\triangleleft\kon$ to be the ideal generated by the homogenisation of \emph{all of the} elements of $\ide(X)$.}
                    \emph{Then $\overline{X}=\van(\tilde{I})\subseteq\pee^n$ is the projective closure of $X=\overline{X}\cap U_0$.}

                    \fbox{\emph{Work through the proof of this (see p. 26 of lecture notes).}}
            \end{itemize}

        \subsection{Homogeneous coordinate rings}

            \begin{itemize}
                \item The \textbf{homogeneous coordinate ring $S(X)$ of a projective variety} $X\subset\pee^n$ is the coordinate ring of its cone: $S(X)=\kzn/\ide(X)=A(\widehat{X})$.
                \item \emph{The projective Nullstellensatz defines a bijection}
                    \begin{gather*}
                        \{\text{projective varieties with an embedding into $\pee^n$}\}\\
                        \leftrightarrow\\
                        \{\text{reduced f.g. $k$-algebras generated by $n+1$ degree-$1$ elements of with a representation}\}
                    \end{gather*}
            \end{itemize}

        \subsection{Maximal spectrum}

            \begin{itemize}
                \item Let $R$ be a finitely-generated reduced $k$-algebra, i.e. $R=A(X)$ for some affine variety $X\subseteq\kon$.
                Define the \textbf{maximal spectrum} $\mathrm{mSpec}\,R=\{m\triangleleft R\mid m\text{ maximal}\}$.
                \item \emph{$\mathrm{mSpec\,}R=X=X_R$ as sets under the identifications $a\mapsto\mathfrak{m}=\{f\in R\mid f(a)=0\}$ and $m\mapsto\van(m)$.}
                \item The \textbf{Zariski topology on} $\mathrm{mSpec\,}R$ is the topology whose closed sets are the $\van(I)=\{m\in\mathrm{mSpec\,}R\mid I\subseteq m\}$ for $I\triangleleft R$, where we think maximal ideals as points in $X=\van\ide(X)$ by using the affine Nullstellensatz.
                \item \emph{$\mathrm{mSpec\,}R\cong X_R$ as topological spaces.}
            \end{itemize}

    \section{\protect\marginnote{\AG}[0pt]Categorical quotients}

        \subsection{Definitions and theorems}

            \begin{itemize}
                \item An \textbf{affine algebraic group} is an affine variety $G$ with a group structure on its points, such that multiplication $\mu\colon G\times G\to G$ and inversion $(\blank)^{-1}\colon G\to G$ are morphisms of affine varieties.
                \item An \textbf{action of $G$ on $X$}, where $G$ is an affine algebraic group and $X$ an affine variety, is a morphism of affine varieties $G\times X\to X$ with the usual properties for a group acting on a set.
                \item Let $G$ be an affine algebraic group acting on an affine variety $X$, and let $Y$ an arbitrary affine variety.
                    Then a map $F\colon X\to Y$ is a \textbf{categorical quotient} if
                    \begin{enumerate}
                        \item $F$ is a morphism of affine varieties;
                        \item $F$ is constant on the orbits of the group action;
                        \item if $F'\colon X\to Y'$ is another morphism constant on the orbits then $F'$ factors uniquely through $F$.
                    \end{enumerate}
                \item Given an action of $G$ on $X$ the \textbf{induced $G$-action $(\blank)^g$ on $A(X)$} is given by \mbox{$f^g(x)=f(gx)$}.
                \item An affine algebraic group is said to be \textbf{reductive} if every representation of $G$ is reducible, i.e. is the direct sum of irreducible representations.
                \item \emph{Let $G$ be a reductive algebraic group and $X$ an affine variety that admits a $G$-action.}
                    \emph{If $F\colon X\to Y$ is a morphism of affine varieties that is constant on the $G$-orbits then $F^\#\colon A(Y)\to A(X)^G$ is surjective, i.e. the image is the $G$-invariant subring of $A(X)$.}
                \item A $G$-action on an affine variety $X$ is said to be \textbf{linear} if $g(x+y)=g(x)+g(y)$ for all $x,y\in X$.
                \item \emph{If $G$ is reductive and acts linearly on $X$ then}
                    \begin{enumerate}
                        \item \emph{$A(X)^G$ is a finitely-generated reduced $k$-algebra;}
                        \item \emph{the map $\alpha_\#\colon X\to\mathrm{mSpec}\,\big(A(X)^G\big)$ associated to the embedding $\alpha\colon A(X)^G\hookrightarrow A(X)$ is a categorical quotient of affine varieties.}
                    \end{enumerate}

                    The first statement comes without proof.
                    To show the second statement, we first show that $\alpha_\#$ is constant on orbits.
                    Assume not, so that $\alpha_\#(x)\neq\alpha_\#(gx)$ for some $g,x$.

                    \emph{Lemma:} \emph{if $a,b\in Y$ are points of an affine variety and $f(a)=f(b)$ for all $f\in A(Y)$ then $a=b$.}
                    \emph{Proof:} If $a\neq b$ then $a_i\neq b_i$ for some $i$ and so $x_i(a)\neq x_i(b)$.

                    So there exists an $f\in A(\mathrm{mSpec}\,(A(X)^G))=A(X)^G$ such that $f(\alpha_\#(x))\neq f(\alpha_\#(gx))$.
                    But then
                    \begin{equation*}
                        \alpha(f)(x) = (\alpha_\#^\# f)(x) = f(\alpha_\#(x)) \neq f(\alpha_\#(gx)) = (\alpha_\#^\# f)(gx) = \alpha(f)(gx)
                    \end{equation*}
                    which contradicts the fact that $\alpha(f)=f$ (since $\alpha$ is an embedding).

                    For the universality, assume that $h\colon X\to Y'$ is constant on orbits.
                    We want to find $\tilde{h}\colon\mathrm{mSpec}\,(A(X)^G)\to Y'$ such that $\tilde{h}\circ\alpha_\#=h$.
                    If $f\in A(Y')$ then $h^\#f(x)=f(h(x))=f(h(gx))=h^\#f(gx)$ for all $g,x$ since $h$ is $G$-invariant.
                    Thus $h^\#f\in A(X)^G$, and so $\alpha\circ h^\#\colon A(Y')\to A(X)$, which induces a morphism that agrees with $h\colon X\to Y'$.
            \end{itemize}

        \subsection{Examples}

            \begin{enumerate}
                \item Some affine algebraic groups include
                    \begin{itemize}
                        \item finite groups (discrete points on a variety)
                        \item $\mathrm{SL}_n(k)=\van(\det-1)\subset\aff^{n^2}$
                        \item $k^\times=k\setminus\{0\}$ thought of as $\van(xy-1)\subset\aff^2$
                        \item $k\cong\aff^1$ with an additive structure
                    \end{itemize}
                \item Some reductive algebraic groups include $k^\times$ and $\mathrm{SL}_n(k)$; the additive group $\cc$ is \emph{not} reductive.
                \item $k^\times$ acting on $\aff^2$ by $t(a,b)=(a/t,bt)$.
                    The induced $k^\times$-action on $k[x,y]=A(\aff^2)$ is $t\cdot x=tx$ and $t\cdot y=t^{-1}y$.
                    Then $k[x,y]^{k^\times}=k[xy]\cong k[z]$ with the map $k[z]\hookrightarrow k[x,y]$ being given by $z\mapsto xy$.
                    This defines the quotient map $\aff^2\to\aff^1$ by $(a,b)\mapsto ab$, and the orbits are
                    \begin{itemize}
                        \item $\{xy=s\neq0\}\mapsto s$
                        \item $\{(a,0)\mid a\neq0\}\mapsto0$
                        \item $\{(0,b)\mid b\neq0\}\mapsto0$
                        \item $\{(0,0)\}\mapsto0$
                    \end{itemize}
                    Thus the quotient map is not injective on orbits, i.e. the categorical quotient is \emph{not} simply the set of orbits.
                    In fact, two orbits map to the same point iff the closure of the orbits has a non-trivial intersection.
            \end{enumerate}

    \section{\protect\marginnote{\AG}[0pt]Primary decomposition of ideals}

        \subsection{Definitions and theorems}

            Let $R$ be a commutative ring (with unity).

            \begin{itemize}
                \item Given $x\in R$ we define the \textbf{annihilator of $x$} as $\mathrm{Ann}(x)=\{r\in R\mid rx=0\}$
                \item A \emph{proper} ideal $Q\triangleleft R$ is called \textbf{primary} if, for all $f,g\in R$ if $fg\in Q$ then $f\in Q$ or $g^n\in Q$ for some $n\geqslant0$, or equivalently if all zero divisors of $R/Q$ are nilpotent.
                \item \emph{If $Q$ is a primary ideal then $\sqrt{Q}$ is prime (and in fact is the smallest prime ideal containing $Q$).}
                \item Given a prime ideal $P\triangleleft R$, a \emph{primary} ideal $Q\triangleleft R$ is called \textbf{$P$-primary} if $P=\sqrt{Q}$.
                \item \emph{If $Q_1$ and $Q_2$ are both $P$-primary then $Q_1\cap Q_2$ is $P$-primary.}
                \item A \textbf{primary decomposition of an ideal} $I\triangleleft R$ is an equality $I=Q_1\cap\ldots\cap Q_k$ where each $Q_i$ is primary.
                \item Given a primary decomposition $I=\bigcap_{i\in J}Q_i$ we say that the $Q_i$ are \textbf{irredundant} if no smaller subcollection $\{Q_i\}_{i\in J'}$ for $J'\subsetneq J$ is such that $I=\bigcap_{i\in J'}Q_i$.
                \item A primary decomposition is called \textbf{reduced} if the $P_i=\sqrt{Q_i}$ are all distinct \emph{and} the $Q_i$ are irredundant.
                \item Given a \emph{reduced} primary decomposition $\{Q_i\}_{i\in J}$ we call the prime ideals $P_i=\sqrt{Q_i}$ the \textbf{associated primes of $I$}.
                \item The \textbf{minimal} (or \textbf{isolated}) \textbf{prime ideals of $I$} are the minimal associated primes of $I$ with respect to inclusion; the other associated primes of $I$ are called the \textbf{embedded prime ideals of $I$}.
                \item The $\van(P_i)\subseteq\van(I)$ for $P_i$ the associated primes of $I$ are called the \textbf{associated reduced components of} $\van(I)$, and such a component is called \textbf{embedded} if $\van(P_i)\neq\van(I)$.
                \item \emph{The minimal prime ideals of $I$ are minimal amongst all prime ideals containing $I$, and all such minimal prime ideals are found as associated primes of $I$.}
                \item \textbf{Lasker-Noether theorem:} \emph{If $R$ is a Noetherian ring then every ideal has a primary decomposition, and this decomposition can be reduced.}

                    Say that an ideal $I\triangleleft R$ is \textbf{indecomposable} if $[I=J\cap K\implies I=J\text{ or }I=K]$ for any ideals $J,K$.
                    Note that all prime ideals are indecomposable.

                    \emph{Claim 1:} Every ideal $I\triangleleft R$ is the intersection of some indecomposable ideals.

                    \emph{Proof 1:} Let $\mathcal{S}$ denote the set of ideals \emph{not} expressible as the intersection of indecomposable ideals, and assume (for contradiction) that $\mathcal{S}\neq\varnothing$.
                    By Noetherian-ness, there is a maximal element $I\in\mathcal{S}$, and so there exist \emph{strictly larger} ideals $J,K$ such that $I=J\cap K$.
                    But then $J,K\not\in\mathcal{S}$, and so we can write them as an intersection of indecomposable ideals, and thus so too with $I$.

                    \emph{Claim 2:} Every indecomposable ideal is primary.

                    \emph{Proof 2:} Note that $I\triangleleft R$ is indecomposable iff $0\triangleleft R/I$ is indecomposable (and similarly for primary ideals), so it is enough to prove that if $0\triangleleft R$ is indecomposable then it is primary.
                    So let $x,y\in R$ with $xy=0$.
                    Then $y\in\mathrm{Ann}(x)$, and we have the chain $\mathrm{Ann}(x)\subset\mathrm{Ann}(x^2)\subset\ldots$, which eventually stabilises at $\mathrm{Ann}(x^n)$ for some $n$ by Noetherian-ness.
                    But $(x^n)\cap(y)=0$, so if $0$ is indecomposable then $x^n=0$ or $y=0$.
                    (To see that $(x^n)\cap(y)=0$ let $a\in(x^n)\cap(y)$ so that $a=cy=dx^n$, so that $ax=cxy=0$ and $0=ax=dx^{n+1}$, so $d\in\mathrm{Ann}(x^{n+1})=\mathrm{Ann}(x^n)$, so $a=dx^n=0$.)
                    
                    As for the reduction statement, note that if $\sqrt{Q_i}=\sqrt{Q_j}=P_i$ then we can replace them both by $Q_i\cap Q_j$, since this is also $P_i$-primary.
                \item \textbf{Uniqueness theorem:} \emph{The associated prime ideals of $I$ are uniquely determined.}

                    Note that $P_1,\ldots,P_k$ are exactly the prime ideals of $R$ which are the annihilator of some point in $R/I$, i.e. $P_i=\mathrm{Ann}(x_i)$, and are thus uniquely determined by $I$.
            \end{itemize}

        \subsection{Examples}

            \fbox{\emph{Work through some examples (see the lecture notes for some).}}

    \section{\protect\marginnote{\AG}[0pt]Discrete invariants}

        \subsection{Dimension}

            \subsubsection{Geometric dimension}

                Let $X$ be a variety (affine or projective).

                \begin{itemize}
                    \item A \textbf{chain of length $m$} is a \emph{strict} chain of inclusions $X_0\subsetneq X_1\subsetneq\ldots\subsetneq X_m\subseteq X$ where each $X_i$ is \emph{irreducible}.
                        Note that we can always start with $X_0=\{p\}$ for some point $p\in X$, and if $X$ is irreducible then we can end with $X_m=X$.
                    \item The \textbf{local dimension $\dim_p X$ of $X$ at a point $p\in X$} is the maximum over all lengths of chains starting with $X_0=\{p\}$.
                    \item \emph{The local dimension of $X$ at $p$ is equal to the dimension of the irreducible component of $X$ containing $p$.}
                    \item The \textbf{dimension $\dim X$ of $X$} is the maximum over all lengths of chains, or equivalently the maximum over the local dimension at each point, i.e. $\dim X=\max_{p\in X}\dim_p X$.
                    \item We say that $X$ has \textbf{pure dimension} if $\dim_p X=\dim_q X$ for all points $p,q\in X$.
                    \item The \textbf{codimension $\codim_X Y$ of an \emph{irreducible} subvariety $Y\subset X$} is the maximum over all lengths of chains starting with $X_0=Y$ and \emph{not ending with $X$}.
                \end{itemize}

                \begin{enumerate}
                    \item \emph{An affine variety $X=\van(I)\subset\aff^n$ is a finite set of points iff $A(X)$ is a finite-dimensional $k$-vector space; and if so then $|X|=\dim_k A(X)$, i.e. the dimension of $A(X)$ as a $k$-vector space.}

                        The proof of this uses the primary decomposition theorem and the Chinese remainder theorem
                    \item \emph{If $X\subseteq Y$ are both varieties (affine or projective) then $\dim X\leqslant\dim Y$.}
                        \emph{Further, if both $X$ and $Y$ are irreducible and $X\subsetneq Y$ then $\dim X=\dim Y$ (and, in particular, if $\dim X=\dim Y$ then $X=Y$).}
                \end{enumerate}

            \subsubsection{Algebraic dimension}

                Let $R$ be a commutative ring (with identity).

                \begin{itemize}
                    \item A \textbf{chain of length $m$} is a \emph{strict} chain of inclusions $\prid_m\subsetneq\prid_{m-1}\subsetneq\ldots\subsetneq\prid_1\subsetneq\prid_0\subset R$ where each $\prid_i\triangleleft R$ is a prime ideal.
                        Note that we can always start with a maximal ideal $\maid$, and if $R$ is an integral domain then we can always end with $\prid_m=\{0\}$.
                    \item \emph{If $R$ is Noetherian then the descending chain condition holds for \emph{prime} ideals.}
                    \item The \textbf{height $\height(\prid)$ of a prime ideal} is the maximal length of a chain with $\prid_0=\prid$.
                    \item The \textbf{Krull dimension $\dim R$ of a ring $R$} is the maximal height over all \emph{maximal} ideals.
                    \item The \textbf{height $\height(I)$ of an arbitrary ideal $I\triangleleft R$} is the minimum over the heights of all prime ideals $\prid$ containing $I$.
                \end{itemize}

                \begin{enumerate}
                    \item $\height(\prid)=\dim R_\prid$
                    \item $\height(I)=\codim_{\mathrm{Spec}\,R}\van(I)$.
                    \item \emph{The minimal prime ideals are exactly those of height zero.}
                    \item \textbf{Krull's principal ideal theorem:} \emph{If $R$ is Noetherian and $f\in R$ is neither a unit nor a zero-divisor then $\height((f))=1$.}
                    \item \textbf{Krull's height theorem:} \emph{If $R$ is Noetherian and $(f_1,\ldots,f_m)\neq R$ then $\height((f_1,\ldots,f_m))\leqslant m$.}
                        \emph{In particular, $\height(\prid)$ is \emph{at most} the number of generators of $\prid$, and conversely if $\prid$ is a prime ideal of height $m$ then $\prid$ is a minimal prime ideal over some ideal generated by $m$ elements.}
                \end{enumerate}

            \subsubsection{Equivalence of geometric and algebraic dimension}

                \begin{enumerate}
                    \item \emph{If $X\subset\aff^n$ is an affine variety then $\dim X=\dim A(X)$.}
                    \item \emph{If $X\subset\pee^n$ is a projective variety then $\dim X$ is equal the maximal length of chains of \emph{homogeneous} prime ideals which do \emph{not} contain the irrelevant ideal.}
                    \item \emph{For a maximal length chain $\{\prid_i\}$ of (homogeneous) prime ideals,}
                        \begin{equation*}
                            \height(\prid_i)=\codim\van(\prid_i)=n-\dim\van(\prid_i)
                        \end{equation*}
                        \emph{where $n$ is the dimension of the ambient space (either $\aff^n$ or $\pee^n$).}
                    \item \emph{If $X\subset\aff^n$ is an irreducible affine variety then $\dim X=n-1$ iff $X=\van(f)$ for some irreducible $f\in\kon$.}
                        \emph{(The corresponding statement for projective varieties holds, with $f$ homogeneous.)}

                        The fiddly direction is assuming that $\dim X=n-1$: this implies that $\ide(X)\neq(0)$ and so there exists some non-zero $f\in\ide(X)$, which we can assume to be irreducible, and thus prime ($R$ is a UFD), since $\ide(X)$ is prime ($X$ is irreducible).
                        Then $X\subseteq\van(f)\subsetneq\aff^n$, so by a dimension argument we see that $X=\van(f)$.
                \end{enumerate}

        \subsection{Degree}

            \subsubsection{Definitions and theorems}

                Let $X\subset\pee^n$ be a projective variety.

                \begin{itemize}
                    \item A \textbf{linear subvariety of $\pee^n$} is a projectivisation $L=\pee(\widehat{L})$ for some vector subspace $\widehat{L}\subset\aff^{n+1}$.
                    \item The \textbf{degree $\deg(X)$} of a projective variety $X$ is the maximum number of intersections of $X$ with $L$ over all linear subvarieties $L\subset\pee^n$ with $\dim L+\dim X=n$, i.e. $\widehat{L}\in\mathrm{Gr}(n+1-\dim X,n+1)$.
                    \item \emph{This maximum is attained for `almost all' $L$, i.e. the $L$ where one gets fewer intersections (or infinitely many) form a proper closed subset of the Grassmannian.}
                    \item \emph{The degree of a projective variety depends on its embedding.}
                    \item The \textbf{degree $\deg(Y)$} of an \emph{affine} variety is defined to be the degree $\deg(\overline{Y})$ of the projective closure of $Y\subset U_0\subset\pee^n$.
                    \item \emph{Let $F\in\kzn$ be homogeneous of degree $d$ with no repeated factors.}
                        \emph{Then $\deg\van(F)=d$.}

                        Let $L$ be any line in $\pee^n$ and $X=\van(F)$.
                        Then $X\cap L=\van(F|_L)\subset L\cong\pee^1$.
                        After a linear change of coordinates we can assume that $L=\van(x_2,\ldots,x_n)$, and so $F|_L$ is generally a degree $d$ polynomial in $x_0,x_1$, and so generally has $d$ zeros.

                    \item \textbf{Weak Bzout's Theorem:} \emph{Let $X,Y\subset\pee^n$ be projective varieties of \emph{pure dimension} with $\dim(X\cap Y)=\dim X+\dim Y-n$.}
                        \emph{Then $\deg(X\cap Y)\leqslant(\deg X)(\deg Y)$.}
                \end{itemize}

            \subsubsection{Examples}

                \begin{enumerate}
                    \item A hyperplane $H$ has $\deg H=1$, e.g. $\van(x_0)\cap\van(x_2,\ldots,x_n)=\{[0:1:0:\ldots:0]\}$.
                    \item $\pee^1\subset\pee^1$ has $\deg\pee^1=1$, by taking $L$ to be any point.
                    \item Say $X=\van(xz-y^2)\subset\pee^2$.
                        Then the linear subvarieties $L=\van(ax+by+cz)$ are in bijection with planes $\widehat{L}\subset\aff^3\in\mathrm{Gr}(2,3)$, and these are in bijection with lines normal to the plane, which are of the form $[a:b:c]\in\pee^2$.
                        Suppose that $c\neq0$, then $x\neq0$ (otherwise $y=0$, so $z=0$, and there are no intersections), so scale to $x=1$.
                        If $b\neq0$ also then $y=\frac{-cz-a}{b}$ and $z=y^2$ gives two intersections if the discriminant $b^2(b^2-4ac)$ is non-zero.
                        So $\deg X=2$, and the set of `bad' $L=[a:b:c]\in\pee^2$ forms a subset of $\van(c)\cup\van(b)\cup\van(b^2(b^2-4ac))\subsetneq\van(bc(b^2-4ac))$.
                    \item The Veronese embedding $\van(xz-y^2)\cong\pee^1$ is such that $\deg\van(xz-y^2)=2$ but \mbox{$\deg\pee^1=1$}.
                        This shows that the degree is dependent on the embedding.
                \end{enumerate}

        \subsection{Hilbert function}

            Let $X\subset\pee^n$ be a projective variety.

            \begin{itemize}
                \item Recall that $S(X)=A(\widehat{X})=\bigoplus_{m\geqslant0} S(X)_m$, where $S(X)_m=\kzn/\ide(X)_m$ is the degree-$m$ part.
                \item Define the \textbf{Hilbert function $h_X$ of $X$} by
                    \begin{equation*}
                        h_X(m)=\dim_k S(X)_m=\binom{m+n}{m}-\dim\ide(X)_m
                    \end{equation*}
                    for $m\in\nn$.
                \item \emph{There exists $p_X\in k[x]$ and $m_0\in\nn$ such that for all $m\geqslant m_0$ we have $h_X(m)=p_X(m)$.}
                    \emph{This polynomial $p_X$ is called the} \textbf{Hilbert polynomial of $X$}.
                \item \emph{The Hilbert polynomial depends on the embedding of $X$.}
                \item \emph{The leading term of the Hilbert polynomial is $\left(\frac{\deg X}{\dim X!}\right)\cdot m^{\dim X}$.}
                \item \emph{If $X,Y\subset\pee^n$ are linearly equivalent then $p_X=p_Y$.}
                \item A \textbf{flat family of varieties} is a projective variety $X\subset\pee^n$ together with a surjective morphism $\pi\colon X\epi B$ where $B$ is an irreducible projective (or quasi-projective) variety and the fibres $X_b=\pi^{-1}(b)$ all have the same Hilbert polynomial.
            \end{itemize}

    \section{\protect\marginnote{\AG}[0pt]Quasi-projective varieties and regular maps}

        \subsection{Quasi-projective varieties}

            \begin{itemize}
                \item A \textbf{quasi-projective variety $X\subset\pee^n$} is any \emph{open} subset of a projective variety, i.e. $X$ is \textbf{locally closed}, i.e. $X$ is the intersection of an open and a closed subset of $\pee^n$, i.e.
                    \begin{equation*}
                        X=(\pee^n\setminus\van(J))\cap\van(I).
                    \end{equation*}
                    Note that this includes affine varieties ($X=\aff^n\cap\overline{X}$) and projective varieties ($X=\pee^n\cap X$).
                \item A \textbf{morphism of quasi-projective varieties $F\colon X\to Y$} is a map given locally by $F(p)=[F_0(p):\ldots:F_n(p)]$ for homogeneous polynomials $F_i$ of the \emph{same} degree.
                \item \emph{Let $X,Y\subset\aff^n$ be quasi-projective varieties.}
                    \emph{If there are mutually inverse polynomial maps $X\leftrightarrows Y$ then $X\cong Y$ as quasi-projective varieties.}
                    \emph{(The converse is not necessarily true.)}
                \item A quasi-projective variety $X$ is \textbf{affine} if it is isomorphic (as a quasi-projective variety) to an affine variety.
                \item \emph{Let $X\subset\aff^n$ be an affine variety and $f\in A(X)$.}
                    \emph{Then $D_f=X\setminus\van(f)$ is an affine quasi-projective variety, with}
                    \begin{equation*}
                        A(D_f)=A(X)_f=A(X)\left[\frac{1}{f}\right]
                    \end{equation*}
                    \emph{i.e. the localisation at $f$.}

                    Define $\widetilde{I}=(\ide(X),x_{n+1}f-1)\triangleleft k[x_1,\ldots,x_n,x_{n+1}]$.
                    Then $\van(\widetilde{I})\subset\aff^{n+1}$ is affine with $A(\van(\widetilde{I}))=A(X)[x_{n+1}]/(x_{n+1}f-1)=A(X)_f$.
                    We claim that $\varphi\colon D_f\to\van(\widetilde{I})$ is an isomorphism of quasi-projective varieties, where $\varphi\colon a=(a_1,\ldots,a_n)\mapsto\left(a_1,\ldots,a_n,\frac{1}{f(a)}\right)$ with $\varphi^{-1}\colon(b_1,\ldots,b_n,b_{n+1})\mapsto(b_1,\ldots,b_n)$.
                    Embed $D_f\hookrightarrow\pee^n$ via $(a_1,\ldots,a_n)\mapsto[1:a_1:\ldots:a_n]$ and $V(\widetilde{I})\hookrightarrow\pee^{n+1}$ via $(b_1,\ldots,b_{n+1})\mapsto[1:b_1:\ldots:b_{n+1}]$.
                    Then $\varphi$ is the restriction of $F\colon\pee^n\to\pee^{n+1}$ given by $F\colon[a_0:\ldots:a_n]\mapsto[a_0\tilde{f}(a):\ldots:a_{n-1}\tilde{f}(a):a_0^{1+\deg f}]$, where $\tilde(f)(a)=a_0^{\deg f}f\left(\frac{a_1}{a_0},\ldots,\frac{a_n}{a_0}\right)$.
                    \item \emph{Every quasi-projective variety has a finite open cover by affine quasi-projective subvarieties.}
                        \emph{In particular, the affine open subsets form a basis for the topology.}

                        Say that $X\subset\pee^n$ is quasi-projective, and so of the form $X=\van(F_1,\ldots,F_r)\setminus\van(G_1,\ldots,G_s)$.
                        We only need to check the claim on the open $U_i\cap X$.
                        But $U_0\cap X=\van(f_1,\ldots,f_r)\setminus\van(g_1,\ldots,g_s)$, where $f_i(a)=F_i(1,a)$ and similarly for $g_i$, i.e. $f_i=F_i|_{x_0=1}$.
                        Then $U_0\cap X=\bigcup_j\van(f_1,\ldots,f_r)\setminus\van(g_j)=\bigcup_j (D_{g_j}\cap\van(f_1,\ldots,f_r))$.
            \end{itemize}

        \subsection{Regular functions}

            Let $X$ be an affine variety and $U\subset X$ an open subset.

            \begin{itemize}
                \item A function $f\colon U\to k$ is \textbf{regular at a point $p\in U$} if there exists an open set $W\subset U$ containing $p$ and such that $f=\frac{g}{h}$ on $W$ for some $g,h\in A(X)$ with $h(w)\neq0$ for any $w\in W$ (or equivalently just $h(p)\neq0$).
                \item A function $f\colon U\to k$ is \textbf{regular} if it is regular at each $p\in U$.
                    \textbf{We write} $\mathcal{O}_X(U)$ to denote the collection of regular functions on $U$.
                \item If $X$ is instead a \emph{quasi-projective variety} then a map $F\colon U\to k$ is \textbf{regular at a point $p\in U$} if there exists some \emph{affine open} $W\subset U$ containing $p$ with $F|_W$ regular at $p$.
                    If $F$ is regular at each $p\in U$ then we say that it is \textbf{regular}.
                \item \emph{Let $X$ be an affine variety.}
                    \emph{Then $\mathcal{O}_X(X)=A(X)$.}

                    (We only prove the case when $X$ is irreducible.)
                    Clearly if $f\in A(X)$ then $f=\frac{f}{1}$ on all of $X$, so it is regular.
                    Let $f\in\mathcal{O}_X(X)$, so that for all $p\in X$ there exists open $U_p\subset X$ containing $p$ with $f=\frac{g_p}{h_p}$ with $h_p\neq0$ on $U_p$.
                    We can take $U_p=D_{F_p}$ for some $F_p\in A(X)$ (since these form a basis), and since $X$ is compact (by the Hilbert basis theorem) we have a finite subcover $D_{F_{p_1}}\cup\ldots\cup D_{F_{p_m}}$.
                    (Write $F_i$ to mean $F_{p_i}$, similarly for $f_i,g_i,D_i$, etc.)
                    On $D_i\cap D_j$ we have $g_ih_j=g_jh_i$.
                    Since $X$ is irreducible, $D_i\cap D_j\subset X$ is a dense open subset, and so $X=\overline{D_i\cap D_j}\subset\van(g_ih_j-g_jh_i)$.
                    Thus $g_ih_j=g_jh_i$ on all of $X$.
                    But at each point $p\in X$ there is at least one $h_i$ that is non-zero, and so $\van(h_1,\ldots,h_m)=\varnothing$.
                    So, by the Nullstellensatz, $(h_1,\ldots,h_m)=(1)$, thus $1=\sum\alpha_i h_i$ for some $\alpha_i\in A(X)$.
                    Then $f|_{D_j}=1\cdot\frac{g_j}{h_j}=\sum_i\alpha_i h_i\frac{g_j}{h_j}=\sum_i\alpha_i h_j\frac{g_i}{h_j}=\sum_i\alpha_i g_i\in A(X)$.
                    So $f=\sum_i\alpha_i g_i\in A(X)$ on all of $X$.

                \item \emph{Let $X\subset\aff^n$ be an affine variety and $D_h\subset X$ for some $h\in A(X)$.}
                    \emph{Then $\mathcal{O}_X(D_h)=A(X)[\frac{1}{h}]\cong A(X)_h$.}

                \item Let $X,Y$ be quasi-projective varieties.
                    A map $F\colon X\to Y$ is a \textbf{regular map} if for all $p\in X$ there exist open affine subvarieties $U\subset X$ and $V\subset Y$ with $p\in U$ and $F(p)\in V$ such that $F(U)\subset V$ and $F|_U\colon U\to V$ is defined by regular functions.
                \item \emph{A map $F\colon X\to Y$ between quasi-projective varieties is a regular map iff it is a morphism of quasi-projective varieties.}

                    For an affine open $U\subset X$ there is an affine variety $Z\subset\aff^n$ such that $U\cong Z$.
                    Then it can be shown that $\mathcal{O}_X(U)\cong\mathcal{O}_Z(Z)=A(Z)$.
                    Therefore a map defined by regular functions is locally a polynomial map.

                \item For a quasi-projective variety $X$, the \textbf{ring of germs $\mathcal{O}_{X,p}$ of regular functions at $p$}, or the \textbf{stalk of $\mathcal{O}_X$ at $p$}, is the set of pairs $(f,U)$, where $U\subset X$ is open and contains $p$, and $f\colon U\to k$ is regular at $p$, modulo the equivalence relation $(f,U)\sim(f',U')$ if $f|_W=f'|_W$ for some open $W\subset U\cap U'$ containing $p$.
                \item A morphism $F\colon X\to Y$ of quasi-projective varieties \textbf{induces a ring homomorphism on stalks}, denoted $F_p^*\colon\mathcal{O}_{Y,F(p)}\to\mathcal{O}_{X,p}$ given by $(g,V)\mapsto\big(F^*g,F^{-1}(V)\big)$ where $F^*\colon\mathcal{O}_Y(V)\to\mathcal{O}_X\big(F^{-1}(V)\big)$ is given by $F^*g=g\circ F$.
                \item \emph{If $F,G\colon X\to Y$ are such that $F_p^*=G_p^*$ for all $p\in X$ then $F=G$.}
            \end{itemize}

    \section{\protect\marginnote{\AG}[0pt]Function fields and rational maps}

        \subsection{Function fields}

            \begin{itemize}
                \item For an \emph{irreducible affine} variety $X\subset\aff^n$, since $A(X)$ is an integral domain, we can define the \textbf{function field} $k(X)$ as the field of fractions of the coordinate ring, i.e. $\{\frac{g}{h}\mid g,h\in A(X)\}/\sim$, where $\frac{g}{h}\sim\frac{g'}{h'}$ if $gh'=g'h$.
                \item \emph{Let $U,U'\subset X$ be \emph{non-empty} affine opens in an \emph{irreducible} affine variety $X$.}
                    \emph{Then, for all \emph{non-empty} basic opens $D_h\subset U\cap U'$, we have that $k(U)\cong k(D_h)\cong k(U')$.}
                \item For an \emph{irreducible quasi-projective} variety $X$ and a \emph{non-empty} affine open $U\subset X$ we \textbf{define} $k(X)=k(U)$.
                    This is independent of the choice of $U$, by the above lemma.
                \item For an \emph{irreducible affine variety} $X$ we have the following relations of rings inside the function field:
                    \begin{equation*}
                        A(U) = \mathcal{O}_X(U) = \bigcap_{D_h\subset U}\mathcal{O}_X(D_h) = \bigcap_{p\in U}\mathcal{O}_{X,p} \quad\subset\quad \mathcal{O}_{X,p} = A(X)_{\mathfrak{m}_p} \quad\subset\quad A(X)_{(0)} = k(X).
                    \end{equation*}
            \end{itemize}

        \subsection{Rational maps}

            \begin{itemize}
                \item For an \emph{irreducible quasi-projective} variety $X$ and an arbitrary quasi-projective variety $Y$, a map $f\colon X\ratmap Y$ is called a \textbf{rational map} if it is defined on some non-empty open subset of $X$ and is regular where it is defined.
                    We identity rational maps which agree on some non-empty open subset, and often write them as an equivalence class of a pair: $f=[(F,U)]$, where $F\colon U\to Y$ is a regular map, and so we can always assume that $F\colon U\to V\subset Y$ is \emph{polynomial} between affine opens $U,V$.
                    Note that rational maps may not necessarily compose.
                \item A \textbf{rational function} is a rational map $f\colon X\ratmap\aff^1$.
                \item Note that if $X$ is an affine variety then $f\in A(X)$ is simply a rational function $f\colon X\ratmap\aff^1$.
                \item \emph{Let $X$ be an irreducible quasi-projective variety.}
                    \emph{Then $k(X)\cong\{\text{rational functions on $X$}\}$}

                    Restricting to a non-empty open affine in $X$ we may assume that $X$ is an irreducible affine variety.
                    We can pick an arbitrarily small subset $D_h\subset U\subset X$ of the open subset on which our rational function $f=\frac{g}{h}\in k(D_h)$ is defined.
                    But we've already shown that $\frac{g}{h}\in k(D_h)\cong k(X)$ is uniquely defined, and is independent of the choice of $D_h$.

                \item A rational map $f=[(F,U)]\colon X\ratmap Y$ is \textbf{dominant} if the image $F(U)\subset Y$ is dense.
                \item A \textbf{birational equivalence} $f\colon X\ratmap Y$ is a dominant rational map between quasi-projective varieties which has a rational inverse, i.e. there exists a rational map $g\colon Y\ratmap X$ such that $f\circ g=\id_Y$ and $g\circ f=\id_X$, where equality means equality on some \emph{non-empty} open subset.
                    We say that such an $X,Y$ are \textbf{birational}, and write $X\simeq Y$.
                \item A quasi-projective variety $X$ is \textbf{rational} if it is birational to $\aff^n$ for some $n$.
                \item \emph{Let $X,Y$ be \emph{irreducible affine} varieties.}
                    \emph{Then a rational map $f\colon X\ratmap Y$ determines a $k$-algebra homomorphism $f^*\colon A(Y)\to k(X)$ given by $f^*y=y\circ f$.}
                    \emph{Further, $f^*$ is injective iff $f$ is dominant, in which case $f^*\colon k(Y)\to k(X)$ and is given by $\frac{g}{h}\mapsto\frac{f^*g}{f^*h}$}

                    Let $y\in Y$ be non-zero.
                    Then $[F^*y=0]\iff [y(F(u))=0\,\,\forall u\in U]\iff[F(u)\in\van(y)\,\,\forall u\in U]\iff[F(U)\subset\van(y)\subsetneq Y]$.
                    But $F(U)$ is not dense iff $F(U)\subseteq\van(J)$ for some $J$, so taking non-zero $y\in J$ and applying the above gives the required result.
                    For the final claim, note that $f^*h\neq0$ if $h\neq0$, since $f^*$ is injective.
            \end{itemize}

    \section{\protect\marginnote{\AG}[0pt]Irreducible q.p. varieties and f.g. field extensions}

        \emph{There is an equivalence of categories:}
        \begin{align*}
            \{\text{irred. q.p. varieties $X$ with rational dominant maps}\} &\leftrightarrow \op{\{\text{f.g. field extensions $k\hookrightarrow K$ with $k$-alg. homs.}\}}\\
            X &\mapsto k(X)\\
            (f=\varphi^*\colon X\ratmap Y) &\mapsto (\varphi=f^*\colon k(Y)\to k(X)).
        \end{align*}
        \emph{In particular, the following hold:}
        \begin{itemize}
            \item \emph{$f^{**}=f$ and $\varphi^{**}=\varphi$;}
            \item \emph{$(g\circ f)^*=f^*\circ g^*\colon k(Z)\to k(Y)\to k(X)$ for $g\circ f\colon X\ratmap Y\ratmap Z$, and conversely for $\varphi$;}
            \item \emph{$X\simeq Y$ iff $k(X)\cong k(Y)$.}
        \end{itemize}

        The proof is split into steps:
        \begin{enumerate}
            \item $f$ induces $\varphi=f^*$, i.e. the functor is fully faithful.
            \item For field extensions $k\hookrightarrow A$, $k\hookrightarrow B$, any $k$-algebra homomorphism $A\to B$ is a field extension, i.e. injective.
            \item For $X,Y$ irreducible \emph{affine} varieties, a $k$-algebra homomorphism $\varphi\colon k(Y)\to k(X)$ determines a birational $f\colon X\ratmap Y$.
            \item For $X,Y$ \emph{quasi-projective} varieties, a $k$-algebra homomorphism $\varphi\colon k(Y)\to k(X)$ determines a birational $f\colon X\ratmap Y$.
            \item For any finitely-generated $k\hookrightarrow K$ there exists an irreducible quasi-projective variety $X$ with $K\cong k(X)$, i.e. the functor is essential surjective.
            \item The functor forms an equivalence of categories.
        \end{enumerate}

        \fbox{\emph{Fill in the details of the above proof.}}

        \emph{As a corollary, any irreducible \emph{affine} variety is birational to a hypersurface in some \emph{affine} space.}

    \section{\protect\marginnote{\AG}[0pt]Localisation theory}

        \subsection{Algebraic localisation}

            Let $R$ be a commutative ring (with identity).

            \begin{itemize}
                \item A subset $S\subset R$ is \textbf{multiplicative} if $1\in S$ and $S\cdot S\subseteq S$.
                \item The \textbf{localisation} of $R$ as $S$ is $S^{-1}R=(R\times S)/\sim$, where $(r,s)\sim(r',s')$ if there exists $t\in S$ such that $t(rs'-r's)=0$.
                    We write pairs $(r,s)$ as $\frac{r}{s}$.
                \item \emph{$S^{-1}R=0$ iff $0\in S$.}
                \item For $f\in R$ we write $R_f$ to mean $S^{-1}R$ where $S=\{1,f,f^2,\ldots\}$.
                \item For $\prid\triangleleft R$ prime we write $R_\prid$ to mean $S^{-1}R$ where $S=R\setminus\prid$.
                \item \emph{If $R$ is an integral domain then $R_f=R[\frac{1}{f}]$.}
                \item \emph{The \textbf{canonical ring homomorphism} $\pi\colon R\to S^{-1}R$ given by $r\mapsto\frac{r}{1}$ is injective if $R$ is an integral domain and $0\not\in S$.}
                \item We say that $R$ is a \textbf{local ring} if it has a \emph{unique} maximal ideal $\mathfrak{m}\subset A$.
                \item \emph{$R$ is local iff there exists a \emph{proper} ideal $I\triangleleft R$ such that all elements in the complement $R\setminus I$ are units.}
                \item \emph{If $\prid\triangleleft R$ is prime then $R_\prid$ is a local ring with maximal ideal $\prid R_\prid=\{\frac{r}{s}\mid r\in\prid,s\not\in\prid\}$.}
                \item \emph{If $R$ is an integral domain then $R=\bigcap_\maid R_\maid=\bigcap_\prid R_\prid$, where the intersections are taken over all maximal ideals $\maid$ and prime ideals $\prid$.}
                \item \emph{There is a bijective correspondence}
                    \begin{align*}
                        \{\prid\triangleleft R\mid\prid\cap S=\varnothing\} &\leftrightarrow \{\hat{\prid}\triangleleft S^{-1}R\}\\
                        \prid &\mapsto \hat{\prid}=\prid\cdot S^{-1}R=\left\{\frac{p}{s}\mid p\in\prid, s\in S\right\}\\
                        \prid=\pi^{-1}(\hat{\prid})=\{r\in R\mid \frac{r}{1}\in\hat{\prid}\}&\mapsfrom\hat{\prid}.
                    \end{align*}
                    \emph{In particular, for a fixed prime ideal $\mathfrak{q}\triangleleft R$, there is the bijective correspondence}
                    \begin{align*}
                        \{\prid\subset\mathfrak{q}\triangleleft R\} &\leftrightarrow \{\hat{\prid}\triangleleft R_\mathfrak{q}\}\\
                        \prid=\pi^{-1}(\hat{\prid}) &\leftrightarrow \hat{\prid}=\prid R_\mathfrak{q}
                    \end{align*}
            \end{itemize}

        \subsection{Geometric localisation}

            Let $X$ be an \emph{affine} variety.

            \begin{itemize}
                \item \emph{For a point $p\in X$ the stalk $\mathcal{O}_{X,p}$ of the structure sheaf $\mathcal{O}_X$ is $\mathcal{O}_{X,p}\cong A(X)_{\maid_p}$ where $\maid_p=\ide(p)$ is the maximal ideal corresponding to $p$.}

                    The isomorphism is defined by $(f,U)\mapsto\frac{g}{h}$ for $h(p)\neq0$, where $f|_U=\frac{g}{h}$, with inverse map $\frac{g}{h}\mapsto(\frac{g}{h},D_h)$ for $h\not\in\maid_p$.

                \item \emph{There is a bijective correspondence}
                    \begin{align*}
                        \{\text{subvarieties $Y\subset X$ passing through $p$}\} &\leftrightarrow \{\prid\triangleleft\mathcal{O}_{X,p}\}\\
                        Y=\van(\prid) &\leftrightarrow \prid=\{f\in\mathcal{O}_{X,p}\mid f(Y)=0\}.
                    \end{align*}
                    \emph{In particular, the point $Y=\{p\}$ corresponds to the \emph{unique} maximal ideal $\maid_p\mathcal{O}_{X,p}$.}

                    This follows from the bijective correspondence in the previous section on localisation.
            \end{itemize}

        \subsection{Homogeneous localisation}

            Let $R=\bigoplus_{m\geqslant0}R_m$ be an $\nn$-graded ring.

            \begin{itemize}
                \item Let $S\subset R$ be a multiplicative set \emph{consisting only of homogeneous elements}
                    Then $S^{-1}R=\bigoplus_{m\in\zz}(S^{-1}R)_m$ has a $\zz$-grading: for homogeneous elements $r\in R,s\in S$ \textbf{define} $m=\deg\frac{r}{s}=\deg r-\deg s$.
                \item The \textbf{homogeneous localisation} is the subring $(S^{-1}R)_0$ of $S^{-1}R$.
                \item We write $R_{(f)}$ \textbf{to mean} $(R_f)_0$ (where $f$ is \emph{homogeneous}), and $R_{(\prid)}$ \textbf{to mean} $(R_\prid)_0$.
                \item \emph{Let $X\subset\pee^n$ be a quasi-projective variety and $\overline{X}$ its projective closure.}
                    \emph{Write $X_0=\overline{X}\cap U_0$ and let $p\in X_0$.}
                    \emph{Then}
                    \begin{equation*}
                        \mathcal{O}_{X,p} \cong A(X_0)_{\maid_{p,0}} \cong S(\overline{X})_{(\maid_p)}
                    \end{equation*}
                    \emph{where $\maid_{p,0}=\{f\in A(X_0)\mid f(p)=0\}$ and $\maid_p=\{F\in S(\overline{X})\mid F(p)=0\}$.}
            \end{itemize}

    \section{\protect\marginnote{\AG}[0pt]Tangent spaces and smooth points}

        \subsection{Tangent spaces}

            Let $X$ be an \emph{affine} variety.

            \begin{itemize}
                \item Let $F\in\kon$ and $p=(p_1,\ldots,p_n)\in\aff^n$.
                    \textbf{Define} the linear polynomial $d_pF\in\kon$ by
                    \begin{equation*}
                        d_pF = dF|_{x=p} \cdot(x-p) = \sum\nolimits_i\frac{\partial F}{\partial x_i}(p)\cdot (x_i-p_i).
                    \end{equation*}
                \item Let $X\subset\aff^n$ be an \emph{affine} variety with $\ide(X)=(F_1,\ldots,F_r)$.
                    The \textbf{tangent space $T_pX$ to $X$ at $p$} is
                    \begin{equation*}
                        T_pX = \van(d_pF_1,\ldots,d_pF_r) = \bigcap\nolimits_i\ker dF_i\subset\aff^n.
                    \end{equation*}
                \item Note that $\van(d_p F_i)$ is a hyperplane, so $T_pX$ is an intersection of hyperplanes, and thus a linear subvariety.
                \item A point $p\in X$ is a \textbf{smooth point} if $\dim_k T_pX=\dim_p X$.
                \item A point $p\in X$ is a \textbf{singular point} if $\dim_k T_pX>\dim_p X$.
                    We write $\mathrm{Sing}(X)$ to be the collection of all singular points of $X$.
                \item \emph{Let $X$ be an \emph{irreducible} affine variety of dimension $d$ with $\ide(X)=(F_1,\ldots,F_r)$.}
                    \emph{Then $\mathrm{Sing}(X)\subset X$ is a closed subvariety given by the vanishing in $X$ of all $(n-d)\times(n-d)$ minors of the Jacobian matrix}
                    \begin{equation*}
                        \mathrm{Jac}(X) = \left(\frac{\partial F_i}{\partial x_j}\right)_{ij}
                    \end{equation*}
                \item \emph{Let $X$ be an affine variety and $p\in X$.}
                    \emph{Recall that $\maid_p=\{\frac{f}{g}\in\mathcal{O}_{X,p}\mid f(p)=0\}$.}
                    \emph{Then there is a canonical vector-space isomorphism}
                    \begin{equation*}
                        T_pX\cong(\maid_p/\maid_p^2)^*
                    \end{equation*}
                    \emph{where the vector space $\maid_p/\maid_p^2$ is called the \textbf{cotangent space}.}

                    The proof is split into several steps:
                    \begin{enumerate}
                        \item Prove for the case $X=\aff^n$ and $p=0$, using the fact that $\{d_0x_i=x_i\}$ gives a basis for $(T_0\aff^n)^*$.
                        \item Prove for general $X$ with $p=0$, after proving that $\overline{\maid}_p/\overline{\maid}_p^2\cong \maid_p/\maid_p^2$, where $\overline{\maid}$ is the image of $\maid$ in the quotient $A(X)=R/\ide(X)$.
                    \end{enumerate}

                    \fbox{\emph{Fill in the details of the above proof.}}
                \item \emph{$T_pX$ depends only on an open neighbourhood of $p\in X$, and is thus an isomorphism invariant.}
                \item We define the \textbf{tangent space} of a \emph{quasi-projective} variety $X$ at a point $p\in X$ by $T_pX=(\maid_p/\maid_p^2)^*$.
                    \textbf{However}, in practice we calculate the tangent space by picking an affine neighbourhood of $p\in X$ and then calculating the affine tangent space by using the Jacobian.
            \end{itemize}

        \subsection{Derivative map}

            Let $F\colon X\to Y$ be a morphism of quasi-projective varieties.

            \begin{itemize}
                \item \emph{Then $F^*\colon\mathcal{O}_{Y,F(p)}\to\mathcal{O}_{X,p}$ is a local (i.e. sends maximal ideals to maximal ideals) ring homomorphism $\maid_{F(p)}\to\maid_p$ given by $F^*g=g\circ F$.}

                    This is simply because $g(F(p))=0\implies (F^*g)(p)=0$.
                \item We construct the \textbf{pullback map on cotangent spaces} $F^*\colon\maid_{F(p)}/\maid_{F(p)}^2\to\maid_p/\maid_p^2$ by using the above claim: $F^*(\maid_{F(p)})\subset\maid_p$ so $F^*(\maid^2_{F(p)})\subset\maid_p^2$ and thus $F^*$ is well defined on cotangent spaces.
                \item We define the \textbf{derivative map} $D_pF\colon T_pX\to T_{F(p)}X$ as the dual of the pullback map on cotangent spaces: $D_pF=(F^*)^*$.
                \item \emph{On affine opens around $p$ and $F(p)$ we can identify $D_pF$ with the Jacobian matrix of $F$, i.e. locally $F\colon\aff^m\to\aff^n$ and $p=F(p)=0$, and $\mathrm{Jac}(F)=\left(\frac{\partial F_i}{\partial x_j}\right)_{ij}$ acts by left multiplication $\aff^m\equiv T_0\aff^m\to\aff^n\equiv T_0\aff^n$.}
            \end{itemize}

    \section{\protect\marginnote{\AG}[0pt]Blow-ups}

        \subsection{Blow-ups at a point}

            \begin{itemize}
                \item The \textbf{blow-up $B_0\aff^n$ of $\aff^n$ at the origin} is the set of lines in $\aff^n$ with a given choice of point:
                    \begin{equation*}
                        B_0\aff^n = \big\{(x,\ell)\in\aff^n\times\pee^{n-1}\mid x\in\ell\big\} = \van(x_iy_j-x_jy_i)\subset\aff^n\times\pee^{n-1}
                    \end{equation*}
                    where we use coordinates $(x_1,\ldots,x_n)$ on $\aff^n$ and $[y_1:\ldots:y_n]$ on $\pee^{n-1}$ (note that the projective coordinates are numbered \emph{starting from $1$}).
                    Note that $x\in\ell$ means that $(x_1,\ldots,x_n)=\lambda(y_1,\ldots,y_n)$ for some $\lambda\in k^\times$.
                \item The \textbf{blow-up $B_p\aff^n$ of $\aff^n$ at a point $p$} is given by composing the linear isomorphism $x\mapsto x-p$ with the blow-up at the origin.
                \item The morphism $\pi\colon B_0\aff^n\to\aff^n$ \textbf{given by} $\pi\colon(x,[y])\mapsto x$ is birational with inverse $x\mapsto(x,[x])$ defined on $x\neq0$.
                    The fibre $\pi^{-1}(x)$ is a point, apart from the \textbf{exceptional divisor} $E_0=\pi^{-1}(0)=\{0\}\times\pee^{n-1}$, which is a subvariety of codimension $1$.
                \item $\pi\colon B_0\aff^n\setminus E_0\to\aff^n\setminus\{0\}$ \emph{is an isomorphism, and $\pi$ collapses $E_0$ to the point $0$.}
                \item $E_0\cong\pee^{n-1}\cong\pee(T_0\aff^n)$ \emph{is the projectivisation of the tangent space: the closure of the preimage $\{(vt,[vt])\mid t\neq0\}$ of the punctured line $t\mapsto tv$ for $\neq0$ contains the new point $(0,[v])$.}
                \item For an affine variety $X\subset\aff^n$ \emph{with $0\in X$} the \textbf{proper transform $B_0X$ of $X$} is the closure
                    \begin{equation*}
                        B_0X=\overline{\big(\pi^{-1}(X\setminus\{0\})\big)}\subset B_0\aff^n.
                    \end{equation*}
                \item The \textbf{exceptional divisor $E$ of $X$} is defined as $E=\pi^{-1}(0)\cap B_0X$.
                \item \emph{$\pi\colon B_0X\to X$ is birational.}
                \item The \textbf{total transform of $X$} is $\pi^{-1}(X)= B_0X\cup E_0$.
            \end{itemize}

        \subsection{Blow-ups along subvarieties and ideals}

            \begin{itemize}
                \item Let $X$ be an affine variety and $I=(f_1,\ldots,f_r)\triangleleft A(X)$.
                    Define the \textbf{blow-up along an ideal} $B_I(X)$ to be the graph of $f\colon X\ratmap\pee^{r-1}$ where $f\colon x\mapsto[f_1(x):\ldots:f_r(x)]$, i.e.
                    \begin{equation*}
                        B_IX = \overline{\big\{(x,f(x)\mid x\in X\setminus\van(I)\big\}}\subset X\times\pee^{r-1}.
                    \end{equation*}
                \item \emph{$\pi\colon B_I(X)\to X$ given by $\pi\colon(x,[v])\mapsto x$ is birational with inverse $x\mapsto(x,f(x))$ defined on $X\setminus\van(I)$.}
                \item The \textbf{exceptional divisor $E$} is $\pi^{-1}(\van(I))$.
                \item The \textbf{blow-up $B_YX$ along an affine subvariety $Y\subset X$} is defined as $B_{\ide(Y)}X$.
                \item For a quasi-projective variety $X\subset\pee^n$ and a homogeneous ideal $I\triangleleft S(\overline{X})$ with $I=(f_1,\ldots,f_r)$ we \textbf{define} $B_IX=B_IX\cap(X\times\pee^{r-1})$ by using that $f\colon\overline{X}\ratmap\pee^{r-1}$ determines $B_I\overline{X}\subset\overline{X}\times\pee^{r-1}$ as before.
            \end{itemize}

        \subsection{Examples}

            \fbox{\emph{Work through lots of examples of blow-ups.}}


    \clearpage
    \addtocontents{toc}{\protect\addvspace{20pt}\hrule\protect\addvspace{10pt}}

    \section{\protect\marginnote{\QI}[0pt]Formalisation of quantum physics}

        \subsection{Probability axioms}

            \begin{itemize}
                \item Instead of working with probabilities (positive numbers) we work with \textbf{probability amplitudes} (complex numbers).
                    \begin{itemize}
                        \item If independent events $E_1,\ldots,E_r$ with amplitudes $z_i$ happen in sequence then we \emph{multiply} amplitudes: $z=z_1z_2\ldots z_r$
                        \item If there are several possible ways $W_1,\ldots,W_s$ with amplitudes $z_i$ of reaching the same outcome then we \emph{add} amplitudes: $z=z_1+z_2+\ldots+z_s$.
                    \end{itemize}
                \item \textbf{Probability} is given by the \emph{modulus of the square} of the amplitude: $p=|z|^2$.
            \end{itemize}

        \subsection{Bra-ket notation}

            \subsubsection{Definitions}

                \begin{itemize}
                    \item To an \emph{isolated} physical system we associate a \emph{complex Hilbert space $\mathcal{H}$ of \mbox{dimension $n$}} whose elements are \textbf{kets}, written as $\ket{\bullet}$ for any symbol $\bullet$.
                        \emph{We think of the dimension as telling us how many perfectly distinguishable configurations of our space there are.}
                        \begin{itemize}
                            \item For example, $\ket{\uparrow}$ and $\ket{\downarrow}$ might be used for the kets associated to the spin of an electron.
                            \item The symbols on their own \emph{have no meaning}: writing something like $\lambda\ket{a}=\ket{\lambda a}$ is an abuse of notation.
                        \end{itemize}
                    \item The \textbf{inner product} of $\hilb$ is written as $\braket{a}{b}$.
                        \emph{We think of it as telling us how well we can distinguish two states.}
                    \item We define \textbf{bras} to be linear forms on $\hilb$, i.e. elements of the dual space $\hilb^*$, and they are written $\bra{\bullet}$.
                        The action of bras is defined by the inner product: $\bra{a}(\ket{b})=\braket{a}{b}$.
                    \item We also have the \textbf{outer product} $\ketbra{a}{b}$ which is a linear operator whose action is defined by $\ketbra{a}{b}(\ket{c})=\ket{a}\braket{b}{c}$, i.e. we scale $\ket{a}$ by $\braket{b}{\blank}$.
                    \item Given some state $\ket{\Psi}$ the outer product $\ketbra{\Psi}{\Psi}$ is called the \textbf{projector on $\Psi$}.
                    \item Given some linear operator $A$ we can write $\bramidket{a}{A}{b}$ unambiguously, since $\bra{a}\Big(A\ket{b}\Big)$ and $\Big(\bra{a}A\Big)\ket{b}$ are equal (this is made clear when we talk about \emph{state vectors}).
                \end{itemize}

            \subsubsection{Useful identities}

                \begin{enumerate}
                    \item $\Big(\alpha_1\ket{\psi_1}+\alpha_2\ket{\psi_2}\Big)^\dagger = \alpha_1^*\bra{\psi_1}+\alpha_2^*\bra{\psi_2}$
                    \item $\braket{\phi}{\psi}^\dagger = \braket{\psi}{\phi}$
                    \item $\Big(\bramidket{\phi}{AB}{\psi}\Big)^\dagger = \bramidket{\psi}{B^\dagger A^\dagger}{\phi}$
                    \item $\Big(\alpha_1\ketbra{\psi_1}{\phi_1}+\alpha_2\ketbra{\psi_2}{\phi_2}\Big)^\dagger = \alpha_1^*\ketbra{\phi_1}{\psi_1}+\alpha_2^*\ketbra{\phi_2}{\psi_2}$
                \end{enumerate}

        \subsection{State vectors}

            \begin{itemize}
                \item We usually assume that $\hilb$ has an \emph{orthonormal basis} $\{\ket{e_1},\ldots,\ket{e_n}\}$.
                    \begin{itemize}
                        \item We can think of a ket $\ket{a}=\sum_i\alpha_i \ket{e_i}$ as a column vector, where $\sum_i|\alpha_i|^2=1$.
                        \item We can think of a bra $\bra{b}=\sum_i\beta_i \bra{e_i}$ a a row vector, where $\sum_i|\beta_i|^2=1$.
                        \item The \textbf{Hermitian conjugate} $\dagger$ is defined as the \emph{complex conjugation of the matrix transpose}:
                        \begin{equation*}
                            \left(
                            \begin{array}{c}
                                \alpha_1\\
                                \vdots\\
                                \alpha_n
                            \end{array}
                            \right)^\dagger = (\alpha_1^*\,\,\ldots\,\,\alpha_n^*)
                        \end{equation*}
                        where $z^*$ denotes the complex conjugate of $z$.
                        That is, \emph{the Hermitian conjugate turns a ket into the corresponding dual bra, and vice versa.}
                    \item We can think of linear operators as $n\times n$ matrices over $\cc$, and then $\bra{a}A$ and $A\ket{b}$ both make sense, using matrix multiplication, and $\bra{a}\Big(A\ket{b}\Big)=\Big(\bra{a}A\Big)\ket{b}$.
                    \end{itemize}
                \item We always assume that state vectors have been \textbf{normalised}, i.e. are of length $1$.
                \item Any two state vectors that differ by a \textbf{global phase} describe the same quantum state, i.e. $\ket{\Psi}$ and $e^{i\theta}\ket{\Psi}$ are `the same'.
                \item But \textbf{relative phase} factors are very important, i.e. $\alpha_0\ket{0}+\alpha_1\ket{1}$ and $\alpha_0\ket{0}+e^{i\theta}\alpha_1\ket{1}$ are two \emph{very different} states (for $\theta\neq2m\pi$).
                \item If a state is of the form $\ket{\Psi}\in\hilb$ then we say it is a \textbf{pure state}, i.e. there is no probability involved in what the state is -- it \emph{is} in state $\ket{\Psi}$.
                    If we know that e.g. the state is $\ket{\Psi}$ with probability $\frac12$ and state $\ket{\Psi'}$ with probability $\frac12$ then we call this a \textbf{mixed state}.
                \item If a state is of the form $\alpha_1\ket{e_1}+\ldots+\alpha_n\ket{e_n}$ with $\sum_i\alpha_i=1$ and at least \emph{two} $\alpha_i$ are non-zero then we say that the state is a \textbf{(coherent) superposition}.
                    Note that a superposition is \emph{still a pure state, i.e. not a mixed state}.
                    (This is better explained with the language of \emph{density operators}.)
            \end{itemize}

        \subsection{Qubits}

            \begin{itemize}
                \item A \textbf{quantum bit}, or \textbf{qubit}, is a two-dimensional complex Hilbert space.
                \item We often describe the state of a qubit in terms of the orthonormal basis $\{\ket{0},\ket{1}\}$, i.e. $\alpha_0\ket{0}+\alpha_1\ket{1}$ with $|\alpha_0|^2+|\alpha_1|^2=1$.
                    This basis is called the \textbf{computational basis}.
                \item Working in this basis, we have the \textbf{projectors} $P_0,P_1$ which are linear operators defined by $P_i=\ketbra{i}{i}$.
                \item The probability of a state $\ket{\Psi}$ being measured and resulting in $\ket{i}$ is given by $\bramidket{\Psi}{P_0}{\Psi}$.
            \end{itemize}

        \subsection{Entanglement}

            \begin{itemize}
                \item If we have two quantum systems $A$ and $B$ with corresponding Hilbert spaces $\hilb_A$ and $\hilb_B$ then we describe elements of the combined space $\hilb_{A,B}$ with the \emph{tensor product of Hilbert spaces} $\hilb_A\otimes\hilb_B$.
                    That is, elements are \emph{linear combinations} of elementary tensors $\ket{\Psi_A}\otimes\ket{\Psi_B}$.
                \item There are various ways of writing tensor products of pure states, and we use any of the following:
                    \begin{itemize}
                        \item $\ket{\Psi_A}\otimes\ket{\Psi_B}$
                        \item $\ket{\Psi_A}\ket{\Psi_B}$
                        \item $\ket{\Psi_A\Psi_B}$
                    \end{itemize}
                \item Given some element $\ket{\Psi_A\Psi_B}$ the corresponding bra is $\bra{\Psi_A\Psi_B}$, and these act coordinate-wise, i.e.
                    \begin{equation*}
                        \bra{\Phi_A\Phi_B}\Big(\ket{\Psi_A\Psi_B}\Big) = \Big(\bra{\Phi_A}\otimes\bra{\Phi_B}\Big)\Big(\ket{\Psi_A}\otimes\ket{\Psi_B}\Big) = \Big(\braket{\Phi_A}{\Psi_A}\Big)\otimes\Big(\braket{\Phi_B}{\Psi_B}\Big).
                    \end{equation*}
                \item Note that elements of $\hilb_A\otimes\hilb_B$ are \emph{linear combinations}.
                    That is, not all elements in $\hilb_A\otimes\hilb_B$ are of the form $\ket{\Psi_A}\otimes\ket{\Psi_B}$ for $\ket{\Psi_i}\in\hilb_i$.
                    In fact, \emph{most} elements \emph{aren't} of this form.
                    \begin{itemize}
                        \item If $\ket{\Psi}\in\hilb_{A,B}$ can be written as $\ket{\Psi_A}\otimes\ket{\Psi_B}$ then we say that it is a \textbf{separable state}, e.g. $\alpha\ket{00}+\beta\ket{01}=\ket{0}\otimes(\alpha\ket{0}+\beta\ket{1})$
                        \item If $\ket{\Psi}\in\hilb_{A,B}$ is \emph{not} separable then we say that it is an \textbf{entangled state}, e.g. $\alpha\ket{00}+\beta\ket{11}\neq\ket{\Psi_A}\otimes\ket{\Psi_B}$ for any $\ket{\Psi_i}\in\hilb_i$.
                    \end{itemize}
                \item Working in the computational basis $\{\ket{0},\ket{1}\}$, we can define an \textbf{quantum $n$-register} to be the tensor product of $n$ qubits, whose elements are \emph{linear combinations} of $\ket{x}$ where $x\in\{0,1\}^n$.
            \end{itemize}

        \subsection{Unitary evolutions}

            \begin{itemize}
                \item A linear operator $U$ is said to be \textbf{unitary} if $U^\dagger U=UU^\dagger=\idm$.
                \item In our simple formalisation of quantum physics, \textbf{all evolutions are unitary}.
                    This is because unitary operators are exactly what we need to ensure that state vectors evolve into state vectors.
                \item If we start with some state $\ket{\Psi}$ and let it evolve under unitary transforms $U_1,\ldots,U_r$ then the final state will be $U_rU_{r-1}\ldots U_1\ket{\Psi}$, i.e. \emph{composition corresponds to matrix multiplication}.
                \item Given two spaces $\hilb_A$ and $\hilb_B$ and two unitary operations $U_A$ and $U_B$, we can define the \textbf{tensor-product operator} $U_A\otimes U_B$ that acts on $\hilb_A\otimes\hilb_B$ by the \emph{matrix outer product}: write $U_A$ and $U_B$ as matrices $U_A=(a_{ij})_{ij}$ and $U_B=(b_{ij})_{ij}$ with $\dim\hilb_A=m$ and $\dim\hilb_B=n$.
                    Then
                    \begin{equation*}
                        U_A\otimes U_B = \left(
                        \begin{array}{cccc}
                            a_{11}U_B & a_{12}U_B & \ldots & a_{1m}U_B\\
                            a_{21}U_B & a_{22}U_B & \ldots & a_{2m}U_B\\
                            \vdots & & \ddots & \vdots\\
                            a_{m1}U_B & a_{22}U_B & \ldots & a_{mm}U_B
                        \end{array}
                        \right)\in\mathsf{Mat}_{mn\times mn}(\cc).
                    \end{equation*}
            \end{itemize}

    \section{\protect\marginnote{\QI}[0pt]Introduction to quantum circuits}

        \subsection{Quantum circuit diagrams}

            \begin{itemize}
                \item Say that we start with a state $\ket{\Psi}=\alpha_0\ket{0}+\alpha_1\ket{1}$ and let it undergo a unitary evolution $U$, so that we end with state $\ket{\Psi'}=U\ket{\Psi}$.
                    We write this as a \textbf{quantum circuit} as follows:
                    \begin{equation*}
                        \Qcircuit @C=1.5em @R=.2em {
                            \lstick{\ket{\Psi}} & \qw & \gate{U} & \qw & \rstick{\ket{\Psi'}} \qw
                        }
                    \end{equation*}
                \item If we start with an entangled state $\ket{\Psi}=\ket{\Psi_1}\ket{\Psi_2}$ and let it undergo a unitary evolution $U$ then we write this as follows:
                    \begin{equation*}
                        \Qcircuit @C=1.5em @R=.6em {
                            \lstick{\ket{\Psi_1}} & \qw & \multigate{1}{U} & \qw & \rstick{\ket{\Psi_1'}} \qw\\
                            \lstick{\ket{\Psi_2}} & \qw & \ghost{U} & \qw & \rstick{\ket{\Psi_2'}} \qw
                        }
                    \end{equation*}
                \item A \textbf{controlled $U$-gate} is used to represent an operation on an entangled state where one subsystem affects the other, i.e. the second qubit evolves under $U$ if the first qubit is in a certain state, and remains the same if the first qubit is in a different state.
                    (This is explained in more detail further on.)
                    These are written as follows:

                    \begin{equation*}
                        \Qcircuit @C=1.5em @R=1.6em {
                            \lstick{\ket{\Psi_1}} & \qw & \ctrl{1} & \qw & \rstick{\ket{\Psi_1'}} \qw\\
                            \lstick{\ket{\Psi_2}} & \qw & \gate{U} & \qw & \rstick{\ket{\Psi_2'}} \qw
                        }
                    \end{equation*}
            \end{itemize}

        \subsection{Single-qubit gates}

            For all that follows we work in the computational basis $\{\ket{0},\ket{1}\}$.

            \begin{itemize}
                \item The \textbf{square-root-of-{\sc not} gate} $\sqrt{\text{\sc{not}}}$ is described by the matrix
                    \begin{equation*}
                        \sqrt{\text{\sc{not}}}=\left(
                            \begin{array}{cc}
                                \frac{1}{\sqrt{2}} & \frac{i}{\sqrt{2}}\\
                                \frac{i}{\sqrt{2}} & \frac{1}{\sqrt{2}}
                            \end{array}
                        \right)
                    \end{equation*}
                \item The \textbf{$\varphi$-phase gate} $P_\varphi$ is described by the matrix
                    \begin{equation*}
                        P_\varphi=\left(
                            \begin{array}{cc}
                                1&0\\
                                0&e^{i\varphi}
                            \end{array}
                        \right)
                    \end{equation*}
                    for some $\varphi\in(0,2\pi]$.
                \item The \textbf{Hadamard gate} $H$ is described by the matrix
                    \begin{equation*}
                        H=\frac{1}{\sqrt{2}}\left(
                            \begin{array}{cc}
                                1&1\\
                                1&-1
                            \end{array}
                        \right)
                    \end{equation*}
                \item The \textbf{Pauli gates} $\sigma_{(\blank)}$ are described by the matrices
                    \begin{align*}
                        \sigma_x&=
                        \left(
                            \begin{array}{cc}
                                0 & 1\\
                                1 & 0
                            \end{array}
                        \right)
                        =\text{\sc not}\\
                        \sigma_y&=
                        \left(
                            \begin{array}{cc}
                                0 & -i\\
                                i & 0
                            \end{array}
                        \right)
                        =i\sigma_x\sigma_z\\
                        \sigma_z&=
                        \left(
                            \begin{array}{cc}
                                1 & 0\\
                                0 & -1
                            \end{array}
                        \right)
                        =P_\pi
                    \end{align*}
            \end{itemize}

        \subsection{The fundamental single-qubit circuit}

            The building block of all quantum circuits is the following circuit:
            \begin{equation*}
                \Qcircuit @C=1.5em @R=.2em {
                    & & \varphi & &\\
                    \lstick{\ket{0}} & \gate{H} & \control \qw & \gate{H} & \rstick{\cos\frac{\varphi}{2}\ket{0}-i\sin\frac{\varphi}{2}\ket{1}} \qw
                }
            \end{equation*}

        \subsection{Multi-qubit gates}

                \begin{itemize}
                    \item Often we work with a two-qubit system and the computational basis $\ket{e_i}$ where \mbox{$e_i\in\{0,1\}^2$}, and ordered as follows: $\ket{00},\ket{01},\ket{10},\ket{11}$.
                        We also often assume that our first qubit (our input qubit) is in state $\ket{0}$.
                    \item Given two $n$-registers $x,y\in\{0,1\}^n$ we define their \textbf{dot product} $x\cdot y\in\{0,1\}$ as the usual dot product (with addition $\oplus$ modulo 2), i.e. writing $x=x_1x_2\ldots x_n$ and $y=y_1y_2\ldots y_n$ we have $x\cdot y={x_1y_1}\oplus{x_2y_2}\oplus\ldots\oplus{x_ny_n}$.
                    \item For $x\in\{0,1\}^n$ the \textbf{Hadamard transform} is \emph{also} given by
                        \begin{equation*}
                            \ket{x} \mapsto \frac{1}{\sqrt{2}}\sum_{y\in\{0,1\}^n}(-1)^{x\cdot y}\,\ket{y}.
                        \end{equation*}
                    \item Given a unitary transformation $U$ acting on a qubit, we define the \textbf{controlled-$U$ gate} as the gate acting on a $2$-register by applying $U$ to the second qubit if the first qubit is a $1$, and applying the identity to the second qubit if the first qubit is a $0$.
                        This is written as a matrix as follows:
                        \begin{equation*}
                            C_{U}=\left(
                            \begin{array}{cccc}
                                1&0&0&0\\
                                0&1&0&0\\
                                0&0&U_{11}&U_{12}\\
                                0&0&U_{21}&U_{22}
                            \end{array}
                            \right)
                        \end{equation*}
                        and written in a circuit as $\bullet$ for the control qubit and $U$ for the operand qubit.
                        When $x,y\in\{0,1\}$, it acts as follows:
                        \begin{equation*}
                            \Qcircuit @C=1.5em @R=1.6em {
                                \lstick{\ket{x}} & \qw & \ctrl{1} & \qw & \rstick{\ket{x}} \qw\\
                                \lstick{\ket{y}} & \qw & \gate{U} & \qw & \rstick{\Big(xU+(x\oplus1)\Big)\ket{y}} \qw
                            }
                        \end{equation*}
                    \item A specific example of a controlled-$U$ gate is the \textbf{controlled-{\sc not} gate}, given by the matrix
                        \begin{equation*}
                            C_{\text{\sc not}}=\left(
                            \begin{array}{cccc}
                                1&0&0&0\\
                                0&1&0&0\\
                                0&0&0&1\\
                                0&0&1&0
                            \end{array}
                            \right)
                        \end{equation*}
                        and written in a circuit as $\oplus$.
                        When $x,y\in\{0,1\}$, it acts as follows:
                        \begin{equation*}
                            \Qcircuit @C=1.5em @R=1.6em {
                                \lstick{\ket{x}} & \qw & \ctrl{1} & \qw & \rstick{\ket{x}} \qw\\
                                \lstick{\ket{y}} & \qw & \targ & \qw & \rstick{\ket{x\oplus y}} \qw
                            }
                        \end{equation*}
                \end{itemize}

    \section{\protect\marginnote{\QI}[0pt]No-cloning and teleportation}

        \subsection{No-cloning}

            Suppose that we have some circuit $C$ that clones the input, i.e. for any state $\ket{\Psi}$, and writing $\ket{e}$ to mean the state of the environment, the machine acts as follows
            \begin{equation*}
                \Qcircuit @C=1.5em @R=.2em {
                    \lstick{\ket{\Psi}\ket{0}\ket{e}} & \gate{C} & \rstick{\ket{\Psi}\ket{\Psi}\ket{e'}} \qw
                }
            \end{equation*}
            If we pick states $\ket{\Psi}$ and $\ket{\Phi}$ that are \emph{non-orthogonal} and \emph{non-identical}, i.e. $\braket{\Phi}{\Psi}\not\in\{0,1\}$, then running the cloning machine gives us outputs
            \begin{equation*}
                \Qcircuit @C=1.5em @R=.2em {
                    \lstick{\ket{\Psi}\ket{0}\ket{e}} & \gate{C} & \rstick{\ket{\Psi}\ket{\Psi}\ket{e'}} \qw
                }
            \end{equation*}
            \begin{equation*}
                \Qcircuit @C=1.5em @R=.2em {
                    \lstick{\ket{\Phi}\ket{0}\ket{e}} & \gate{C} & \rstick{\ket{\Phi}\ket{\Phi}\ket{e''}} \qw
                }
            \end{equation*}
            But since the evolution must be unitary, it preserves the inner product, and so
            \begin{equation*}
                \bra{\Phi}\bra{0}\bra{e}\Big(\ket{\Psi}\ket{0}\ket{e}\Big) = \bra{\Phi}\bra{\Phi}\bra{e''}\Big(\ket{\Psi}\ket{\Psi}\ket{e'}\Big)
            \end{equation*}
            which is satisfied iff
            \begin{equation*}
                \braket{\Phi}{\Psi} = \braket{\Phi}{\Psi}^2\braket{e'}{e''}.
            \end{equation*}
            This last equality requires that $\braket{\Phi}{\Psi}\in\{0,1\}$, which contradicts our initial assumptions, and so we see that no such cloning circuit $C$ can exist.

        \subsection{Teleportation}

            Suppose we have some state $\ket{\Psi}=\alpha_0\ket{0}+\alpha_1\ket{1}$ that we wish to teleport.
            We already know that we can't clone it, so if we \emph{can} teleport it then we must end up destroying our original state at some point before the receiver has it.
            The following circuit provides \textbf{teleportation}, where Alice has access to the \emph{first two qubits}, and Bob has access to the \emph{third qubit}:
            \begin{equation*}
                \Qcircuit @C=1.5em @R=1em {
                    \lstick{\ket{\Psi}} & \qw & \qw & \ctrl{1} \qw & \gate{H} \qw & \measureD{x} \qw\\
                    \lstick{\ket{0}} & \gate{H} & \ctrl{1} \qw & \targ & \qw & \measureD{y} \qw\\
                    \lstick{\ket{0}} & \qw & \targ & \qw & \qw & \rstick{\ket{\psi}} \qw
                }
            \end{equation*}

            The circuit is run, \emph{and then Alice broadcasts the measurements of $\ket{x}$ and $\ket{y}$}.
            To recover the initial state $\ket{\Psi}$, Bob has to \emph{modify $\ket{\psi}$ in a way that depends on the measurement of the ancillary qubits $\ket{x}\ket{y}$} according to the following table:
            \begin{equation*}
                \begin{tabular}{lr}
                    $\ket{xy}$ & $\ket{\Psi}$\\
                    \toprule
                    $\ket{00}$ & $\ket{\psi}$\\
                    $\ket{01}$ & $\sigma_x\ket{\psi}$\\
                    $\ket{10}$ & $\sigma_z\ket{\psi}$\\
                    $\ket{11}$ & $\sigma_z\sigma_x\ket{\psi}$
                \end{tabular}
            \end{equation*}

    \section{\protect\marginnote{\QI}[0pt]Quantum interference and decoherence}\label{sec:interference-and-decoherence}

        \begin{itemize}
            \item The fundamental quantum circuit is the following:
                \begin{equation*}
                    \Qcircuit @C=1.5em @R=.2em {
                        & & \varphi & &\\
                        \lstick{\ket{\Psi}} & \gate{H} & \control \qw & \gate{H} & \rstick{HP_\varphi H\ket{\Psi}} \qw
                    }
                \end{equation*}
            \item We know how this acts in a \emph{closed system}, and we can represent it by the following matrix:
                \begin{equation*}
                    HP_\varphi H=\left(
                    \begin{array}{cc}
                        \cos\frac{\varphi}{2} & -i\sin\frac{\varphi}{2}\\
                        -i\sin\frac{\varphi}{2} & \cos\frac{\varphi}{2}
                    \end{array}
                    \right)
                \end{equation*}
            \item If we input $\ket{\Psi}=\ket{0}$ then the final state will be $\ket{\Psi'}=\cos\frac{\varphi}2\ket{0}-i\sin\frac{\varphi}2\ket{1}$.
                Then the probability $p_0$ of measuring the final state \emph{and seeing $\ket{0}$} is
                \begin{equation*}
                    \bramidket{\Psi'}{P_0}{\Psi'}=\braket{\Psi'}{0}\braket{0}{\Psi'} = \cos^2\frac{\varphi}2 = \frac12(1+\cos\varphi).
                \end{equation*}
            \item In reality we have the \textbf{ambient environment} $\ket{e}$, i.e. \textbf{decoherence} $D$ happens somewhere along the circuit (we assume that it happens after the phase), and we formalise this as follows:
                \begin{enumerate}
                    \item $\ket{\Psi}=\ket{\Psi}\ket{e}$
                    \item $\ket{0}\ket{e}\xrightarrow{D}\ket{0}\ket{e_0}$
                    \item $\ket{1}\ket{e}\xrightarrow{D}\ket{1}\ket{e_1}$
                    \item $\braket{e_0}{e_1}=ve^{i\alpha}$ for some \textbf{visibility} $v\in[0,1]$ and \textbf{phase} $\alpha\in(0,2\pi]$.
                \end{enumerate}
                Note that $\ket{e_0},\ket{e_1}$ are not necessarily orthogonal, but \emph{are assumed to be of unit length}.
            \item Under these new assumptions we can see how our fundamental circuit acts on $\ket{0}$:
                \begin{equation*}
                    \ket{0}\ket{e} \xrightarrow{HP_\varphi H} \ket{\Psi'}=\frac12\Big(\ket{e_0}+e^{i\varphi}\ket{e_1}\Big)\ket{0}+\frac12\Big(\ket{e_0}-e^{i\varphi}\ket{1}\Big)\ket{1}.
                \end{equation*}
            \item The \textbf{projection operators} $P_i$ are defined as $\ketbra{i}{i}\otimes\mathbbm{1}$, i.e. they act as the identity on the environment.
            \item We can check that $P_i^2=P_i$ and $P_0P_1=0$.
                Thus the $P_i$ are \textbf{orthogonal projections}.
            \item We can calculate
                \begin{equation*}
                    \bramidket{\Psi'}{P_0}{\Psi'} = \frac12\Big(1+v\cos(\varphi+\alpha)\Big).
                \end{equation*}
            \item \textbf{Interpretation:}
                \begin{enumerate}
                    \item If $\alpha=0$ then we are just reducing sensitivity to $\varphi$, and this is controlled by $v$:
                        \begin{enumerate}
                            \item if $v=0$ then the environment `knows' exactly what is happening, and we see that $p_0=p_1=\frac12$, i.e. all outcomes are equally likely;
                            \item if $v=1$ then the environment can't distinguish between $\ket{e_0}$ and $\ket{e_1}$, and we we recover the original probability of $p_0=\frac12(1+\cos\varphi)$.
                        \end{enumerate}
                    \item If $\alpha\neq0$ then this means we can't really predict anything about the outcome, \emph{unless we know $\alpha$}, in which case we can fully account for this.
                \end{enumerate}
        \end{itemize}
                
    \section{\protect\marginnote{\QI}[0pt]Entanglement and controlled-unitary gates}

        \begin{itemize}
            \item Given some unitary operator $U$ on an $n$-register, we can define a \textbf{controlled-$U$ gate} on an $n+1$ register by defining
                \begin{align*}
                    \ket{0}\ket{v}&\rightarrow\ket{0}\mathbbm{1}\ket{v}\\
                    \ket{1}\ket{v}&\rightarrow\ket{1}U\ket{v}
                \end{align*}
                i.e. the first qubit acts as a control bit.
            \item If we let $\ket{u}$ be some \emph{eigenstate} of $U$, i.e. $U\ket{u}=e^{i\vartheta}\ket{u}$ for some $\vartheta\in(0,2\pi]$, then the controlled-$U$ gate acts as follows:
                \begin{align*}
                    \ket{0}\ket{v}&\rightarrow\ket{0}\ket{v}\\
                    \ket{1}\ket{v}&\rightarrow e^{i\vartheta}\ket{1}\ket{v}
                \end{align*}
                i.e. on the \emph{computational basis}, the controlled-$U$ gate acts as the identity on all of the register (since we can ignore global phase).
            \item Generalising the fundamental circuit (Hadamard-phase-Hadamard) we obtain the following \textbf{controlled-$U$ circuit}:
                \begin{equation*}
                    \Qcircuit @C=1em @R=.7em {
                        \lstick{\ket{0}} & \gate{H} & \ctrl{1} \qw & \gate{H} & \rstick{\cos\frac{\vartheta}2\ket{0}-i\sin\frac{\vartheta}2\ket{1}} \qw\\
                        \lstick{\ket{u}} & \qw & \gate{U} & \qw & \rstick{\ket{u}} \qw
                    }
                \end{equation*}
        \end{itemize}

    \section{\protect\marginnote{\QI}[0pt]Quantum algorithms}

        \subsection{Boolean functions and oracles}

            \begin{itemize}
                \item A \textbf{boolean function} is a function $f\colon\{0,1\}^m\to\{0,1\}^n$.
                \item An \textbf{oracle} is a `black box', i.e. a circuit into which we feed an input and receive an output, but without knowing anything about how the circuit works.
                \item Given some boolean function $f\colon\{0,1\}^m\to\{0,1\}^n$ we define the \textbf{associated controlled-$U$ gate}, which acts on an $(m+n)$-register, as follows (where $x\in\{0,1\}^m,y\in\{0,1\}^n$):
                    \begin{equation*}
                        \ket{x}\ket{y}\xrightarrow{f}\ket{x}\ket{y\oplus f(x)}.
                    \end{equation*}
                    (We might think of simply using $\ket{x}\to\ket{f(x)}$, but note that this is \emph{not} unitary, i.e. reversible.)
            \end{itemize}

        \subsection{Deutch's algorithm}

            \begin{itemize}
                \item \textbf{Deutch's algorithm} is constructed to answer the following question, which deals with the case $m=n=1$:

                    \emph{Suppose we have some oracle that encodes a controlled-$U$ gate, where $U$ is given by a boolean function $f\colon\{0,1\}\to\{0,1\}$, so that $f$ is either constant (i.e. always outputs the same value), or balanced (i.e. outputs either value with equal probability).}
                    \emph{How many calls to the oracle must we make to determine whether $f$ is constant or balanced?}

                    The \emph{classical} answer is \emph{two} calls; the \emph{quantum} answer, using Deutch's algorithm, is \emph{one} call.
                \item The algorithm relies on a clever choice of the second qubit, namely the eigenstate $\ket{\Phi}=\frac1{\sqrt{2}}\big(\ket{0}+\ket{1}\big)$ of $f$, and two Hadamard gates sandwiching the controlled-$U$, i.e. we run the circuit
                    \begin{equation*}
                        \Qcircuit @C=1em @R=.7em {
                            \lstick{\ket{0}} & \gate{H} & \ctrl{1} \qw & \gate{H} & \rstick{\ket{\Psi'}} \qw\\
                            \lstick{\ket{\Phi}} & \qw & \gate{f} & \qw & \rstick{\ket{\Phi}} \qw
                        }
                    \end{equation*}
                    noting that $\ket{\Phi}$ is an eigenstate of $f$.

                    Then
                    \begin{align*}
                        \ket{0}\ket{\Phi} \xrightarrow{H\otimes\mathbbm{1}} &\sum_{x\in\{0,1\}}\ket{x}\ket{\Phi}\\
                        \xrightarrow{f} &\sum_{x\in\{0,1\}}\ket{x}\Big(\ket{f(x)}-\ket{f(x)\oplus1}\Big) = \sum_{x\in\{0,1\}}(-1)^{f(x)}\ket{x}\ket{\Phi}\\
                        \xrightarrow{H\otimes\mathbbm{1}}
                        &\begin{cases}
                            \ket{0} &\text{if $f$ constant;}\\
                            \ket{1} &\text{if $f$ balanced.}
                        \end{cases}
                    \end{align*}
            \end{itemize}

        \subsection{Bernstein-Vazirani problem}

            \begin{itemize}
                \item The \textbf{Bernstein-Vazirani problem} deals with the specific case when $n=1$ and $f$ is of the form $f(x)=x\cdot a=x_1a_1\oplus\ldots\oplus x_ma_m$ for some $a\in\{0,1\}^m$.
                \item The \emph{classical} amount of calls needed to determine $f$ is $n$; the \emph{quantum} amount of calls needed is just \emph{one}.
                    Setting $\ket{\Phi}=\frac1{\sqrt{2}}\{\ket{0}-\ket{1}\}$, which is an eigenstate of $f$, we run the following circuit:
                    \begin{equation*}
                        \Qcircuit @C=1em @R=.7em {
                            \lstick{\ket{0}} & \gate{H} & \ctrl{1} \qw & \gate{H} & \rstick{\ket{a}} \qw\\
                            \lstick{\ket{\Phi}} & \qw & \gate{f} & \qw & \rstick{\ket{\Phi}} \qw
                        }
                    \end{equation*}
                \item To see that we do in fact recover $a$ from this circuit, consider the following computation:
                    \begin{align*}
                        \ket{0}\ket{\Phi} \xrightarrow{H\otimes\mathbbm{1}} &\sum_{x\in\{0,1\}^m}\ket{x}\ket{\Phi}\\
                        \xrightarrow{f} &\sum_{x\in\{0,1\}^m}(-1)^{x\cdot a}\ket{x}\ket{\Phi}\\
                        \xrightarrow{H\otimes\mathbbm{1}} &\sum_{x'\in\{0,1\}^m}\left(\sum_{x\in\{0,1\}^m}(-1)^{x\cdot(a\oplus x')}\right)\ket{x'}\ket{\Phi} = \ket{a}\ket{\Phi}.
                    \end{align*}
                    We justify the last equality as follows: summing over all $x\in\{0,1\}^m$ means that the $(-1)^k$ terms will all cancel in pairs \emph{except} for when $a\oplus x'=0$ which happens iff $x'=a$.
            \end{itemize}

    \section{\protect\marginnote{\QI}[0pt]Bell inequalities}

        \subsection{The setup}

            \begin{itemize}
                \item Consider the following experiment:
                    \begin{itemize}
                        \item Alice and Bob each receive a qubit that form an entangled pair.
                        \item There are \emph{two} measurements, $A_1,A_2$ for Alice and $B_1,B_2$ for Bob, that they can each perform on their qubit, and \emph{both} are encoded in the computational basis.
                            For example, $A_i$ measures spin along some direction $\alpha_i$ and $B_i$ measures spin along some direction $\beta_i$, and we associate spin $1$ with $\ket{1}$ and spin $-1$ with $\ket{0}$.
                        \item They then repeat the following two steps many many times:
                            \begin{enumerate}
                                \item Alice and Bob both flip a fair coin to decide which measurement they will perform (i.e. they decide \emph{independently from each other} and \emph{randomly}).
                                \item They perform their chosen measurement and then share their results with \mbox{each other.}
                            \end{enumerate}
                    \end{itemize}
                \item There are now three ways of formulating some sort of \textbf{Bell inequality}:
                    \begin{enumerate}
                        \item We can think of the $A_i$ and $B_i$ as \emph{random variables} taking the values $\pm1$.
                            We thus define a new random variable $$S=A_1(B_1-B_2)+A_2(B_1+B_2).$$
                                Now thinking of the $A_i$ and $B_i$ as random variables (of which we have some statistical knowledge from repeating the above steps), we see that $S=\pm2$ and thus
                                \begin{equation*}
                                    -2\leqslant\mathbb{E}(S)\leqslant2.
                                \end{equation*}
                                This is one of the \textbf{Bell inequalities}.
                        \item It might be that there is some sort of correlation between the measurements, depending on how exactly the qubits are prepared.
                            Assume that we have the following correlation: $$A_1=B_1=A_2\neq B_2.$$
                            That is, whenever Alice chooses to measure $A_1$ and Bob chooses to measure $B_2$ they satisfy $A_1\neq B_2$, etc.
                            There are three very important things to note here:
                            \begin{itemize}
                                \item these correlations are \emph{globally inconsistent}, i.e. we cannot choose values for $A_1$, $A_2$, $B_1$, and $B_2$ such that all the correlations are satisfied at once: we can satisfy \emph{at most three} of them; \emph{but} \ldots
                                \item \ldots \emph{this doesn't mean that these correlations cannot physically occur}, simply because Alice and Bob only ever perform \emph{one} measurement each time, and the correlations are definitely pairwise satisfiable; \emph{but} \ldots
                                \item \ldots \emph{we don't know of any way to physically realise these correlations.}
                            \end{itemize}

                            As mentioned, \emph{if we choose predetermined values} for the $A_i$ and the $B_i$ then we cannot simultaneously satisfy all of the correlations.
                            There are two ways of expressing this as a \textbf{Bell inequality}, which tell us how far away from perfectly satisfying these correlations we are \emph{with our predetermined values}:
                            \begin{enumerate}
                                \item Define $I_2=\mathbb{P}(A_1\neq B_1)+\mathbb{P}(B_1\neq A_2)+\mathbb{P}(A_2\neq B_2)+\mathbb{P}(A_1=B_2)$.
                                    Since for any given $A_i,B_i$ at least one of the correlations won't hold, we see that
                                    \begin{equation*}
                                        I_2\geqslant1.
                                    \end{equation*}
                                \item Let $R$ be the event that \emph{just one} randomly chosen correlation (e.g. $A_2=B_1$) holds.
                                    Then
                                    \begin{equation*}
                                        \mathbb{P}(R)\geqslant0.25.
                                    \end{equation*}
                            \end{enumerate}
                    \end{enumerate}
            \end{itemize}

        \subsection{The quantum violation}

            \begin{itemize}
                
                \item We claim that, with entanglement, \emph{we can violate the Bell inequalities}.
                    In particular, we can achieve
                    \begin{enumerate}
                        \item $\mathbb{E}(S)=2\sqrt2\approx2.8$;
                        \item
                            \begin{enumerate}
                                \item $I_2=4\sin^2\frac{\pi}8\approx0.6$;
                                \item $\mathbb{P}(R)=\sin^2\frac{\pi}8\approx0.15$.
                            \end{enumerate}
                    \end{enumerate}
                \item To see this we use the entangled state
                    \begin{equation*}
                        \ket{\Psi}=\frac1{\sqrt{2}}\Big(\ket{00}+\ket{11}\Big)
                    \end{equation*}
                    where the qubits are \emph{polarised photons}, and the measurements $A_i$ are of polarisation along some angle $\alpha_i$ and the $B_i$ are of polarisation along some angle $\beta_i$, where we will choose $\alpha_i$ and $\beta_i$ `cleverly'.
                    We can construct this state (the \textbf{Bell state}) by using the following circuit:
                    \begin{equation*}
                        \Qcircuit @C=1em @R=1em {
                            \lstick{\ket{0}} & \gate{H} \qw & \ctrl{1} \qw & \qw\\
                            \lstick{\ket{0}} & \qw & \targ \qw & \qw
                        }
                        \quad\raisebox{-1em}{$\frac1{\sqrt{2}}\Big(\ket{00}+\ket{11}\Big)$}
                    \end{equation*}
                \item A physical fact (which doesn't really concern us too much) is that measuring polarisation along some angle $\varphi$ is equivalent to rotating our qubits by $\varphi$ and then measuring in the computational basis, where the \textbf{rotation operator} $R_\varphi$ is given by the matrix
                    \begin{equation*}
                        R_\varphi=\left(
                        \begin{array}{cc}
                            \cos\varphi & -\sin\varphi\\
                            \sin\varphi & \cos\varphi
                        \end{array}
                        \right)
                    \end{equation*}
                \item We first consider the simple case, where $A_i=A$ and $B_i=B$, i.e. Alice and Bob \emph{don't have a choice of angle}.
                    This is described by the following circuit:
                    \begin{equation*}
                        \raisebox{-1.1em}{$\frac1{\sqrt{2}}\Big(\ket{00}+\ket{11}\Big)$}
                        \quad
                        \Qcircuit @C=2em @R=.7em {
                            & \gate{R_\alpha} \qw & \measureD{\mbox{A}} \qw\\
                            & \gate{R_\beta} \qw & \measureD{\mbox{B}} \qw
                        }
                        % \quad\raisebox{-1.1em}{\Bigg\}}
                        \quad\raisebox{-1.1em}{$\cos(\beta-\alpha)\frac{\ket{00}+\ket{11}}{\sqrt2}+\sin(\beta-\alpha)\frac{\ket{01}+\ket{10}}{\sqrt2}$}
                    \end{equation*}
                    whose output state is such that
                    \begin{align*}
                        \mathbb{P}(A=B) &= \cos^2(\beta-\alpha)\\
                        \mathbb{P}(A\neq B) &= \sin^2(\beta-\alpha)
                    \end{align*}
                \item We use the following `clever' choice of angles (it turns out that these actually give us the \emph{strongest lower bound possible within the realms of quantum physics}):
                    \begin{align*}
                        \alpha_1 &= 0 \quad\quad \beta_1=\frac{\pi}8\\
                        \alpha_2 &= \frac{2\pi}8 \quad\, \beta_2=\frac{3\pi}8\\
                    \end{align*}
                    and recall that $A_i$ is the measurement of polarisation along $\alpha_i$ by Alice, and $B_i$ is the measurement of polarisation along $\beta_i$ by Bob.
                \item Combining all of the above, we see that
                    \begin{equation*}
                        \mathbb{P}(A_1=B_1)=\mathbb{P}(B_1=A_2)=\mathbb{P}(A_2=B_2)=\mathbb{P}(B_2\neq A_1)=\cos^2\frac{\pi}8
                    \end{equation*}
                    and we thus violate two of the Bell inequalities:
                    \begin{enumerate}[label=(\alph*)]
                        \item $I_2=4\sin^2\frac{\pi}8\approx0.6$;
                        \item $\mathbb{P}(R)=\sin^2\frac{\pi}8\approx0.15$.
                    \end{enumerate}
                \item For the remaining Bell inequality we return first to the simple case: note that if $A=B$ then $AB=1$ and if $A\neq B$ then $AB=-1$.
                    Thus
                    \begin{align*}
                        \mathbb{E}(AB)&=\cos^2(\beta-\alpha)-\sin^2(\beta-\alpha)\\
                        &=\cos^2(\beta-\alpha).
                    \end{align*}
                    So, returning to our previous choices of $\alpha_i,\beta_i$, we see that
                    \begin{align*}
                        \mathbb{E}(S)&=\mathbb{E}(A_1B_1)-\mathbb{E}(A_1B_2)+\mathbb{E}(A_2B_1)+\mathbb{E}(A_2B_2)\\
                        &=2\sqrt2
                    \end{align*}
                    which violates the last Bell inequality.
            \end{itemize}

    \section{\protect\marginnote{\QI}[0pt]Density operators}

        \subsection{Preliminary definitions}

            \begin{itemize}
                \item There are a few problems with using state vectors to describe quantum physics that density operators aim to solve, with the last point being the most important:
                    \begin{enumerate}
                        \item two states can differ by a global phase but still be experimentally the same;
                        \item we generally have a lot of tensor products floating around;
                        \item state vectors can only really describe \emph{pure states}, and not \emph{mixed states}.
                    \end{enumerate}
                \item An operator $A$ on $\hilb$ is \textbf{positive semi-definite} if $\bramidket{\Psi}{A}{\Psi}\geqslant0$ for all \mbox{$\ket{\Psi}\in\hilb$.}
                \item Say we have some system (isolated or not, and possibly a tensor product) $\hilb$.
                    Then we describe this system by \textbf{density operators}, which are defined to be positive semi-definite linear operators of trace $1$.
                \item \emph{A positive semi-definite linear operator of trace $1$ is Hermitian.}

                    \fbox{\emph{Make sure that you can prove this.}}
                \item $\tr\ketbra{a}{b}=\braket{b}{a}$

                    \fbox{\emph{Make sure that you can prove this too.}}
            \end{itemize}
                
        \subsection{Pure states}

            \begin{itemize}
                \item To a \emph{pure state} $\ket{\Psi}\in\hilb$ we associate the \textbf{density operator} $\rho=\ketbra{\Psi}{\Psi}$.
                \item Say $\ket{\Psi}\in\hilb$ is a pure state.
                    Then working in the computational basis we can write the associated density operator $\rho$ as a \textbf{density matrix}:
                    \begin{align*}
                        \ket{\Psi} = \alpha_0\ket{0}+\alpha_1\ket{1} \leftrightarrow \rho &= |\alpha_0|^2\ketbra{0}{0} + \alpha_0\alpha_1^*\ketbra{0}{1} + \alpha_0^*\alpha_1\ketbra{1}{0} + |\alpha_1|^2\ketbra{1}{1}\\
                        &= \left(
                        \begin{array}{cc}
                            |\alpha_0|^2 & \alpha_0\alpha_1^*\\
                            \alpha_0^*\alpha_1 & |\alpha_1|^2
                        \end{array}
                        \right)
                    \end{align*}
                \item The diagonal elements of the density matrix are called \textbf{populations}; the off-diagonal elements are called \textbf{coherences}.
                \item Recall that we have projectors $P_i=\ketbra{i}{i}$ that satisfy $P_iP_j=\delta_{ij}$ and $P_0+P_1=\mathbbm{1}$, and that the probability of measuring $\ket{\Psi}$ to be in state $\ket{i}$ is given by $\bramidket{\Psi}{P_i}{\Psi}$.
                    We extend this to define \textbf{probabilities for density operators} by noting that
                    \begin{equation*}
                        \bramidket{\Psi}{P_i}{\Psi}=\tr P_i\ketbra{\Psi}{\Psi}=\tr P_i\rho
                    \end{equation*}
                    and thus set the \textbf{probability of measuring $\rho$ to be in state $\ket{i}$} as $\tr P_i\rho$.

                    \fbox{\emph{Make sure that you can prove the first equality above.}}
            \end{itemize}

        \subsection{Mixed states}

            \begin{itemize}
                \item Recall that a mixed state is a statistical ensemble of quantum states, i.e. we know that the system is in state $\ket{\Psi_k}$ with probability $p_k$.
                    To such a mixed state we associate the \textbf{density operator}
                    \begin{equation*}
                        \rho=\sum_k p_k\ketbra{\Psi_k}{\Psi_k}.
                    \end{equation*}
                \item The \textbf{probability of measuring a mixed state $\rho$ to be in the state $\ket{i}$} is given by
                    \begin{equation*}
                        \sum_k\bramidket{\Psi_k}{P_i}{\Psi_k} = \tr\sum_k p_kP_i\ketbra{\Psi_k}{\Psi_k} = \tr P_i\rho.
                    \end{equation*}

                    \fbox{\emph{Make sure that you can prove the first equality above.}}
            \end{itemize}

        \subsection{Experimental differentiability}

            \begin{itemize}
                \item \emph{By definition, density operators and projectors commute.}
                    \emph{Thus}
                    \begin{equation*}
                        \mathbb{P}\big(\rho\text{ is measured to be in state }\ket{i}\big) = \tr\rho P_i = \tr P_i\rho.
                    \end{equation*}
                \item \emph{A mixed state has zero coherence terms; a pure state has maximal coherence terms $|\rho_{ij}|=\sqrt{\rho_{ii}\rho_{jj}}$.}

                    \fbox{\emph{Try to prove this.}}
                \item \emph{A density operator $\rho$ describes a pure state iff $\tr\rho^2=1$.}

                    \fbox{\emph{Try to prove this (assuming the above).}}
                \item We now describe two states, one pure and one mixed, that we \emph{cannot} experimentally differentiate simply by measuring in the computational basis.
                    (Though it is important to note that we \emph{can} differentiate them by measuring in some other basis.)

                    For both of the following states, the probability of measurement resulting in $\ket{0}$ is $|\alpha_0|^2$ and the probability of measurement resulting in $\ket{1}$ is $|\alpha_1|^2$.
                    \begin{enumerate}
                        \item Say we have a qubit that is in state $\ket{0}$ with probability $\alpha_0$ and in state $\ket{1}$ with probability $\alpha_1$.
                            Then the associated density matrix $\rho$ is given by
                            \begin{equation*}
                                \rho = \left(
                                \begin{array}{cc}
                                    |\alpha_0|^2 & 0\\
                                    0 & |\alpha_1|^2
                                \end{array}
                                \right)
                            \end{equation*}
                            (and this describes a \emph{mixed state}).
                        \item Say we have a qubit in the coherent superposition $\alpha_0\ket{0}+\alpha_1\ket{1}$.
                            We have already seen that this has density matrix $\rho$ given by
                            \begin{equation*}
                                \rho = \left(
                                \begin{array}{cc}
                                    |\alpha_0|^2 & \alpha_0\alpha_1^*\\
                                    \alpha_0^*\alpha_1 & |\alpha_1|^2
                                \end{array}
                                \right)
                            \end{equation*}
                            (which describes a \emph{pure state}).
                    \end{enumerate}

                    We know that there is some way of differentiating these states experimentally since they are \emph{represented by different density matrices}.
                \item Converse to the above example, we now describe two (mixed) states which give rise to the same density matrix, and thus \emph{cannot} be experimentally differentiated, \emph{no matter which basis we measure in}.
                    \begin{enumerate}
                        \item Say we have a qubit that is in states $\ket{0}$ and $\ket{1}$ with equal probability $\frac12$.
                            Then this is the mixed state in the above example with $\alpha=\beta=\frac1{\sqrt2}$ and so the density matrix is
                            \begin{equation*}
                                \rho=\left(
                                \begin{array}{cc}
                                    \frac12 & 0\\
                                    0 & \frac12
                                \end{array}
                                \right)
                            \end{equation*}
                        \item Say we have a qubit that is in the states $\frac1{\sqrt2}\big(\ket{0}+\ket1\big)$ and $\frac1{\sqrt2}\big(\ket0-\ket1\big)$ with equal probability $\frac12$.
                            Then this mixed state also has density matrix $\rho$ given by
                            \begin{equation*}
                                \rho=\left(
                                \begin{array}{cc}
                                    \frac12 & 0\\
                                    0 & \frac12
                                \end{array}
                                \right)
                            \end{equation*}
                    \end{enumerate}
                \item \textbf{Motto:} density operators describe states \emph{up to experimental differentiability}.
            \end{itemize}

        \subsection{Partial trace and the environment}

            \begin{itemize}
                \item The \textbf{partial trace of an operator over a subsystem} is defined for operators of the form $A=\bigotimes_{i=1}^k A_i$ on a system of the form $\hilb=\bigotimes_{i=1}^k\hilb_{A_i}$ as follows:
                    \begin{equation*}
                        \tr_{A_i}A=(\tr A_i)\bigotimes_{i\neq j} A_j
                    \end{equation*}
                    and is extended linearly to all operators on $\hilb$.
                \item \emph{The partial trace is the only function $f$ such that}
                    \begin{equation*}
                        tr[P_kf(\rho)] = \tr[(P_k\otimes\mathbbm{1})\rho].
                    \end{equation*}
                \item Partial traces give a way of \emph{disregarding certain subsystems}.
                    For example, say that we have two entangled subsystems $\hilb_A$ and $\hilb_B$ with orthonormal basis states $\ket{a_i}\ket{b_i}$, and define the mixed state
                    \begin{equation*}
                        \ket\Psi = \sum_k \sqrt{p_k}\,\ket{\Psi_k}\ket{b_k}
                    \end{equation*}
                    where $p_k\geqslant0$ are such that $\sum_k p_k=1$.
                    This state has associated density operator $\rho$ given by
                    \begin{equation*}
                        \rho = \ketbra\Psi\Psi = \sum_{k,\ell}\sqrt{p_kp_\ell}\,\Big(\ketbra{\Psi_k}{\Psi_\ell}\otimes\ketbra{b_k}{b_\ell}\Big).
                    \end{equation*}
                    Tracing over the subsystem $B$ then gives
                    \begin{equation*}
                        \tr_B\rho = \sum_{k,\ell}\Big(\braket{b_\ell}{b_k}\sqrt{p_kp_\ell}\Big)\,\ketbra{\Psi_k}{\Psi_\ell} = \sum_kp_k\ketbra{\Psi_k}{\Psi_k} = \rho_A
                    \end{equation*}
                    where $\rho_A$ is the density operator associated to system $A$.
                    This is exactly the same as our previous scenarios, i.e. \emph{tracing over a subsystem is a `valid' operation}.
                \item \textbf{Interpretation:} when we describe mixed states as being `state $\ket{\Psi_k}$ with probability $p_k$' and thus described by density operator $\sum_k p_k\ketbra{\Psi_k}{\Psi_k}$ this is really just an educated guess.
                The actual prepared state is of the form $\sum_{k,\ell}\sqrt{p_kp_\ell}\,\Big(\ketbra{\Psi_k}{\Psi_\ell}\otimes\ketbra{b_k}{b_\ell}\Big)$ where $\hilb_B$ corresponds to the universe and the $\ket{b_k}$ correspond to the universe knowing things that we don't.
                    We recover our educated guess by `tracing over the universe'.
            \end{itemize}

        \subsection{Decoherence}

            \subsubsection{The general case}

                \begin{itemize}
                    \item Recall the notation from \cref{sec:interference-and-decoherence}: we have some qubit $A$ described by $\hilb_A$ and some environment $E$ in state $\ket{e}$ that evolves according to
                        \begin{align*}
                            \ket0\ket{e} &\xrightarrow{D} \ket0\ket{e_0}\\
                            \ket1\ket{e} &\xrightarrow{D} \ket1\ket{e_1}
                        \end{align*}
                        and such that $\braket{e_0}{e_1}=ve^{i\vartheta}$ is not necessarily zero, but the $\ket{e_i}$ \emph{are} of length $1$.
                    \item To some pure state $\ket\Psi=\alpha_0\ket0+\alpha_1\ket1$ we associate the density matrix
                        \begin{equation*}
                            \rho_A=\left(
                            \begin{array}{cc}
                                |\alpha_0|^2 & \alpha_0\alpha_1^*\\
                                \alpha_0^*\alpha_1 & |\alpha_1|^2
                            \end{array}
                            \right)
                        \end{equation*}
                        and so to the evolution $\ket{\Psi'}=\alpha_0\ket0\ket{e_0}+\alpha_1\ket1\ket{e_1}$ of the state $\ket\Psi\ket{e}$ under then environment we associate the density operator
                        \begin{align*}
                            \rho = |\alpha_0|^2&\Big(\ketbra00\otimes\ketbra{e_0}{e_0}\Big)+\alpha_0\alpha_1^*\Big(\ketbra01\otimes\ketbra{e_0}{e_1}\Big)\\
                            +\alpha_0^*\alpha_1&\Big(\ketbra10\otimes\ketbra{e_1}{e_0}\Big)+|\alpha_1|^2\,\Big(\ketbra11\otimes\ketbra{e_1}{e_1}\Big).
                        \end{align*}
                    \item Tracing $\rho$ over the environment gives us the density matrix
                        \begin{equation*}
                            \tr_E\rho=\left(
                            \begin{array}{cc}
                                |\alpha_0|^2 & \alpha_0\alpha_1^*\braket{e_1}{e_0}\\
                                \alpha_0^*\alpha_1\braket{e_0}{e_1} & |\alpha_1|^2
                            \end{array}
                            \right)
                        \end{equation*}
                    \item We can interpret the density operator as follows: when $\braket{e_0}{e_1}$ tend to $0$ (i.e. when the environment learns more and more) we \emph{lose} the off-diagonal (coherence) entries.
                \end{itemize}

            \subsubsection{Hadamard-phase-Hadamard}
                
                \begin{itemize}
                    \item We revisit the specific example found in \cref{sec:interference-and-decoherence} but in a slightly neater way, with the following circuit:
                        \begin{equation*}
                            \Qcircuit @C=1em @R=1em {
                                & & \raisebox{-1.5em}{$\varphi$} & & &\\
                                \lstick{\ket{0}} & \gate{H} \qw & \control \qw & \qswap \qw & \gate{H} \qw & \qw\\
                                \lstick{\ket{e}} & \qw & \qw & \gate{D} \qwx & \qw & \qw
                            }
                        \end{equation*}
                        where $D$ is the controlled-unitary gate corresponding to the environmental decoherence.
                    \item We follow the evolution of \emph{just the qubit} in terms of its density matrix, moving the phase terms into the environment (this is more clearly seen when we write out what happens to the environment as well):
                        \begin{equation*}
                            \left(
                            \begin{array}{cc}
                                1&0\\
                                0&0
                            \end{array}
                            \right)
                            \xrightarrow{H}
                            \left(
                            \begin{array}{cc}
                                \frac12&\frac12\\[.3em]
                                \frac12&\frac12
                            \end{array}
                            \right)
                            \xrightarrow{P_\varphi}
                            \left(
                            \begin{array}{ll}
                                \frac12&\frac12e^{-i\varphi}\\[.5em]
                                \frac12e^{i\varphi}&\frac12
                            \end{array}
                            \right)
                            \xrightarrow{D}
                            \left(
                            \begin{array}{ll}
                                \frac12&\frac12e^{-i\varphi}\\[.5em]
                                \frac12e^{i\varphi}&\frac12
                            \end{array}
                            \right)
                            \xrightarrow{H}
                            \left(
                            \begin{array}{cc}
                                \frac12&\frac12\\[.3em]
                                \frac12&\frac12
                            \end{array}
                            \right)
                        \end{equation*}
                    \item But tracing over $E$ results in
                        \begin{equation*}
                            \frac12
                            \left(
                            \begin{array}{cc}
                                1+v\cos(\varphi+\vartheta) & iv\sin(\varphi+\vartheta)\\[.6em]
                                -iv\sin(\varphi+\vartheta) & 1-v\cos(\varphi+\vartheta)
                            \end{array}
                            \right)
                        \end{equation*}
                    \item Recall that the probability of measuring the output to be in state $\ket{0}$ is given by $\tr P_0\rho$ where $P_0=\ketbra00$.
                        As matrices, this is
                        \begin{equation*}
                            \frac12
                            \tr\left(
                            \begin{array}{cc}
                                1&0\\[.6em]
                                0&0
                            \end{array}
                            \right)
                            \left(
                            \begin{array}{cc}
                                1+v\cos(\varphi+\vartheta) & iv\sin(\varphi+\vartheta)\\[.6em]
                                -iv\sin(\varphi+\vartheta) & 1-v\cos(\varphi+\vartheta)
                            \end{array}
                            \right)=
                            \frac12\big(1+v\cos(\varphi+\vartheta)\big)
                        \end{equation*}
                        which agrees with our answer in \cref{sec:interference-and-decoherence}.
                \end{itemize}

        \subsection{Completely-positive maps}

            \begin{itemize}
                \item We have stated that \emph{pure} states evolve under \emph{unitary} evolutions:
                    \begin{align*}
                        \ket\Psi&\to U\ket\Psi\\
                        \ketbra\Psi\Psi&\to U\ketbra\Psi\Psi U^\dagger
                    \end{align*}
                    but general density operators \emph{don't have to}.
                    For example, consider the unitary \mbox{evolution}
                    \begin{equation*}
                        \rho_A\otimes\rho_B\to U(\rho_A\otimes\rho_B)U^\dagger.
                    \end{equation*}
                    When we trace over subsystem $B$ we obtain the map
                    \begin{equation*}
                        \rho_A\to\tr_B\big(U(\rho_A\otimes\rho_B)U^\dagger\big)
                    \end{equation*}
                    and there is no reason why this map should necessarily be unitary.
                \item A good example of a \emph{non-admissible} map is the \textbf{transpose}: $t\colon\rho\to\rho^t$ because it is not `physically legal': consider the state $\ket\Psi=\frac1{\sqrt2}(\ket0\ket0+\ket1\ket1)$.
                    Then the transpose acts on $\rho=\ketbra\Psi\Psi$ as follows (\emph{recalling that we are working in a tensor product of spaces}):
                    \begin{equation*}
                        \rho=\left(
                        \begin{array}{cc|cc}
                            1 & 0 & 0 & 1\\
                            0 & 0 & 0 & 0\\
                            \hline
                            0 & 0 & 0 & 0\\
                            1 & 0 & 0 & 1
                        \end{array}
                        \right)\to\left(
                        \begin{array}{cc|cc}
                            1 & 0 & 0 & 0\\
                            0 & 0 & 1 & 0\\
                            \hline
                            0 & 1 & 0 & 0\\
                            0 & 0 & 0 & 1
                        \end{array}
                        \right)=
                        \rho^t
                    \end{equation*}
                    but $\rho^t$ has eigenvalues $\pm1$ and so is \emph{not} positive semi-definite and thus \emph{not} a density matrix.
                    Thus $t$ is \emph{not} a physically legal evolution, \emph{even though} it acts on matrices in a way that preserves trace and positivity, because it doesn't act `properly' with tensor products.
                \item The maps that we want to study are \textbf{completely-positive maps}: maps $S$ that are trace-preserving and positive \emph{and such that} the \textbf{extension} $S\otimes\mathbbm{1}$ is also trace-preserving and positive.
            \end{itemize}
\end{document}
